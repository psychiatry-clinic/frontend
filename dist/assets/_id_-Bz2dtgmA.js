import{a as ct,b as pt}from"./formatters-DocrwTSm.js";import{r as st,c as B,b as ut,f as nt,g as mt}from"./myFormat-DRFp6jbP.js";import{_ as _t}from"./UserInfoEditDialog.vue_vue_type_script_setup_true_lang-wHNURM66.js";import{_ as ht}from"./editPatient.vue_vue_type_style_index_0_lang-G6NC_SEu.js";import{a as O,V as j}from"./VRow-CXoHp8QV.js";import{V as F}from"./VCardText-CJOHrNvm.js";import{V as ft}from"./VAvatar-BIFXozKL.js";import{V as bt}from"./VImg-Bae796qE.js";import{V as Dt,a as u}from"./VList-JAylIUkd.js";import{V as yt,a as xt,b as gt,c as kt}from"./VExpansionPanel-CjBuXutm.js";import{d as H,aV as M,r as P,a6 as vt,o as l,c as _,b as i,f as o,g as b,x as t,n as e,e as a,v as r,z as f,y as Vt,F as A,i as E,aj as T,aX as R,Q as $t,R as wt,b8 as it,k as lt,j as rt,b9 as Ct,a0 as At}from"./index-3pGq2HFV.js";import{V as dt}from"./VCard-Bc786MsR.js";import{a as Tt,d as ot}from"./differenceInYears-BdTDs0wt.js";import{_ as St}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as It,a as Nt}from"./VTimelineItem-CCfEx0oz.js";import{f as Pt}from"./formatDistanceToNow-BVuTYATa.js";import{u as Et}from"./useApi-hsjQPy3a.js";import{$ as Bt}from"./api-BAgyDrFJ.js";import{V as Ft,a as Ot}from"./VTabs-nrttW7Dx.js";import{V as Rt,a as Ht}from"./VWindowItem-CLgdKtMQ.js";import{V as Lt}from"./VAlert-CEiMoL14.js";import"./helpers-BGv4x_9E.js";import"./validators-DR7cptrM.js";import"./suggestions-BPXin5Wq.js";import"./AppTextarea.vue_vue_type_script_setup_true_lang-B9y5_ZHH.js";import"./form-DyVGh901.js";/* empty css                   */import"./VCounter-CbTVbLN0.js";import"./index-Mfkcl6gO.js";import"./index-zbSmRiG7.js";import"./VField-FFMorBfr.js";import"./easing-CjukEv2V.js";import"./VInput-C9iGFJub.js";import"./forwardRefs-C-GTDzx5.js";import"./AppAutocomplete.vue_vue_type_script_setup_true_lang-JUMRjRBG.js";import"./VSelect-DyOQAhd2.js";import"./VTextField-DGaYxKoR.js";import"./dialog-transition-DC_T0url.js";import"./VMenu-BPtMqZSM.js";import"./VOverlay-C8GBX-QS.js";import"./lazy-CapJjIsX.js";import"./scopeId-qKyLbBGk.js";import"./VCheckboxBtn-B2uE-nKi.js";import"./VSelectionControl-SmVdAd3V.js";import"./VChip-CKlV-l8p.js";import"./VSlideGroup-B-Nrrtbz.js";import"./filter-711-7tT1.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-CRgIGuYq.js";import"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-BRKPv3ig.js";import"./VForm-CuNfIuSZ.js";import"./VRadioGroup-CQNl5JmS.js";import"./VDialog-BR01K3Uf.js";import"./AppDateTimePicker.vue_vue_type_style_index_0_lang-9Y30Qh-8.js";import"./CustomRadios--L6txf7e.js";import"./VSpacer-x1yhBh9j.js";/* empty css              */import"./createSimpleFunctional-EivvG0hh.js";import"./AppDrawerHeaderSection.vue_vue_type_script_setup_true_lang-DpgRduIl.js";import"./vue3-perfect-scrollbar.esm-DP4KLs4U.js";import"./VDivider-Dmtm0zGl.js";import"./VNavigationDrawer-52mdHxAl.js";import"./ssrBoot-D1kM89vv.js";import"./BlobServiceClient-CR2xPX03.js";import"./__vite-browser-external-DFygW7-s.js";import"./index-B3bPRkoL.js";const L=w=>($t("data-v-f3ee616a"),w=w(),wt(),w),jt={key:1,class:"text-5xl font-weight-medium"},Mt={class:"text-h5 mt-4"},zt={class:"text-h6"},Ut={class:"text-body-1 d-inline-block"},Wt={class:"text-h6"},Yt={class:"text-body-1 d-inline-block"},qt={class:"text-h6"},Gt={class:"text-body-1 d-inline-block"},Qt={class:"text-h6"},Xt={class:"text-body-1 d-inline-block"},Jt={key:0},Kt={class:"text-h6"},Zt={class:"text-body-1 d-inline-block"},te={class:"text-h6"},ee={class:"text-body-1 d-inline-block"},ae={class:"text-h6"},se={class:"text-body-1 d-inline-block"},ne={class:"text-h6"},oe={class:"text-body-1 d-inline-block"},ie={class:"text-h6"},le={class:"text-body-1 d-inline-block"},re=L(()=>a("br",null,null,-1)),de={key:1},ce={class:"text-h6"},pe={class:"d-block mt-4 mb-2 text-primary text-h6"},ue={class:"text-h6"},me={class:"text-body-1 d-inline-block"},_e={class:"text-h6"},he={class:"text-body-1 d-inline-block"},fe={class:"text-h6"},be={class:"text-body-1 d-inline-block"},De={class:"text-h6"},ye={class:"text-body-1 d-inline-block"},xe={class:"text-h6"},ge={class:"text-body-1 d-inline-block"},ke={class:"d-block mt-4 mb-2 text-primary text-h6"},ve={class:"text-h6"},Ve={class:"text-body-1 d-inline-block"},$e={class:"text-h6"},we={class:"text-body-1 d-inline-block"},Ce={class:"text-h6"},Ae={class:"text-body-1 d-inline-block"},Te={class:"text-h6"},Se={class:"text-body-1 d-inline-block"},Ie={class:"text-h6"},Ne={class:"text-body-1 d-inline-block"},Pe=L(()=>a("br",null,null,-1)),Ee={class:"text-h6 text-primary"},Be={class:"text-body-1 d-inline-block"},Fe={class:"text-h6 text-primary"},Oe={class:"text-body-1 d-inline-block"},Re=L(()=>a("br",null,null,-1)),He={class:"text-h6 text-primary"},Le={class:"text-body-1 d-inline-block"},je=L(()=>a("br",null,null,-1)),Me=H({__name:"CustomerBioPanel",props:{patientData:{}},setup(w){const{t:n}=M(),g=P(!1),k=P(!1),s=w,p=P(s.patientData),V=vt(()=>({...p.value,createdAt:st(p.value.createdAt),age:B(p.value.dob),dob:st(p.value.dob)})),h=Tt(new Date,new Date(s.patientData.dob))<14;let D=[];return h?D=[{name:n("Family History"),data:p.value.family_hx},{name:n("Social History"),data:p.value.social_hx}]:D=[{name:n("Family History"),data:p.value.family_hx},{name:n("Social History"),data:p.value.social_hx},{name:n("Personal History"),data:p.value.personal_hx},{name:n("Occupation History"),data:p.value.occupation_hx},{name:n("Forensic History"),data:p.value.forensic_hx}],(m,y)=>{const d=_t;return l(),_(A,null,[i(j,null,{default:o(()=>[i(O,{cols:"12"},{default:o(()=>[s.patientData?(l(),b(dt,{key:0},{default:o(()=>[i(F,{class:"text-center pt-12"},{default:o(()=>[i(ft,{rounded:"",size:120,color:s.patientData.name?void 0:"primary",variant:s.patientData.avatar?void 0:"tonal"},{default:o(()=>[s.patientData.avatar?(l(),b(bt,{key:0,src:s.patientData.avatar},null,8,["src"])):(l(),_("span",jt,t(("avatarText"in m?m.avatarText:e(ct))(s.patientData.name)),1))]),_:1},8,["color","variant"]),a("h5",Mt,t(s.patientData.name),1)]),_:1}),i(F,null,{default:o(()=>[i(Dt,{class:"card-list mt-2"},{default:o(()=>[i(u,null,{default:o(()=>[a("h6",zt,[r(t(e(n)("Gender"))+": ",1),a("span",Ut,t(e(n)(s.patientData.gender)),1)])]),_:1}),i(u,null,{default:o(()=>[a("h6",Wt,[r(t(e(n)("Birth Date"))+" : ",1),a("span",Yt,t(("removeTimeAndDate"in m?m.removeTimeAndDate:e(ut))(s.patientData.dob)),1)])]),_:1}),i(u,null,{default:o(()=>[a("h6",qt,[r(t(e(n)("Age"))+" : ",1),a("span",Gt,t(("calculateAge"in m?m.calculateAge:e(B))(s.patientData.dob)),1)])]),_:1}),i(u,null,{default:o(()=>[a("h6",Qt,[r(t(e(n)("Phone"))+" : ",1),a("span",Xt,t(s.patientData.phone),1)])]),_:1}),s.patientData.demographics?(l(),_("div",Jt,[h?(l(),b(u,{key:0},{default:o(()=>{var c;return[a("h6",Kt,[r(t(e(n)("Marital Status"))+" : ",1),a("span",Zt,t((c=s.patientData.demographics[0])==null?void 0:c.marital_status),1)])]}),_:1})):f("",!0),h?(l(),b(u,{key:1},{default:o(()=>{var c;return[a("h6",te,[r(t(e(n)("Children"))+" : ",1),a("span",ee,t((c=s.patientData.demographics[0])==null?void 0:c.children),1)])]}),_:1})):f("",!0),i(u,null,{default:o(()=>{var c;return[a("h6",ae,[r(t(e(n)("Residence"))+" : ",1),a("span",se,t((c=s.patientData.demographics[0])==null?void 0:c.residence),1)])]}),_:1}),i(u,null,{default:o(()=>{var c;return[a("h6",ne,[r(t(e(n)("Education"))+" : ",1),a("span",oe,t((c=s.patientData.demographics[0])==null?void 0:c.education),1)])]}),_:1}),h?(l(),b(u,{key:2},{default:o(()=>{var c;return[a("h6",ie,[r(t(e(n)("Work"))+" : ",1),a("span",le,t((c=s.patientData.demographics[0])==null?void 0:c.occupation),1)])]}),_:1})):f("",!0)])):f("",!0),re,h?(l(),_("div",de,[i(u,null,{default:o(()=>[a("h6",ce,[a("span",{class:Vt(s.patientData.related?"text-error":"text-success")},t(s.patientData.related?e(n)("Parents")+" "+e(n)("Related"):e(n)("Parents")+" "+e(n)("Not Related")),3)])]),_:1}),a("h6",pe,t(e(n)("Father Information")),1),i(u,null,{default:o(()=>[a("h6",ue,[r(t(e(n)("Birth Date"))+" : ",1),a("span",me,t(s.patientData.father_dob?new Date(s.patientData.father_dob).getFullYear():""),1)])]),_:1}),i(u,null,{default:o(()=>[a("h6",_e,[r(t(e(n)("Age at Birth of Child"))+" : ",1),a("span",he,t(s.patientData.father_dob?e(ot)(s.patientData.dob,s.patientData.father_dob):""),1)])]),_:1}),i(u,null,{default:o(()=>[a("h6",fe,[r(t(e(n)("Age Now"))+" : ",1),a("span",be,t(s.patientData.father_dob?("calculateAge"in m?m.calculateAge:e(B))(s.patientData.father_dob?s.patientData.father_dob.toString():"1"):""),1)])]),_:1}),i(u,null,{default:o(()=>[a("h6",De,[r(t(e(n)("Education"))+" : ",1),a("span",ye,t(s.patientData.father_edu),1)])]),_:1}),i(u,null,{default:o(()=>[a("h6",xe,[r(t(e(n)("Work"))+" : ",1),a("span",ge,t(s.patientData.father_work),1)])]),_:1}),a("h6",ke,t(e(n)("Mother Information")),1),i(u,null,{default:o(()=>[a("h6",ve,[r(t(e(n)("Birth Date"))+" : ",1),a("span",Ve,t(s.patientData.mother_dob?new Date(s.patientData.mother_dob).getFullYear():""),1)])]),_:1}),i(u,null,{default:o(()=>[a("h6",$e,[r(t(e(n)("Age at Birth of Child"))+" : ",1),a("span",we,t(s.patientData.mother_dob?e(ot)(s.patientData.dob,s.patientData.mother_dob):""),1)])]),_:1}),i(u,null,{default:o(()=>[a("h6",Ce,[r(t(e(n)("Age Now"))+" : ",1),a("span",Ae,t(s.patientData.mother_dob?("calculateAge"in m?m.calculateAge:e(B))(s.patientData.mother_dob?s.patientData.mother_dob.toString():"1"):""),1)])]),_:1}),i(u,null,{default:o(()=>[a("h6",Te,[r(t(e(n)("Education"))+" : ",1),a("span",Se,t(s.patientData.mother_edu),1)])]),_:1}),i(u,null,{default:o(()=>[a("h6",Ie,[r(t(e(n)("Work"))+" : ",1),a("span",Ne,t(s.patientData.mother_work),1)])]),_:1}),Pe,i(u,null,{default:o(()=>[a("h6",Ee,[r(t(e(n)("Siblings"))+" : ",1),a("span",Be,t(s.patientData.siblings),1)])]),_:1}),i(u,null,{default:o(()=>[a("h6",Fe,[r(t(e(n)("Order in Siblings"))+" : ",1),a("span",Oe,t(e(nt)(s.patientData.order)!=="nullth"?e(nt)(s.patientData.order):""),1)])]),_:1}),Re])):f("",!0),i(u,null,{default:o(()=>[a("h6",He,[r(t(e(n)("Notes"))+" : ",1),a("span",Le,t(s.patientData.notes),1)])]),_:1})]),_:1}),je,e(D)?(l(),b(yt,{key:0,multiple:""},{default:o(()=>[(l(!0),_(A,null,E(e(D),c=>(l(),b(xt,null,{default:o(()=>[i(gt,null,{default:o(()=>[r(t(c.name),1)]),_:2},1024),(l(!0),_(A,null,E(c.data,(C,x)=>(l(),b(kt,null,{default:o(()=>[r(t(x)+": "+t(C),1)]),_:2},1024))),256))]),_:2},1024))),256))]),_:1})):f("",!0)]),_:1}),i(F,{class:"text-center"},{default:o(()=>[i(T,{block:"",onClick:y[0]||(y[0]=c=>k.value=!e(k))},{default:o(()=>[r(t(e(n)("Edit Patient Details")),1)]),_:1})]),_:1})]),_:1})):f("",!0)]),_:1}),i(ht,{"patient-data":e(V),"is-drawer-open":e(k),"onUpdate:isDrawerOpen":y[1]||(y[1]=c=>R(k)?k.value=c:null)},null,8,["patient-data","is-drawer-open"])]),_:1}),i(d,{isDialogVisible:e(g),"onUpdate:isDialogVisible":y[2]||(y[2]=c=>R(g)?g.value=c:null),"user-data":e(p),onSubmit:y[3]||(y[3]=()=>{})},null,8,["isDialogVisible","user-data"])],64)}}}),ze=St(Me,[["__scopeId","data-v-f3ee616a"]]),Ue={class:"d-flex justify-space-between align-center gap-2 flex-wrap mb-2"},We={class:"app-timeline-title"},Ye={class:"app-timeline-meta"},qe={key:0,class:"d-flex justify-space-between align-center gap-2 flex-wrap mb-2"},Ge={class:"app-timeline-text mt-1"},Qe={class:"text-warning"},Xe={class:"app-timeline-meta"},Je={key:1,class:"app-timeline-text mt-1"},Ke={class:"text-warning"},Ze={key:2,class:"app-timeline-text mt-1"},ta={class:"text-warning"},ea={key:0},aa={key:1},sa={key:2},na={key:3},oa={class:"app-timeline-text mt-1"},ia={class:"text-warning"},la={class:"app-timeline-text mt-1"},ra={class:"text-warning"},da=H({__name:"visitTimeLine",props:{patientData:{}},setup(w){const{t:n}=M(),g=it("userData").value,k=lt();return rt(),(s,p)=>(l(),b(dt,{title:e(n)("Visits Timeline")},{default:o(()=>[i(F,null,{default:o(()=>{var V,h,D,m;return[((V=e(g))==null?void 0:V.role)==="DOCTOR"&&((D=(h=s.patientData)==null?void 0:h.visits)!=null&&D[s.patientData.visits.length-1])&&!s.patientData.visits[s.patientData.visits.length-1].active||((m=s.patientData.visits)==null?void 0:m.length)===0?(l(),b(T,{key:0,variant:"outlined",class:"mb-5",onClick:p[0]||(p[0]=y=>e(k).push({name:"patients-visits-new-id",params:{id:s.patientData.id},query:{dob:s.patientData.dob,name:s.patientData.name}}))},{default:o(()=>[r(t(e(n)("New Visit")),1)]),_:1})):f("",!0),i(It,{side:"end",align:"start","line-inset":"8","truncate-line":"start",density:"compact"},{default:o(()=>{var y;return[(l(!0),_(A,null,E((y=s.patientData.visits)==null?void 0:y.slice().reverse(),(d,c)=>(l(),b(Nt,{"dot-color":"primary",size:"x-small"},{default:o(()=>{var C,x,S,I,N,v,z,U,W,Y,q,G,Q,X,J,K,Z,tt,et,at;return[a("div",Ue,[a("span",We,t(("getVisitNumber"in s?s.getVisitNumber:e(mt))(s.patientData.visits,c))+" visit ",1),a("span",Ye,t(e(Pt)(new Date(d.createdAt),{addSuffix:!0})),1)]),d.follow_up?f("",!0):(l(),_("div",qe,[a("div",Ge,[a("span",Qe,t(e(n)("Chief Complaint"))+": ",1),a("li",null,t((C=d.chief_complaint)!=null&&C.Complaint?(x=d.chief_complaint)==null?void 0:x.Complaint:(S=d.present_illness)==null?void 0:S.Course)+" "+t((I=d.chief_complaint)!=null&&I.Duration?"for":"")+" "+t((N=d.chief_complaint)==null?void 0:N.Duration),1)]),a("span",Xe,t(("formatDate"in s?s.formatDate:e(pt))(d.createdAt)),1)])),d.follow_up?(l(),_("div",Ze,[a("span",ta,t(e(n)("Follow up notes"))+": ",1),(z=d.notes)!=null&&z.Notes?(l(),_("li",ea,t((U=d.notes)==null?void 0:U.Notes),1)):f("",!0),(W=d.notes)!=null&&W["Current Symptoms"]?(l(),_("li",aa,t((Y=d.notes)==null?void 0:Y["Current Symptoms"]),1)):f("",!0),(q=d.notes)!=null&&q.Compliance?(l(),_("li",sa,t(((G=d.notes)==null?void 0:G.Compliance)+" compliance"),1)):f("",!0),(Q=d.notes)!=null&&Q["Mental State"]?(l(),_("li",na,t((X=d.notes)==null?void 0:X["Mental State"]),1)):f("",!0)])):(l(),_("div",Je,[a("span",Ke,t(e(n)("Diagnosis"))+": ",1),a("li",null,t((v=d.ddx)==null?void 0:v["Differential Diagnosis"]),1)])),a("div",oa,[a("span",ia,t(e(n)("Management"))+": ",1),(l(!0),_(A,null,E((J=d.management)==null?void 0:J.managements,$=>(l(),_("li",null,t($.Name)+" "+t($.Form)+" "+t($.Dose)+" "+t($.Use),1))),256))]),a("div",la,[a("span",ra,t(e(n)("Doctor"))+": ",1),a("li",null,t((K=d.doctor)==null?void 0:K.fullName)+" "+t(((Z=d.clinic)==null?void 0:Z.name)==="autism"?e(n)("in NCA"):""),1)]),d.active||((tt=e(g))==null?void 0:tt.id)===((et=d.doctor)==null?void 0:et.id)?(l(),b(T,{key:3,variant:"tonal",class:"d-inline-flex align-center mt-4 me-2",onClick:$=>e(k).push({name:"patients-visits-edit-id",params:{id:s.patientData.id},query:{visit:d.id}})},{default:o(()=>{var $;return[r(t((($=e(g))==null?void 0:$.role)==="DOCTOR"?e(n)("Edit Visit"):e(n)("Therapy Notes")),1)]}),_:2},1032,["onClick"])):f("",!0),((at=e(g))==null?void 0:at.role)!=="PSYCHOLOGIST"?(l(),b(T,{key:4,variant:"tonal",class:"d-inline-flex align-center mt-4 me-2",onClick:$=>e(k).push({name:"patients-visits-open-id",params:{id:s.patientData.id},query:{visit:d.id,dob:s.patientData.dob,name:s.patientData.name}})},{default:o(()=>[r(t(e(n)("Summary")),1)]),_:2},1032,["onClick"])):f("",!0)]}),_:2},1024))),256))]}),_:1})]}),_:1})]),_:1},8,["title"]))}}),ca=H({__name:"CustomerTabVisits",props:{patientData:{}},setup(w){return(n,g)=>(l(),b(j,null,{default:o(()=>[i(O,null,{default:o(()=>[i(da,{patientData:n.patientData},null,8,["patientData"])]),_:1})]),_:1}))}}),pa={class:"d-flex justify-space-between"},ua={class:"d-flex justify-space-between align-center flex-wrap gap-y-4 mb-6"},ma={class:"text-h4 mb-1"},_a={class:"text-body-1"},ha={key:0,class:"d-flex gap-4"},fa={key:1},As=H({__name:"[id]",async setup(w){let n,g;const k=rt(),s=lt(),{t:p}=M(),V=k.params,h=it("userData").value,D=P(),m=P(null),y=[{title:p("Visits"),icon:"tabler-file"}],{data:d}=([n,g]=Ct(()=>Et(`/patient/${h==null?void 0:h.id}/${V.id}`)),n=await n,g(),n),c=async()=>{if(h)try{const C=await Bt(`/patient-delete/${h==null?void 0:h.id}/${V.id}`,{method:"DELETE",onResponseError({response:x}){console.log(x)}});s.push("/patients")}catch(C){console.error(C)}};return D.value=d.value,(C,x)=>{var S,I,N;return l(),_(A,null,[a("div",pa,[i(T,{variant:"flat",color:"warning",class:"mb-5",onClick:x[0]||(x[0]=v=>e(s).push("/patients"))},{default:o(()=>[r(t(e(p)("Back")),1)]),_:1})]),a("div",null,[a("div",ua,[a("div",null,[a("h4",ma,t(e(p)("Patient ID"))+" #"+t(e(V).id),1),a("div",_a,t(e(p)("Added At"))+": "+t((S=e(D))!=null&&S.createdAt?new Date((I=e(D))==null?void 0:I.createdAt).toLocaleString():e(p)("Cannot Display Date")),1)]),((N=e(h))==null?void 0:N.role)==="ADMIN"?(l(),_("div",ha,[i(T,{onClick:c,variant:"tonal",color:"error"},{default:o(()=>[r(t(e(p)("Delete Patient")),1)]),_:1})])):f("",!0)]),e(D)?(l(),b(j,{key:0},{default:o(()=>[e(D)?(l(),b(O,{key:0,cols:"12",md:"5",lg:"4"},{default:o(()=>[i(ze,{"patient-data":e(D)},null,8,["patient-data"])]),_:1})):f("",!0),i(O,{cols:"12",md:"7",lg:"8"},{default:o(()=>[i(Ft,{modelValue:e(m),"onUpdate:modelValue":x[1]||(x[1]=v=>R(m)?m.value=v:null),class:"v-tabs-pill mb-3 disable-tab-transition"},{default:o(()=>[(l(),_(A,null,E(y,v=>i(Ot,{key:v.title},{default:o(()=>[i(At,{size:"20",start:"",icon:v.icon},null,8,["icon"]),r(" "+t(v.title),1)]),_:2},1024)),64))]),_:1},8,["modelValue"]),i(Rt,{modelValue:e(m),"onUpdate:modelValue":x[2]||(x[2]=v=>R(m)?m.value=v:null),class:"disable-tab-transition",touch:!1},{default:o(()=>[i(Ht,null,{default:o(()=>[i(ca,{patientData:e(D)},null,8,["patientData"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):(l(),_("div",fa,[i(Lt,{type:"error",variant:"tonal"},{default:o(()=>[r(t(`${e(p)("patient with ID")} ${e(V).id} ${e(p)("not found!")}`),1)]),_:1})]))])],64)}}});export{As as default};
