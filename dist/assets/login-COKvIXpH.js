import{d as E,aV as H,r as m,k as O,o as c,c as _,e as i,b as t,n as e,M as N,f as o,I as T,x as d,g,b2 as S,aj as k,z as K,ba as R,y as q,b8 as w,b0 as G}from"./index-CUq24_Fe.js";import{_ as J}from"./AppAutocomplete.vue_vue_type_script_setup_true_lang-D5Xa-i8z.js";import{_ as Q}from"./AppTextField.vue_vue_type_script_setup_true_lang-Cad4y1Xm.js";import{a as W,b as X}from"./auth-v1-top-shape-gPxasD3d.js";import{V as x}from"./VNodeRenderer-CVHm-MjJ.js";import{u as Y}from"./useAbility-CG3ja-aw.js";import{$ as U}from"./api-D4r4OcVS.js";import{a as Z,b as ee,V as te}from"./VCard-haZoNGks.js";import{V as C}from"./VCardText-DvT4gKIo.js";import{V as F}from"./VForm-CpDXNOsR.js";import{V as M,a as f}from"./VRow-c4vFAJ7q.js";import"./form-9u_3hlfJ.js";import"./VSelect-CesTJAVx.js";import"./VTextField-Ccn8tHsN.js";/* empty css                   */import"./VCounter-qduikmhS.js";import"./index-Di9BiCad.js";import"./index-CYM1QvHM.js";import"./VField-DJPodexg.js";import"./easing-CjukEv2V.js";import"./VInput-B6KGWHid.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-BGxwOgHd.js";import"./ssrBoot-D6qqRZdf.js";import"./createSimpleFunctional-pdbxtRIz.js";import"./VAvatar-CP-t1hAh.js";import"./VImg-dAreq1ZE.js";import"./VDivider-DYLyIdVc.js";import"./dialog-transition-Bcgz64UU.js";import"./VMenu-BjdcrVys.js";import"./VOverlay-BHLbEMSo.js";import"./lazy-DMUNf1IF.js";import"./scopeId-DWELbCgr.js";import"./VCheckboxBtn-DhbT4HAD.js";import"./VSelectionControl-DdtYOovP.js";import"./VChip-BB1INoVT.js";import"./VSlideGroup-BddQbfzx.js";import"./filter-DEBEH1dI.js";import"./index-B3bPRkoL.js";/* empty css              */const ae={class:"auth-wrapper d-flex align-center justify-center pa-4"},oe={class:"position-relative my-sm-16"},se={class:"app-logo"},le={class:"app-logo-title"},ne={class:"text-h4 mb-1"},re={class:"text-capitalize"},ie={class:"mb-0"},de={class:"align-self-center text-error"},ue={class:"text-warning",href:"https://wa.me/+9647812135916"},me=i("h1",{class:"my-6"},null,-1),pe={class:"text-white",href:"https://wa.me/+9647812135916"},ce={key:0},fe={key:1},be={class:"d-inline-block"},_e={class:"align-self-center text-warning"},ye=i("h1",{class:"my-6"},null,-1),he={key:0},ve={key:1},Ve={class:"d-inline-block"},it=E({__name:"login",setup(ge){const{t:n}=H(),p=m(!1),u=m(!1),P=O(),$=Y(),y=m({message:void 0}),h=m(),s=m({username:"",password:"",fullName:"",clinic:""}),A=m(!1);m(!1);const v=m(!0),B=m(""),D=["Kadhimiya Center","Autism Center"],I=async()=>{u.value=!0;try{const r=await U("/login",{method:"POST",body:{username:s.value.username,password:s.value.password},onResponseError({response:l}){y.value.message=l._data,l._data==="Contact Dr.Mustafa Alnoori to grant you access"&&(A.value=!0)}}),{accessToken:a,userData:b,userAbilityRules:V}=r;w("userAbilityRules").value=V,$.update(V),w("userData").value=b,w("accessToken").value=a,await G(()=>{P.push("/patients")}),u.value=!1}catch(r){console.error(r),u.value=!1}},L=async()=>{u.value=!0;try{await U("/register",{method:"POST",body:{username:s.value.username,password:s.value.password,fullName:s.value.fullName,clinic:s.value.clinic},onResponseError({response:a}){y.value.message=a._data}})==="User registered successfully"&&(v.value=!0),u.value=!1,B.value="contact Dr. Mustafa Alnoori"}catch(r){console.error(r),u.value=!1}},j=()=>{var r;(r=h.value)==null||r.validate().then(({valid:a})=>{a&&I()})},z=()=>{var r;(r=h.value)==null||r.validate().then(({valid:a})=>{a&&L()})};return(r,a)=>{const b=Q,V=J;return c(),_("div",ae,[i("div",oe,[t(e(x),{nodes:("h"in r?r.h:e(N))("div",{innerHTML:e(W)}),class:"text-primary auth-v1-top-shape d-none d-sm-block"},null,8,["nodes"]),t(e(x),{nodes:("h"in r?r.h:e(N))("div",{innerHTML:e(X)}),class:"text-primary auth-v1-bottom-shape d-none d-sm-block"},null,8,["nodes"]),t(te,{class:q(["auth-card","pa-6"]),"max-width":"460"},{default:o(()=>[t(Z,{class:"justify-center"},{default:o(()=>[t(ee,null,{default:o(()=>[i("div",se,[t(e(x),{nodes:e(T).app.logo},null,8,["nodes"]),i("h1",le,d(e(n)(e(T).app.title)),1)])]),_:1})]),_:1}),t(C,null,{default:o(()=>[i("h4",ne,[i("span",re,d(e(n)("Clinic Application")),1)]),i("p",ie,d(e(n)("Please sign-in to your account")),1)]),_:1}),e(v)?(c(),g(C,{key:0},{default:o(()=>[t(e(F),{ref_key:"refVForm",ref:h,onSubmit:S(j,["prevent"])},{default:o(()=>[i("p",de,d(e(y).message),1),t(M,null,{default:o(()=>[t(f,{cols:"12"},{default:o(()=>[t(b,{modelValue:e(s).username,"onUpdate:modelValue":a[0]||(a[0]=l=>e(s).username=l),autofocus:"",label:e(n)("Username"),type:"text",placeholder:""},null,8,["modelValue","label"])]),_:1}),t(f,{cols:"12"},{default:o(()=>[t(b,{class:"mb-5",modelValue:e(s).password,"onUpdate:modelValue":a[1]||(a[1]=l=>e(s).password=l),label:e(n)("Password"),placeholder:"",type:e(p)?"text":"password","append-inner-icon":e(p)?"tabler-eye-off":"tabler-eye","onClick:appendInner":a[2]||(a[2]=l=>p.value=!e(p))},null,8,["modelValue","label","type","append-inner-icon"]),i("a",ue,d(e(n)("Forgot Password?")),1),me,e(A)?(c(),g(k,{key:0,block:"",class:"mb-4",color:"error"},{default:o(()=>[i("a",pe,d(e(n)("Contact Dr.Mustafa Alnoori")),1)]),_:1})):K("",!0),t(k,{block:"",type:"submit",disabled:e(u)},{default:o(()=>[e(u)?(c(),_("span",ce,[t(R,{indeterminate:"",color:"info"})])):(c(),_("span",fe,d(e(n)("Login")),1))]),_:1},8,["disabled"])]),_:1}),t(f,{cols:"12",class:"text-body-1 text-center"},{default:o(()=>[i("span",be,d(e(n)("New on our platform?")),1),i("a",{class:"btn text-primary ms-1 d-inline-block text-body-1",onClick:a[3]||(a[3]=l=>v.value=!1),href:"#"},d(e(n)("Create an account")),1)]),_:1})]),_:1})]),_:1},512)]),_:1})):(c(),g(C,{key:1},{default:o(()=>[t(e(F),{ref_key:"refVForm",ref:h,onSubmit:S(z,["prevent"])},{default:o(()=>[i("p",_e,d(e(y).message),1),t(M,null,{default:o(()=>[t(f,{cols:"12"},{default:o(()=>[t(b,{modelValue:e(s).username,"onUpdate:modelValue":a[4]||(a[4]=l=>e(s).username=l),autofocus:"",label:e(n)("Username"),type:"text",placeholder:""},null,8,["modelValue","label"])]),_:1}),t(f,{cols:"12"},{default:o(()=>[t(b,{modelValue:e(s).fullName,"onUpdate:modelValue":a[5]||(a[5]=l=>e(s).fullName=l),autofocus:"",label:e(n)("Full Name"),type:"text",placeholder:""},null,8,["modelValue","label"])]),_:1}),t(f,{cols:"12"},{default:o(()=>[t(V,{modelValue:e(s).clinic,"onUpdate:modelValue":a[6]||(a[6]=l=>e(s).clinic=l),label:e(n)("Clinic"),items:D,placeholder:"Select Clinic"},null,8,["modelValue","label"])]),_:1}),t(f,{cols:"12"},{default:o(()=>[t(b,{modelValue:e(s).password,"onUpdate:modelValue":a[7]||(a[7]=l=>e(s).password=l),label:e(n)("Password"),placeholder:"",type:e(p)?"text":"password","append-inner-icon":e(p)?"tabler-eye-off":"tabler-eye","onClick:appendInner":a[8]||(a[8]=l=>p.value=!e(p))},null,8,["modelValue","label","type","append-inner-icon"]),ye,t(k,{block:"",type:"submit",disabled:e(u)},{default:o(()=>[e(u)?(c(),_("span",he,[t(R,{indeterminate:"",color:"info"})])):(c(),_("span",ve,d(e(n)("Register")),1))]),_:1},8,["disabled"])]),_:1}),t(f,{cols:"12",class:"text-body-1 text-center"},{default:o(()=>[i("span",Ve,d(e(n)("Already registered in our platform?")),1),i("a",{class:"text-primary ms-1 d-inline-block text-body-1",onClick:a[9]||(a[9]=l=>v.value=!0),href:"#"},d(e(n)("Login")),1)]),_:1})]),_:1})]),_:1},512)]),_:1}))]),_:1})])])}}});export{it as default};
