import{_ as se}from"./AppTextField.vue_vue_type_script_setup_true_lang-CZ5Ws0u7.js";import{_ as he}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-B2Ll9o-7.js";import{V as be}from"./VForm-BLXs3_qa.js";import{d as W,r as f,a4 as K,w as q,a as l,o as g,g as T,f as t,b as e,e as a,x as C,n as c,ad as w,c as P,F as j,i as Z,v as $,ar as L,as as z,am as F,ak as N,al as Q,aE as J,aD as te,bD as xe,bE as we,bF as ye,z as Y,aq as Ce}from"./index-DrFL9zv-.js";import{a as Ue}from"./formatters-DocrwTSm.js";import{_ as $e}from"./TablePagination.vue_vue_type_script_setup_true_lang-ClsTNhYF.js";import{_ as De}from"./AppSelect.vue_vue_type_script_setup_true_lang-DhpyrUw1.js";import{_ as ke}from"./AddNewUserDrawer.vue_vue_type_script_setup_true_lang-DTH4Nv_e.js";import{u as Re}from"./useApi-CF-Kf49g.js";import{c as Ae}from"./createUrl-BtuJzAQ-.js";import{$ as ae}from"./api-Bb9MUQYX.js";import"./form-BqkpADyx.js";import"./helpers-BGv4x_9E.js";import"./validators-DR7cptrM.js";import"./AppDrawerHeaderSection.vue_vue_type_script_setup_true_lang-CPJ1gP5P.js";import"./vue3-perfect-scrollbar.esm-CxbQKJsC.js";import"./index-B3bPRkoL.js";const Pe={class:"text-h4 text-center mb-2"},Me=a("p",{class:"text-body-1 text-center mb-6"}," Set Role Permissions ",-1),Be=a("h5",{class:"text-h5 my-6"}," Role Permissions ",-1),Se=a("td",null,[a("h6",{class:"text-h6"}," Administrator Access ")],-1),Te={colspan:"3"},Ee={class:"d-flex justify-end"},Ie={class:"text-h6"},Le={class:"d-flex justify-end"},ze={class:"d-flex justify-end"},Fe={class:"d-flex justify-end"},Ne={class:"d-flex align-center justify-center gap-4"},je=W({__name:"AddEditRoleDialog",props:{rolePermissions:{default:()=>({name:"",permissions:[]})},isDialogVisible:{type:Boolean}},emits:["update:isDialogVisible","update:rolePermissions"],setup(O,{emit:D}){const v=O,p=D,r=f([{name:"User Management",read:!1,write:!1,create:!1},{name:"Content Management",read:!1,write:!1,create:!1},{name:"Disputes Management",read:!1,write:!1,create:!1},{name:"Database Management",read:!1,write:!1,create:!1},{name:"Financial Management",read:!1,write:!1,create:!1},{name:"Reporting",read:!1,write:!1,create:!1},{name:"API Control",read:!1,write:!1,create:!1},{name:"Repository Management",read:!1,write:!1,create:!1},{name:"Payroll",read:!1,write:!1,create:!1}]),b=f(!1),y=f(""),u=f(),h=K(()=>{let d=0;return r.value.forEach(i=>{Object.entries(i).forEach(([V,k])=>{V!=="name"&&k&&d++})}),d}),x=K(()=>h.value>0&&h.value<r.value.length*3);q(b,d=>{r.value=r.value.map(i=>({...i,read:d,write:d,create:d}))}),q(x,()=>{x.value||(b.value=!1)}),q(r,()=>{h.value===r.value.length*3&&(b.value=!0)},{deep:!0}),q(v,()=>{v.rolePermissions&&v.rolePermissions.permissions.length&&(y.value=v.rolePermissions.name,r.value=r.value.map(d=>{var V;const i=(V=v.rolePermissions)==null?void 0:V.permissions.find(k=>k.name===d.name);return i?{...d,...i}:d}))});const R=()=>{var i;const d={name:y.value,permissions:r.value};p("update:rolePermissions",d),p("update:isDialogVisible",!1),b.value=!1,(i=u.value)==null||i.reset()},M=()=>{var d;p("update:isDialogVisible",!1),b.value=!1,(d=u.value)==null||d.reset()};return(d,i)=>{const V=he,k=se,U=l("VCheckbox"),E=l("VTable"),o=l("VBtn"),A=l("VCardText"),B=l("VCard"),X=l("VDialog");return g(),T(X,{width:d.$vuetify.display.smAndDown?"auto":900,"model-value":v.isDialogVisible,"onUpdate:modelValue":M},{default:t(()=>[e(V,{onClick:M}),e(B,{class:"pa-sm-10 pa-2"},{default:t(()=>[e(A,null,{default:t(()=>[a("h4",Pe,C(v.rolePermissions.name?"Edit":"Add New")+" Role ",1),Me,e(c(be),{ref_key:"refPermissionForm",ref:u},{default:t(()=>[e(k,{modelValue:c(y),"onUpdate:modelValue":i[0]||(i[0]=_=>w(y)?y.value=_:null),label:"Role Name",placeholder:"Enter Role Name"},null,8,["modelValue"]),Be,e(E,{class:"permission-table text-no-wrap mb-6"},{default:t(()=>[a("tr",null,[Se,a("td",Te,[a("div",Ee,[e(U,{modelValue:c(b),"onUpdate:modelValue":i[1]||(i[1]=_=>w(b)?b.value=_:null),indeterminate:c(x),"onUpdate:indeterminate":i[2]||(i[2]=_=>w(x)?x.value=_:null),label:"Select All"},null,8,["modelValue","indeterminate"])])])]),(g(!0),P(j,null,Z(c(r),_=>(g(),P("tr",{key:_.name},[a("td",null,[a("h6",Ie,C(_.name),1)]),a("td",null,[a("div",Le,[e(U,{modelValue:_.read,"onUpdate:modelValue":m=>_.read=m,label:"Read"},null,8,["modelValue","onUpdate:modelValue"])])]),a("td",null,[a("div",ze,[e(U,{modelValue:_.write,"onUpdate:modelValue":m=>_.write=m,label:"Write"},null,8,["modelValue","onUpdate:modelValue"])])]),a("td",null,[a("div",Fe,[e(U,{modelValue:_.create,"onUpdate:modelValue":m=>_.create=m,label:"Create"},null,8,["modelValue","onUpdate:modelValue"])])])]))),128))]),_:1}),a("div",Ne,[e(o,{onClick:R},{default:t(()=>[$(" Submit ")]),_:1}),e(o,{color:"secondary",variant:"tonal",onClick:M},{default:t(()=>[$(" Cancel ")]),_:1})])]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}}),Oe=""+new URL("girl-using-mobile-CKXBkoEQ.png",import.meta.url).href,qe={class:"text-body-1"},Qe={class:"v-avatar-group"},Ke={class:"d-flex justify-space-between align-center"},We={class:"text-h5"},Xe={class:"d-flex align-center"},Ge=["onClick"],He=["src"],Je=a("div",{class:"text-end"},[$(" Add new role,"),a("br"),$(" if it doesn't exist. ")],-1),Ye=W({__name:"RoleCards",setup(O){const D=f([{role:"Administrator",users:[L,z,F,N],details:{name:"Administrator",permissions:[{name:"User Management",read:!0,write:!0,create:!0},{name:"Disputes Management",read:!0,write:!0,create:!0},{name:"API Control",read:!0,write:!0,create:!0}]}},{role:"Manager",users:[L,z,F,N,Q,J,te],details:{name:"Manager",permissions:[{name:"Reporting",read:!0,write:!0,create:!1},{name:"Payroll",read:!0,write:!0,create:!0},{name:"User Management",read:!0,write:!0,create:!0}]}},{role:"Users",users:[L,z,F,N,Q],details:{name:"Users",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}},{role:"Support",users:[L,z,F,N,Q,J],details:{name:"Support",permissions:[{name:"Repository Management",read:!0,write:!0,create:!1},{name:"Content Management",read:!0,write:!0,create:!1},{name:"Database Management",read:!0,write:!0,create:!1}]}},{role:"Restricted User",users:[L,z,F,N,Q,J,te,xe,we,ye],details:{name:"Restricted User",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}}]),v=f(!1),p=f(),r=f(!1),b=y=>{v.value=!0,p.value=y};return(y,u)=>{const h=l("VSpacer"),x=l("VAvatar"),R=l("VCardText"),M=l("VIcon"),d=l("IconBtn"),i=l("VCard"),V=l("VCol"),k=l("VBtn"),U=l("VRow"),E=je;return g(),P(j,null,[e(U,null,{default:t(()=>[(g(!0),P(j,null,Z(c(D),o=>(g(),T(V,{key:o.role,cols:"12",sm:"6",lg:"4"},{default:t(()=>[e(i,null,{default:t(()=>[e(R,{class:"d-flex align-center pb-4"},{default:t(()=>[a("div",qe," Total "+C(o.users.length)+" users ",1),e(h),a("div",Qe,[(g(!0),P(j,null,Z(o.users,(A,B)=>(g(),P(j,{key:A},[o.users.length>4&&o.users.length!==4&&B<3?(g(),T(x,{key:0,size:"40",image:A},null,8,["image"])):Y("",!0),o.users.length===4?(g(),T(x,{key:1,size:"40",image:A},null,8,["image"])):Y("",!0)],64))),128)),o.users.length>4?(g(),T(x,{key:0,color:y.$vuetify.theme.current.dark?"#373B50":"#EEEDF0"},{default:t(()=>[a("span",null," +"+C(o.users.length-3),1)]),_:2},1032,["color"])):Y("",!0)])]),_:2},1024),e(R,null,{default:t(()=>[a("div",Ke,[a("div",null,[a("h5",We,C(o.role),1),a("div",Xe,[a("a",{href:"javascript:void(0)",onClick:A=>b(o.details)}," Edit Role ",8,Ge)])]),e(d,null,{default:t(()=>[e(M,{icon:"tabler-copy",class:"text-high-emphasis"})]),_:1})])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(V,{cols:"12",sm:"6",lg:"4"},{default:t(()=>[e(i,{class:"h-100",ripple:!1},{default:t(()=>[e(U,{"no-gutters":"",class:"h-100"},{default:t(()=>[e(V,{cols:"5",class:"d-flex flex-column justify-end align-center mt-5"},{default:t(()=>[a("img",{width:"85",src:c(Oe)},null,8,He)]),_:1}),e(V,{cols:"7"},{default:t(()=>[e(R,{class:"d-flex flex-column align-end justify-end gap-4"},{default:t(()=>[e(k,{size:"small",onClick:u[0]||(u[0]=o=>r.value=!0)},{default:t(()=>[$(" Add New Role ")]),_:1}),Je]),_:1})]),_:1})]),_:1})]),_:1}),e(E,{"is-dialog-visible":c(r),"onUpdate:isDialogVisible":u[1]||(u[1]=o=>w(r)?r.value=o:null)},null,8,["is-dialog-visible"])]),_:1})]),_:1}),e(E,{"is-dialog-visible":c(v),"onUpdate:isDialogVisible":u[2]||(u[2]=o=>w(v)?v.value=o:null),"role-permissions":c(p),"onUpdate:rolePermissions":u[3]||(u[3]=o=>w(p)?p.value=o:null)},null,8,["is-dialog-visible","role-permissions"])],64)}}}),Ze={class:"d-flex gap-2 align-center"},et=a("p",{class:"text-body-1 mb-0"}," Show ",-1),tt={class:"d-flex align-center flex-wrap gap-4"},at={class:"d-flex align-center gap-x-4"},st={key:1},lt={class:"d-flex flex-column"},nt={class:"text-base"},ot={class:"text-sm"},rt={class:"d-flex align-center gap-x-2"},it={class:"text-capitalize text-high-emphasis text-body-1"},ct={class:"text-body-1 text-high-emphasis text-capitalize"},dt=W({__name:"UserList",async setup(O){let D,v;const p=f(""),r=f(),b=f(),y=f(),u=f(10),h=f(1),x=f(),R=f(),M=m=>{var n,I;x.value=(n=m.sortBy[0])==null?void 0:n.key,R.value=(I=m.sortBy[0])==null?void 0:I.order},d=[{title:"User",key:"user"},{title:"Role",key:"role"},{title:"Plan",key:"plan"},{title:"Billing",key:"billing"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],{data:i,execute:V}=([D,v]=Ce(()=>Re(Ae("/apps/users",{query:{q:p,status:y,plan:b,role:r,itemsPerPage:u,page:h,sortBy:x,orderBy:R}}))),D=await D,v(),D),k=K(()=>i.value.users),U=K(()=>i.value.totalUsers),E=[{title:"Admin",value:"admin"},{title:"Author",value:"author"},{title:"Editor",value:"editor"},{title:"Maintainer",value:"maintainer"},{title:"Subscriber",value:"subscriber"}],o=m=>{const n=m.toLowerCase();return n==="subscriber"?{color:"primary",icon:"tabler-user"}:n==="author"?{color:"warning",icon:"tabler-settings"}:n==="maintainer"?{color:"success",icon:"tabler-chart-donut"}:n==="editor"?{color:"info",icon:"tabler-pencil"}:n==="admin"?{color:"error",icon:"tabler-device-laptop"}:{color:"primary",icon:"tabler-user"}},A=m=>{const n=m.toLowerCase();return n==="pending"?"warning":n==="active"?"success":n==="inactive"?"secondary":"primary"},B=f(!1),X=async m=>{await ae("/apps/users",{method:"POST",body:m}),V()},_=async m=>{await ae(`/apps/users/${m}`,{method:"DELETE"}),V()};return(m,n)=>{const I=De,le=l("VSpacer"),ne=se,oe=l("VCardText"),re=l("VDivider"),ie=l("VImg"),ce=l("VAvatar"),de=l("RouterLink"),S=l("VIcon"),ue=l("VChip"),ee=l("IconBtn"),G=l("VListItemTitle"),H=l("VListItem"),me=l("VList"),pe=l("VMenu"),_e=l("VBtn"),fe=$e,ve=l("VDataTableServer"),ge=l("VCard");return g(),P("section",null,[e(ge,null,{default:t(()=>[e(oe,{class:"d-flex flex-wrap gap-4"},{default:t(()=>[a("div",Ze,[et,e(I,{"model-value":c(u),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":n[0]||(n[0]=s=>u.value=parseInt(s,10))},null,8,["model-value"])]),e(le),a("div",tt,[e(ne,{modelValue:c(p),"onUpdate:modelValue":n[1]||(n[1]=s=>w(p)?p.value=s:null),placeholder:"Search User",style:{"inline-size":"15.625rem"}},null,8,["modelValue"]),e(I,{modelValue:c(r),"onUpdate:modelValue":n[2]||(n[2]=s=>w(r)?r.value=s:null),placeholder:"Select Role",items:E,clearable:"","clear-icon":"tabler-x",style:{"inline-size":"10rem"}},null,8,["modelValue"])])]),_:1}),e(re),e(ve,{"items-per-page":c(u),"onUpdate:itemsPerPage":n[4]||(n[4]=s=>w(u)?u.value=s:null),page:c(h),"onUpdate:page":n[5]||(n[5]=s=>w(h)?h.value=s:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:c(k),"items-length":c(U),headers:d,class:"text-no-wrap","show-select":"","onUpdate:options":M},{"item.user":t(({item:s})=>[a("div",at,[e(ce,{size:"34",variant:s.avatar?void 0:"tonal",color:s.avatar?void 0:o(s.role).color},{default:t(()=>[s.avatar?(g(),T(ie,{key:0,src:s.avatar},null,8,["src"])):(g(),P("span",st,C(("avatarText"in m?m.avatarText:c(Ue))(s.fullName)),1))]),_:2},1032,["variant","color"]),a("div",lt,[a("h6",nt,[e(de,{to:{name:"apps-user-view-id",params:{id:s.id}},class:"font-weight-medium text-link"},{default:t(()=>[$(C(s.fullName),1)]),_:2},1032,["to"])]),a("div",ot,C(s.email),1)])])]),"item.role":t(({item:s})=>[a("div",rt,[e(S,{size:22,icon:o(s.role).icon,color:o(s.role).color},null,8,["icon","color"]),a("div",it,C(s.role),1)])]),"item.plan":t(({item:s})=>[a("div",ct,C(s.currentPlan),1)]),"item.status":t(({item:s})=>[e(ue,{color:A(s.status),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[$(C(s.status),1)]),_:2},1032,["color"])]),"item.actions":t(({item:s})=>[e(ee,{onClick:Ve=>_(s.id)},{default:t(()=>[e(S,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(ee,null,{default:t(()=>[e(S,{icon:"tabler-eye"})]),_:1}),e(_e,{icon:"",variant:"text",color:"medium-emphasis"},{default:t(()=>[e(S,{icon:"tabler-dots-vertical"}),e(pe,{activator:"parent"},{default:t(()=>[e(me,null,{default:t(()=>[e(H,{to:{name:"apps-user-view-id",params:{id:s.id}}},{prepend:t(()=>[e(S,{icon:"tabler-eye"})]),default:t(()=>[e(G,null,{default:t(()=>[$("View")]),_:1})]),_:2},1032,["to"]),e(H,{link:""},{prepend:t(()=>[e(S,{icon:"tabler-pencil"})]),default:t(()=>[e(G,null,{default:t(()=>[$("Edit")]),_:1})]),_:1}),e(H,{onClick:Ve=>_(s.id)},{prepend:t(()=>[e(S,{icon:"tabler-trash"})]),default:t(()=>[e(G,null,{default:t(()=>[$("Delete")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:t(()=>[e(fe,{page:c(h),"onUpdate:page":n[3]||(n[3]=s=>w(h)?h.value=s:null),"items-per-page":c(u),"total-items":c(U)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items-per-page-options","items","items-length"])]),_:1}),e(ke,{isDrawerOpen:c(B),"onUpdate:isDrawerOpen":n[6]||(n[6]=s=>w(B)?B.value=s:null),onUserData:X},null,8,["isDrawerOpen"])])}}}),ut=a("h4",{class:"text-h4 mb-1"}," Roles List ",-1),mt=a("p",{class:"text-body-1 mb-0"}," A role provided access to predefined menus and features so that depending on assigned role an administrator can have access to what he need ",-1),pt=a("h4",{class:"text-h4 mb-1 mt-6"}," Total users with their roles ",-1),_t=a("p",{class:"text-body-1 mb-0"}," Find all of your companyâ€™s administrator accounts and their associate roles. ",-1),Mt=W({__name:"index",setup(O){return(D,v)=>{const p=l("VCol"),r=l("VRow");return g(),T(r,null,{default:t(()=>[e(p,{cols:"12"},{default:t(()=>[ut,mt]),_:1}),e(p,{cols:"12"},{default:t(()=>[e(Ye)]),_:1}),e(p,{cols:"12"},{default:t(()=>[pt,_t]),_:1}),e(p,{cols:"12"},{default:t(()=>[e(dt)]),_:1})]),_:1})}}});export{Mt as default};
