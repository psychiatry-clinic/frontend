import{a as pe,p as me}from"./formatters-DocrwTSm.js";import{_ as _e}from"./TablePagination.vue_vue_type_script_setup_true_lang-12Id8OkK.js";import{_ as ve}from"./AppTextField.vue_vue_type_script_setup_true_lang-Cn5QAR7R.js";import{_ as fe}from"./AppSelect.vue_vue_type_script_setup_true_lang-CUM7xL_a.js";import{_ as Ve}from"./AddNewUserDrawer.vue_vue_type_script_setup_true_lang-DVMZBOdC.js";import{u as xe}from"./useApi-CiYK4OrD.js";import{c as ge}from"./createUrl-CkR9s17f.js";import{$ as q}from"./api-faFk6m2o.js";import{d as be,r as c,aq as he,a4 as M,a as s,o as v,c as S,e as o,b as t,f as l,F as ye,i as we,n,v as d,ad as p,g as j,x as u,y as Ce}from"./index-B-uKkDM3.js";import"./helpers-BGv4x_9E.js";import"./validators-DR7cptrM.js";import"./AppDrawerHeaderSection.vue_vue_type_script_setup_true_lang-mJ8WHKBm.js";import"./vue3-perfect-scrollbar.esm-Dfav_R1s.js";import"./index-B3bPRkoL.js";const ke={class:"d-flex mb-6"},Ue={class:"d-flex justify-space-between"},Te={class:"d-flex flex-column gap-y-1"},Ae={class:"text-body-1 text-high-emphasis"},Le={class:"d-flex gap-x-2 align-center"},Se={class:"text-h4"},Pe={class:"text-sm"},Be={class:"me-3 d-flex gap-3"},De={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},Ie={style:{"inline-size":"15.625rem"}},ze={class:"d-flex align-center gap-x-4"},$e={key:1},Re={class:"d-flex flex-column"},Ee={class:"text-base"},Ne={class:"text-sm"},We={class:"d-flex align-center gap-x-2"},Oe={class:"text-capitalize text-high-emphasis text-body-1"},Fe={class:"text-body-1 text-high-emphasis text-capitalize"},st=be({__name:"index",async setup(qe){let f,P;const V=c(""),x=c(),g=c(),b=c(),m=c(10),_=c(1),B=c(),D=c(),Q=r=>{var a,i;B.value=(a=r.sortBy[0])==null?void 0:a.key,D.value=(i=r.sortBy[0])==null?void 0:i.order},G=[{title:"User",key:"user"},{title:"Role",key:"role"},{title:"Plan",key:"plan"},{title:"Billing",key:"billing"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],{data:I,execute:z}=([f,P]=he(()=>xe(ge("/apps/users",{query:{q:V,status:b,plan:g,role:x,itemsPerPage:m,page:_,sortBy:B,orderBy:D}}))),f=await f,P(),f),H=M(()=>I.value.users),$=M(()=>I.value.totalUsers),J=[{title:"Admin",value:"admin"},{title:"Author",value:"author"},{title:"Editor",value:"editor"},{title:"Maintainer",value:"maintainer"},{title:"Subscriber",value:"subscriber"}],K=[{title:"Basic",value:"basic"},{title:"Company",value:"company"},{title:"Enterprise",value:"enterprise"},{title:"Team",value:"team"}],X=[{title:"Pending",value:"pending"},{title:"Active",value:"active"},{title:"Inactive",value:"inactive"}],C=r=>{const a=r.toLowerCase();return a==="subscriber"?{color:"success",icon:"tabler-user"}:a==="author"?{color:"error",icon:"tabler-device-desktop"}:a==="maintainer"?{color:"info",icon:"tabler-chart-pie"}:a==="editor"?{color:"warning",icon:"tabler-edit"}:a==="admin"?{color:"primary",icon:"tabler-crown"}:{color:"primary",icon:"tabler-user"}},Y=r=>{const a=r.toLowerCase();return a==="pending"?"warning":a==="active"?"success":a==="inactive"?"secondary":"primary"},h=c(!1),Z=async r=>{await q("/apps/users",{method:"POST",body:r}),z()},R=async r=>{await q(`/apps/users/${r}`,{method:"DELETE"}),z()},ee=c([{title:"Session",value:"21,459",change:29,desc:"Total Users",icon:"tabler-users",iconColor:"primary"},{title:"Paid Users",value:"4,567",change:18,desc:"Last Week Analytics",icon:"tabler-user-plus",iconColor:"error"},{title:"Active Users",value:"19,860",change:-14,desc:"Last Week Analytics",icon:"tabler-user-check",iconColor:"success"},{title:"Pending Users",value:"237",change:42,desc:"Last Week Analytics",icon:"tabler-user-search",iconColor:"warning"}]);return(r,a)=>{const i=s("VIcon"),E=s("VAvatar"),k=s("VCardText"),N=s("VCard"),y=s("VCol"),W=s("VRow"),te=s("VCardTitle"),le=s("VCardItem"),w=fe,O=s("VDivider"),ae=s("VSpacer"),se=ve,U=s("VBtn"),oe=s("VImg"),ne=s("RouterLink"),re=s("VChip"),F=s("IconBtn"),T=s("VListItemTitle"),A=s("VListItem"),ie=s("VList"),ce=s("VMenu"),ue=_e,de=s("VDataTableServer");return v(),S("section",null,[o("div",ke,[t(W,null,{default:l(()=>[(v(!0),S(ye,null,we(n(ee),(e,L)=>(v(),j(y,{key:L,cols:"12",md:"3",sm:"6"},{default:l(()=>[t(N,null,{default:l(()=>[t(k,null,{default:l(()=>[o("div",Ue,[o("div",Te,[o("div",Ae,u(e.title),1),o("div",Le,[o("h4",Se,u(e.value),1),o("div",{class:Ce(["text-base",e.change>0?"text-success":"text-error"])}," ("+u(("prefixWithPlus"in r?r.prefixWithPlus:n(me))(e.change))+"%) ",3)]),o("div",Pe,u(e.desc),1)]),t(E,{color:e.iconColor,variant:"tonal",rounded:"",size:"42"},{default:l(()=>[t(i,{icon:e.icon,size:"26"},null,8,["icon"])]),_:2},1032,["color"])])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),t(N,{class:"mb-6"},{default:l(()=>[t(le,{class:"pb-4"},{default:l(()=>[t(te,null,{default:l(()=>[d("Filters")]),_:1})]),_:1}),t(k,null,{default:l(()=>[t(W,null,{default:l(()=>[t(y,{cols:"12",sm:"4"},{default:l(()=>[t(w,{modelValue:n(x),"onUpdate:modelValue":a[0]||(a[0]=e=>p(x)?x.value=e:null),placeholder:"Select Role",items:J,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),t(y,{cols:"12",sm:"4"},{default:l(()=>[t(w,{modelValue:n(g),"onUpdate:modelValue":a[1]||(a[1]=e=>p(g)?g.value=e:null),placeholder:"Select Plan",items:K,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),t(y,{cols:"12",sm:"4"},{default:l(()=>[t(w,{modelValue:n(b),"onUpdate:modelValue":a[2]||(a[2]=e=>p(b)?b.value=e:null),placeholder:"Select Status",items:X,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(O),t(k,{class:"d-flex flex-wrap gap-4"},{default:l(()=>[o("div",Be,[t(w,{"model-value":n(m),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"},"onUpdate:modelValue":a[3]||(a[3]=e=>m.value=parseInt(e,10))},null,8,["model-value"])]),t(ae),o("div",De,[o("div",Ie,[t(se,{modelValue:n(V),"onUpdate:modelValue":a[4]||(a[4]=e=>p(V)?V.value=e:null),placeholder:"Search User"},null,8,["modelValue"])]),t(U,{variant:"tonal",color:"secondary","prepend-icon":"tabler-upload"},{default:l(()=>[d(" Export ")]),_:1}),t(U,{"prepend-icon":"tabler-plus",onClick:a[5]||(a[5]=e=>h.value=!0)},{default:l(()=>[d(" Add New User ")]),_:1})])]),_:1}),t(O),t(de,{"items-per-page":n(m),"onUpdate:itemsPerPage":a[7]||(a[7]=e=>p(m)?m.value=e:null),page:n(_),"onUpdate:page":a[8]||(a[8]=e=>p(_)?_.value=e:null),items:n(H),"items-length":n($),headers:G,class:"text-no-wrap","show-select":"","onUpdate:options":Q},{"item.user":l(({item:e})=>[o("div",ze,[t(E,{size:"34",variant:e.avatar?void 0:"tonal",color:e.avatar?void 0:C(e.role).color},{default:l(()=>[e.avatar?(v(),j(oe,{key:0,src:e.avatar},null,8,["src"])):(v(),S("span",$e,u(("avatarText"in r?r.avatarText:n(pe))(e.fullName)),1))]),_:2},1032,["variant","color"]),o("div",Re,[o("h6",Ee,[t(ne,{to:{name:"apps-user-view-id",params:{id:e.id}},class:"font-weight-medium text-link"},{default:l(()=>[d(u(e.fullName),1)]),_:2},1032,["to"])]),o("div",Ne,u(e.email),1)])])]),"item.role":l(({item:e})=>[o("div",We,[t(i,{size:22,icon:C(e.role).icon,color:C(e.role).color},null,8,["icon","color"]),o("div",Oe,u(e.role),1)])]),"item.plan":l(({item:e})=>[o("div",Fe,u(e.currentPlan),1)]),"item.status":l(({item:e})=>[t(re,{color:Y(e.status),size:"small",label:"",class:"text-capitalize"},{default:l(()=>[d(u(e.status),1)]),_:2},1032,["color"])]),"item.actions":l(({item:e})=>[t(F,{onClick:L=>R(e.id)},{default:l(()=>[t(i,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),t(F,null,{default:l(()=>[t(i,{icon:"tabler-eye"})]),_:1}),t(U,{icon:"",variant:"text",color:"medium-emphasis"},{default:l(()=>[t(i,{icon:"tabler-dots-vertical"}),t(ce,{activator:"parent"},{default:l(()=>[t(ie,null,{default:l(()=>[t(A,{to:{name:"apps-user-view-id",params:{id:e.id}}},{prepend:l(()=>[t(i,{icon:"tabler-eye"})]),default:l(()=>[t(T,null,{default:l(()=>[d("View")]),_:1})]),_:2},1032,["to"]),t(A,{link:""},{prepend:l(()=>[t(i,{icon:"tabler-pencil"})]),default:l(()=>[t(T,null,{default:l(()=>[d("Edit")]),_:1})]),_:1}),t(A,{onClick:L=>R(e.id)},{prepend:l(()=>[t(i,{icon:"tabler-trash"})]),default:l(()=>[t(T,null,{default:l(()=>[d("Delete")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:l(()=>[t(ue,{page:n(_),"onUpdate:page":a[6]||(a[6]=e=>p(_)?_.value=e:null),"items-per-page":n(m),"total-items":n($)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),t(Ve,{isDrawerOpen:n(h),"onUpdate:isDrawerOpen":a[9]||(a[9]=e=>p(h)?h.value=e:null),onUserData:Z},null,8,["isDrawerOpen"])])}}});export{st as default};
