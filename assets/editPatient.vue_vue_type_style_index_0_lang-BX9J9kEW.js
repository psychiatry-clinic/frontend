import{a as Ee}from"./formatters-DocrwTSm.js";import{r as Te,p as Ne}from"./validators-DR7cptrM.js";import{c as ie,b as Ae,a as Fe,d as se}from"./suggestions-DtVrTijw.js";import{d as Ie,r as s,w as Pe,k as Oe,ap as ze,a as _,o as u,g as r,f as o,b as a,n as e,aj as Me,ad as c,c as $,x as E,e as h,z as i,i as L,F as J,v as B}from"./index-DrFL9zv-.js";import{_ as qe}from"./AppTextarea.vue_vue_type_script_setup_true_lang-YWI8lO30.js";import{_ as He}from"./AppAutocomplete.vue_vue_type_script_setup_true_lang-BGs8UniO.js";import{_ as We}from"./AppDateTimePicker.vue_vue_type_style_index_0_lang-4wF_RVN1.js";import{_ as Ye}from"./AppTextField.vue_vue_type_script_setup_true_lang-CZ5Ws0u7.js";import{_ as je}from"./CustomRadios-CJNUlgu8.js";import{_ as Ge}from"./AppDrawerHeaderSection.vue_vue_type_script_setup_true_lang-CPJ1gP5P.js";import{P as Ze}from"./vue3-perfect-scrollbar.esm-CxbQKJsC.js";import{$ as Ke}from"./api-Bb9MUQYX.js";import{c as Qe,a as Le}from"./myFormat-D_0w4-pK.js";import{V as Je}from"./VForm-BLXs3_qa.js";import{B as Xe}from"./BlobServiceClient-CR2xPX03.js";import{d as me}from"./differenceInYears-BdTDs0wt.js";const el=h("h6",{class:"text-h6 text-primary"},"Image",-1),ll={key:1,class:"text-5xl font-weight-medium"},al=h("label",{for:"picture"},"Take a picture using back facing camera:",-1),tl=h("h6",{class:"text-h6 text-primary"},"Basic Information",-1),ol=h("span",{style:{"line-height":"15px",color:`rgba(
                          var(--v-theme-on-surface),
                          var(--v-high-emphasis-opacity)
                        )`},class:"v-label mb-1 text-body-2 text-black"},"Gender*",-1),ul=h("div",{class:"text-body-1 text-primary font-weight-medium text-high-emphasis"}," Demographic Information ",-1),nl={class:"mt-5"},dl={class:"mt-5"},rl=h("div",{class:"text-body-1 text-primary font-weight-medium text-high-emphasis"}," Parents Relationship ",-1),il=h("div",{class:"text-body-1 text-primary font-weight-medium text-high-emphasis"}," Siblings ",-1),sl=h("div",{class:"text-body-1 text-primary font-weight-medium text-high-emphasis"}," Order in Siblings ",-1),ml=h("div",{class:"text-body-1 text-primary font-weight-medium text-high-emphasis"}," Father Information ",-1),cl={class:"mt-5"},pl=h("div",{class:"text-body-1 text-primary font-weight-medium text-high-emphasis"}," Mother Information ",-1),vl={class:"mt-5"},hl=h("div",{class:"text-body-1 text-primary font-weight-medium text-high-emphasis"}," Notes ",-1),fl={class:"d-flex gap-4 justify-start pb-10"},bl="https://dakakean.blob.core.windows.net/psychiatry?sp=racwl&st=2024-05-02T06:46:34Z&se=2024-05-10T14:46:34Z&spr=https&sv=2022-11-02&sr=c&sig=oTStvDHsKPQiKZ4%2Bniqpd7Dt9w514Y52T6kIQlC5490%3D",_l="psychiatry",Fl=Ie({__name:"editPatient",props:{isDrawerOpen:{type:Boolean},patientData:{}},emits:["update:isDrawerOpen"],setup(ce,{emit:pe}){var ae,te,oe,ue,ne,de;const ve=new Xe(bl).getContainerClient(_l),he=async()=>{const m=document.getElementById("picture");try{const t=[];if(m&&m.files){for(const k of m.files){const X=ve.getBlockBlobClient(k.name);t.push(X.uploadBrowserData(k))}await Promise.all(t),w.value=(await t[0])._response.request.url}}catch(t){console.log(t)}},T=ce,n=s(T.patientData);Pe(T,()=>{n.value=T.patientData});const ee=pe;Oe();const fe=m=>{ee("update:isDrawerOpen",m)},be=s({message:void 0}),_e=[{title:"Child",value:"child"},{title:"Adult",value:"adult"}],p=s("child"),le=s(),w=s(),x=s(n.value.name),S=s(n.value.dob),N=s(),R=s(n.value.gender),A=s(n.value.phone),C=s(),F=s();n.value.father_dob&&(C.value=new Date(n.value.father_dob).getFullYear(),F.value=me(n.value.dob,n.value.father_dob));const g=s(n.value.father_edu),I=s(n.value.father_work),D=s(),P=s();n.value.mother_dob&&(D.value=new Date(n.value.mother_dob).getFullYear(),P.value=me(n.value.dob,n.value.mother_age));const y=s(n.value.mother_edu),O=s(n.value.mother_work),z=s(n.value.related),f=s(n.value.siblings||0),M=s(n.value.order),q=s(n.value.notes),Ve=s(n.value.family_hx),H=s((ae=n.value.demographics)==null?void 0:ae[n.value.demographics.length-1].marital_status),W=s((te=n.value.demographics)==null?void 0:te[n.value.demographics.length-1].children),U=s((oe=n.value.demographics)==null?void 0:oe[n.value.demographics.length-1].residence),Y=s((ue=n.value.demographics)==null?void 0:ue[n.value.demographics.length-1].neighborhood),j=s((ne=n.value.demographics)==null?void 0:ne[n.value.demographics.length-1].occupation),V=s((de=n.value.demographics)==null?void 0:de[n.value.demographics.length-1].education),ge=()=>{var m;(m=le.value)==null||m.reset(),ee("update:isDrawerOpen",!1)},G=ze("userData").value,ye=`/patients-edit/${G==null?void 0:G.id}/${n.value.id}`,ke=async()=>{var m;if(G)try{const t=await Ke(ye,{method:"POST",body:{name:x.value,dob:Le(S.value),gender:R.value,phone:A.value,avatar:w.value,father_dob:C.value?C.value:null,father_work:I.value,father_edu:g.value,mother_dob:D.value?D.value:null,mother_work:O.value,mother_edu:y.value,related:z.value,siblings:+f.value,order:M.value,familyHx:Ve.value,notes:q.value,marital_status:H.value,children:W.value,residence:U.value,neighborhood:Y.value,occupation:j.value,education:V.value,demographics_id:(m=n.value.demographics)==null?void 0:m[0].id},onResponseError({response:k}){be.value=k._data,console.log(k._data)}})}catch(t){console.error(t)}};return N.value=Qe(n.value.dob),(m,t)=>{const k=Ge,X=_("VDivider"),we=je,d=_("VCol"),xe=_("VImg"),Ce=_("VAvatar"),b=Ye,De=We,v=_("VRadio"),Z=_("VRadioGroup"),K=He,Q=_("VChip"),Ue=qe,re=_("VBtn"),Be=_("VRow"),Se=_("VCardText"),Re=_("VCard"),$e=_("VNavigationDrawer");return u(),r($e,{"model-value":T.isDrawerOpen,temporary:"",location:"end",width:"370",border:"none","onUpdate:modelValue":fe},{default:o(()=>[a(k,{title:"Edit "+e(n).name,onCancel:t[0]||(t[0]=l=>m.$emit("update:isDrawerOpen",!1))},null,8,["title"]),a(X),a(Re,{flat:""},{default:o(()=>[a(e(Ze),{options:{wheelPropagation:!1},class:"h-100"},{default:o(()=>[a(Se,{style:{"block-size":"calc(100vh - 5rem)"}},{default:o(()=>[a(e(Je),{ref_key:"refVForm",ref:le,onSubmit:t[26]||(t[26]=Me(()=>{},["prevent"]))},{default:o(()=>[a(Be,{class:"mb-2"},{default:o(()=>[a(d,null,{default:o(()=>[a(we,{"selected-radio":e(p),"onUpdate:selectedRadio":t[1]||(t[1]=l=>c(p)?p.value=l:null),"radio-content":_e,"grid-column":{sm:"6",cols:"12"}},null,8,["selected-radio"])]),_:1}),a(d,{cols:"12"},{default:o(()=>[el]),_:1}),a(d,{cols:"12"},{default:o(()=>[a(Ce,{circle:"",size:100,color:e(w)?"undefined":"secondary",variant:e(w)?void 0:"tonal"},{default:o(()=>[e(w)?(u(),r(xe,{key:0,src:e(w),style:{"object-fit":"cover"}},null,8,["src"])):(u(),$("span",ll,E(("avatarText"in m?m.avatarText:e(Ee))(e(x))),1))]),_:1},8,["color","variant"])]),_:1}),a(d,{cols:"12"},{default:o(()=>[al,h("input",{type:"file",id:"picture",name:"picture",accept:"image/*",capture:"environment",onChange:he},null,32)]),_:1}),a(d,{cols:"12"},{default:o(()=>[tl]),_:1}),a(d,{cols:"12"},{default:o(()=>[a(b,{modelValue:e(x),"onUpdate:modelValue":t[2]||(t[2]=l=>c(x)?x.value=l:null),label:"Name*",rules:["requiredValidator"in m?m.requiredValidator:e(Te)],placeholder:""},null,8,["modelValue","rules"])]),_:1}),a(d,{cols:"12"},{default:o(()=>[a(De,{modelValue:e(S),"onUpdate:modelValue":t[3]||(t[3]=l=>c(S)?S.value=l:null),label:"Birth Date*",placeholder:"Select date"},null,8,["modelValue"])]),_:1}),a(d,{cols:"12"},{default:o(()=>[a(b,{disabled:"",modelValue:e(N),"onUpdate:modelValue":t[4]||(t[4]=l=>c(N)?N.value=l:null),label:"Age (Automatic)",placeholder:"",maxlength:"4"},null,8,["modelValue"])]),_:1}),a(d,{cols:"12"},{default:o(()=>[a(Z,{modelValue:e(R),"onUpdate:modelValue":t[5]||(t[5]=l=>c(R)?R.value=l:null),inline:""},{label:o(()=>[ol]),default:o(()=>[a(v,{label:"Male",value:"Male"}),a(v,{label:"Female",value:"Female"})]),_:1},8,["modelValue"])]),_:1}),a(d,{cols:"12"},{default:o(()=>[a(b,{modelValue:e(A),"onUpdate:modelValue":t[6]||(t[6]=l=>c(A)?A.value=l:null),label:"Phone",placeholder:"",rules:["phoneNumberValidator"in m?m.phoneNumberValidator:e(Ne)],maxlength:"11"},null,8,["modelValue","rules"])]),_:1}),a(d,null,{default:o(()=>[ul]),_:1}),e(p)==="adult"?(u(),r(d,{key:0,cols:"12"},{default:o(()=>[a(K,{modelValue:e(H),"onUpdate:modelValue":t[7]||(t[7]=l=>c(H)?H.value=l:null),label:"Marital Status",placeholder:"Select Status",items:e(R)==="Male"?["متزوج","اعزب","ارمل","منفصل"]:["متزوجة","عزباء","ارملة","منفصلة"]},null,8,["modelValue","items"])]),_:1})):i("",!0),e(p)==="adult"?(u(),r(d,{key:1,cols:"12"},{default:o(()=>[a(b,{modelValue:e(W),"onUpdate:modelValue":t[8]||(t[8]=l=>c(W)?W.value=l:null),placeholder:"Write a Number",label:"Children"},null,8,["modelValue"])]),_:1})):i("",!0),a(d,{cols:"12"},{default:o(()=>[a(K,{modelValue:e(U),"onUpdate:modelValue":t[9]||(t[9]=l=>c(U)?U.value=l:null),label:"Residence",placeholder:"Select Residence",items:e(ie)},null,8,["modelValue","items"]),h("div",nl,[(u(!0),$(J,null,L(e(ie),l=>(u(),r(Q,{class:"me-2 mb-2",size:"x-small",onClick:()=>{U.value=l}},{default:o(()=>[B(E(l),1)]),_:2},1032,["onClick"]))),256))])]),_:1}),e(U)==="بغداد"?(u(),r(d,{key:2,cols:"12"},{default:o(()=>[a(K,{modelValue:e(Y),"onUpdate:modelValue":t[10]||(t[10]=l=>c(Y)?Y.value=l:null),label:"Neighborhood",placeholder:"Select",items:e(Ae)},null,8,["modelValue","items"])]),_:1})):i("",!0),e(p)==="adult"?(u(),r(d,{key:3,cols:"12"},{default:o(()=>[a(b,{modelValue:e(j),"onUpdate:modelValue":t[11]||(t[11]=l=>c(j)?j.value=l:null),placeholder:"Write an Occupation",label:"Occupation"},null,8,["modelValue"])]),_:1})):i("",!0),e(p)==="child"?(u(),r(d,{key:4,cols:"12"},{default:o(()=>[a(b,{modelValue:e(V),"onUpdate:modelValue":t[12]||(t[12]=l=>c(V)?V.value=l:null),label:"Education"},null,8,["modelValue"]),h("div",dl,[(u(!0),$(J,null,L("childEducation"in m?m.childEducation:e(Fe),l=>(u(),r(Q,{class:"me-2 mb-2",size:"x-small",onClick:()=>{V.value=e(V)===""||e(V)===void 0?l:`${e(V)}, ${l}`}},{default:o(()=>[B(E(l),1)]),_:2},1032,["onClick"]))),256))])]),_:1})):i("",!0),e(p)==="adult"?(u(),r(d,{key:5,cols:"12"},{default:o(()=>[a(K,{modelValue:e(V),"onUpdate:modelValue":t[13]||(t[13]=l=>c(V)?V.value=l:null),label:"Education",placeholder:"Select Education",items:["أمي","ابتدائية","متوسطة","اعدادية","كلية","دبلوم","بكالوريوس","ماجستير","دكتوراه"]},null,8,["modelValue"])]),_:1})):i("",!0),e(p)==="child"?(u(),r(d,{key:6},{default:o(()=>[rl]),_:1})):i("",!0),e(p)==="child"?(u(),r(d,{key:7,cols:"12"},{default:o(()=>[a(Z,{modelValue:e(z),"onUpdate:modelValue":t[14]||(t[14]=l=>c(z)?z.value=l:null),inline:""},{default:o(()=>[a(v,{label:"Related",value:!0}),a(v,{label:"Not Related",value:!1})]),_:1},8,["modelValue"])]),_:1})):i("",!0),e(p)==="child"?(u(),r(d,{key:8},{default:o(()=>[il]),_:1})):i("",!0),e(p)==="child"?(u(),r(d,{key:9,cols:"12"},{default:o(()=>[a(Z,{modelValue:e(f),"onUpdate:modelValue":t[15]||(t[15]=l=>c(f)?f.value=l:null),inline:""},{default:o(()=>[a(v,{label:"0",value:0}),a(v,{label:"1",value:1}),a(v,{label:"2",value:2}),a(v,{label:"3",value:3}),a(v,{label:"4",value:4}),a(v,{label:"5",value:5}),a(v,{label:"6",value:6}),a(v,{label:"7",value:7}),a(v,{label:"8",value:8})]),_:1},8,["modelValue"])]),_:1})):i("",!0),e(f)>=1?(u(),r(d,{key:10},{default:o(()=>[sl]),_:1})):i("",!0),a(d,{cols:"12"},{default:o(()=>[a(Z,{modelValue:e(M),"onUpdate:modelValue":t[16]||(t[16]=l=>c(M)?M.value=l:null),inline:""},{default:o(()=>[e(f)>=1?(u(),r(v,{key:0,label:"1st",value:1})):i("",!0),e(f)>=1?(u(),r(v,{key:1,label:"2nd",value:2})):i("",!0),e(f)>1?(u(),r(v,{key:2,label:"3rd",value:3})):i("",!0),e(f)>2?(u(),r(v,{key:3,label:"4th",value:4})):i("",!0),e(f)>3?(u(),r(v,{key:4,label:"5th",value:5})):i("",!0),e(f)>4?(u(),r(v,{key:5,label:"6th",value:6})):i("",!0),e(f)>5?(u(),r(v,{key:6,label:"7th",value:7})):i("",!0),e(f)>6?(u(),r(v,{key:7,label:"8th",value:8})):i("",!0),e(f)>7?(u(),r(v,{key:8,label:"9th",value:8})):i("",!0)]),_:1},8,["modelValue"])]),_:1}),e(p)==="child"?(u(),r(d,{key:11},{default:o(()=>[ml]),_:1})):i("",!0),e(p)==="child"?(u(),r(d,{key:12,cols:"12"},{default:o(()=>[a(b,{modelValue:e(C),"onUpdate:modelValue":t[17]||(t[17]=l=>c(C)?C.value=l:null),label:"Date of Birth",placeholder:"",maxlength:"4"},null,8,["modelValue"])]),_:1})):i("",!0),e(p)==="child"?(u(),r(d,{key:13,cols:"12"},{default:o(()=>[a(b,{modelValue:e(F),"onUpdate:modelValue":t[18]||(t[18]=l=>c(F)?F.value=l:null),label:"Age at Birth",placeholder:"",disabled:""},null,8,["modelValue"])]),_:1})):i("",!0),e(p)==="child"?(u(),r(d,{key:14,cols:"12"},{default:o(()=>[a(b,{modelValue:e(g),"onUpdate:modelValue":t[19]||(t[19]=l=>c(g)?g.value=l:null),label:"Education",placeholder:""},null,8,["modelValue"]),h("div",cl,[(u(!0),$(J,null,L("adultEducation"in m?m.adultEducation:e(se),l=>(u(),r(Q,{class:"me-2 mb-2",size:"x-small",onClick:()=>{g.value=e(g)===""||e(g)===void 0?l:`${e(g)}, ${l}`}},{default:o(()=>[B(E(l),1)]),_:2},1032,["onClick"]))),256))])]),_:1})):i("",!0),e(p)==="child"?(u(),r(d,{key:15,cols:"12"},{default:o(()=>[a(b,{modelValue:e(I),"onUpdate:modelValue":t[20]||(t[20]=l=>c(I)?I.value=l:null),label:"Work",placeholder:""},null,8,["modelValue"])]),_:1})):i("",!0),e(p)==="child"?(u(),r(d,{key:16},{default:o(()=>[pl]),_:1})):i("",!0),e(p)==="child"?(u(),r(d,{key:17,cols:"12"},{default:o(()=>[a(b,{modelValue:e(D),"onUpdate:modelValue":t[21]||(t[21]=l=>c(D)?D.value=l:null),label:"Date of Birth",placeholder:"",maxlength:"4"},null,8,["modelValue"])]),_:1})):i("",!0),e(p)==="child"?(u(),r(d,{key:18,cols:"12"},{default:o(()=>[a(b,{modelValue:e(P),"onUpdate:modelValue":t[22]||(t[22]=l=>c(P)?P.value=l:null),label:"Age at Birth",placeholder:"",disabled:""},null,8,["modelValue"])]),_:1})):i("",!0),e(p)==="child"?(u(),r(d,{key:19,cols:"12"},{default:o(()=>[a(b,{modelValue:e(y),"onUpdate:modelValue":t[23]||(t[23]=l=>c(y)?y.value=l:null),label:"Education",placeholder:""},null,8,["modelValue"]),h("div",vl,[(u(!0),$(J,null,L("adultEducation"in m?m.adultEducation:e(se),l=>(u(),r(Q,{class:"me-2 mb-2",size:"x-small",onClick:()=>{y.value=e(y)===""||e(y)===void 0?l:`${e(y)}, ${l}`}},{default:o(()=>[B(E(l),1)]),_:2},1032,["onClick"]))),256))])]),_:1})):i("",!0),e(p)==="child"?(u(),r(d,{key:20,cols:"12"},{default:o(()=>[a(b,{modelValue:e(O),"onUpdate:modelValue":t[24]||(t[24]=l=>c(O)?O.value=l:null),label:"Work",placeholder:""},null,8,["modelValue"])]),_:1})):i("",!0),a(d,null,{default:o(()=>[hl]),_:1}),a(d,{cols:"12"},{default:o(()=>[a(Ue,{modelValue:e(q),"onUpdate:modelValue":t[25]||(t[25]=l=>c(q)?q.value=l:null)},null,8,["modelValue"])]),_:1}),a(d,{cols:"12"},{default:o(()=>[h("div",fl,[a(re,{type:"submit",color:"primary",disabled:!e(x)||!e(S),onClick:ke},{default:o(()=>[B(" Save ")]),_:1},8,["disabled"]),a(re,{color:"error",variant:"tonal",onClick:ge},{default:o(()=>[B(" Discard ")]),_:1})])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}});export{Fl as _};
