import{_ as j}from"./TablePagination.vue_vue_type_script_setup_true_lang-ClsTNhYF.js";import{_ as E}from"./AppSelect.vue_vue_type_script_setup_true_lang-DhpyrUw1.js";import{_ as G}from"./AppTextField.vue_vue_type_script_setup_true_lang-CZ5Ws0u7.js";import{_ as M}from"./ECommerceAddCustomerDrawer.vue_vue_type_style_index_0_lang-TiPWrloC.js";import{d as Q,k as H,r as l,ap as J,aq as K,a4 as b,a as i,o as v,c as L,b as a,f as p,e as V,n as t,ad as m,g as w,v as W,z as X}from"./index-DrFL9zv-.js";import{u as Y}from"./useApi-CF-Kf49g.js";import{c as Z}from"./createUrl-BtuJzAQ-.js";import{r as D,c as ee}from"./myFormat-D_0w4-pK.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./formatters-DocrwTSm.js";import"./helpers-BGv4x_9E.js";import"./validators-DR7cptrM.js";import"./suggestions-DtVrTijw.js";import"./AppTextarea.vue_vue_type_script_setup_true_lang-YWI8lO30.js";import"./AppAutocomplete.vue_vue_type_script_setup_true_lang-BGs8UniO.js";import"./AppDateTimePicker.vue_vue_type_style_index_0_lang-4wF_RVN1.js";import"./transition-BtF5ej16.js";import"./form-BqkpADyx.js";import"./CustomRadios-CJNUlgu8.js";import"./AppDrawerHeaderSection.vue_vue_type_script_setup_true_lang-CPJ1gP5P.js";import"./vue3-perfect-scrollbar.esm-CxbQKJsC.js";import"./api-Bb9MUQYX.js";import"./index-B3bPRkoL.js";import"./BlobServiceClient-CR2xPX03.js";import"./__vite-browser-external-DFygW7-s.js";import"./VForm-BLXs3_qa.js";import"./differenceInYears-BdTDs0wt.js";const oe={class:"d-flex justify-space-between flex-wrap gap-y-4"},ae={class:"d-flex flex-row gap-4 align-center flex-wrap"},ne={class:"d-flex gap-1"},se=Q({__name:"index",async setup(re){let u,x;const T=H(),_=l(""),d=l(!1),n=l(10),r=l(1),y=l(),k=l(),P=[{title:"Patient",key:"name"},{title:"Gender",key:"gender"},{title:"Date of Birth",key:"dob"},{title:"Age",key:"age"},{title:"Visits",key:"visits.length"},{title:"Registration",key:"createdAt"},{title:"ACTIONS",key:"actions"}],N=s=>{var e,g;y.value=(e=s.sortBy[0])==null?void 0:e.key,k.value=(g=s.sortBy[0])==null?void 0:g.order},f=J("userData").value,$=`/patients/${f==null?void 0:f.id}`;let{data:C}=([u,x]=K(()=>Y(Z($,{query:{q:_,itemsPerPage:n,page:r,sortBy:y,orderBy:k}}))),u=await u,x(),u);const A=b(()=>C.value.patients.map(s=>({...s,createdAt:D(s.createdAt),age:ee(s.dob.toString()),dob:D(s.dob)}))),B=b(()=>C.value.total);return(s,e)=>{const g=G,I=E,U=i("VBtn"),O=i("VCardText"),S=i("VDivider"),R=j,q=i("VIcon"),z=i("IconBtn"),F=i("VDataTableServer"),h=i("VCard");return v(),L("div",null,[a(h,null,{default:p(()=>[a(O,null,{default:p(()=>{var o;return[V("div",oe,[a(g,{modelValue:t(_),"onUpdate:modelValue":e[0]||(e[0]=c=>m(_)?_.value=c:null),style:{"max-inline-size":"280px","min-inline-size":"280px"},placeholder:"Search Name"},null,8,["modelValue"]),V("div",ae,[a(I,{modelValue:t(n),"onUpdate:modelValue":e[1]||(e[1]=c=>m(n)?n.value=c:null),items:[5,10,20,50,100]},null,8,["modelValue"]),((o=t(f))==null||o.role,v(),w(U,{key:0,"prepend-icon":"tabler-plus",onClick:e[2]||(e[2]=c=>d.value=!t(d))},{default:p(()=>[W(" Add Patient ")]),_:1}))])])]}),_:1}),a(S),t(A)!==null?(v(),w(F,{key:0,"items-per-page":t(n),"onUpdate:itemsPerPage":e[4]||(e[4]=o=>m(n)?n.value=o:null),page:t(r),"onUpdate:page":e[5]||(e[5]=o=>m(r)?r.value=o:null),items:t(A),"item-value":"name",headers:P,"items-length":t(B),class:"text-no-wrap","onUpdate:options":N},{bottom:p(()=>[a(R,{page:t(r),"onUpdate:page":e[3]||(e[3]=o=>m(r)?r.value=o:null),"items-per-page":t(n),"total-items":t(B)},null,8,["page","items-per-page","total-items"])]),"item.actions":p(({item:o})=>[V("div",ne,[a(z,{onClick:c=>t(T).push(`/patients/${o.id}`)},{default:p(()=>[a(q,{icon:"tabler-edit"})]),_:2},1032,["onClick"])])]),_:1},8,["items-per-page","page","items","items-length"])):X("",!0)]),_:1}),a(M,{"is-drawer-open":t(d),"onUpdate:isDrawerOpen":e[6]||(e[6]=o=>m(d)?d.value=o:null)},null,8,["is-drawer-open"])])}}}),Oe=te(se,[["__scopeId","data-v-7288f130"]]);export{Oe as default};
