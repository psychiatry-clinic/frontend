import{d as L,r as d,k as N,a as l,o as x,c as k,e as n,b as s,n as e,M as T,f as t,I as V,x as h,aj as U,ad as $,z,y as D,ap as b,ai as E}from"./index-CJpjWKD8.js";import{_ as H}from"./AppTextField.vue_vue_type_script_setup_true_lang-CcB8QWg0.js";import{a as O,b as q}from"./auth-v1-top-shape-gPxasD3d.js";import{V as v}from"./VNodeRenderer-B3ZFlGSo.js";import{u as G}from"./useAbility-i6FYtRx0.js";import{$ as J}from"./api-7mMiq-NG.js";import{V as K}from"./VForm-CQ8V6YhL.js";import"./index-B3bPRkoL.js";import"./form-WeJO4c57.js";const Q={class:"auth-wrapper d-flex align-center justify-center pa-4"},W={class:"position-relative my-sm-16"},X={class:"app-logo"},Y={class:"app-logo-title"},Z={class:"text-h4 mb-1"},ee={class:"text-capitalize"},se=n("p",{class:"mb-0"},"Please sign-in to your account",-1),oe={class:"align-self-center text-warning"},ae={class:"d-flex align-center justify-space-between flex-wrap my-6"},te=n("a",{class:"text-primary",href:"https://wa.me/+9647812135916"}," Forgot Password? ",-1),ne={key:0},le=n("span",null," Login ",-1),he=L({__name:"login",setup(re){const u=d(!1),c=d(!1),R=N(),P=G(),y=d({message:void 0}),C=d(),r=d({username:"",password:""}),_=d(!1),B=async()=>{c.value=!0;try{const a=await J("/login",{method:"POST",body:{username:r.value.username,password:r.value.password},onResponseError({response:p}){y.value.message=p._data,console.log(p._data)}}),{accessToken:o,userData:f,userAbilityRules:m}=a;b("userAbilityRules").value=m,P.update(m),b("userData").value=f,b("accessToken").value=o,await E(()=>{R.push("/patients")}),c.value=!1}catch(a){console.error(a),c.value=!1}},S=()=>{var a;(a=C.value)==null||a.validate().then(({valid:o})=>{o&&B()})};return(a,o)=>{const f=l("VCardTitle"),m=l("VCardItem"),p=l("VCardText"),g=H,w=l("VCol"),A=l("VCheckbox"),F=l("VProgressCircular"),M=l("VBtn"),j=l("VRow"),I=l("VCard");return x(),k("div",Q,[n("div",W,[s(e(v),{nodes:("h"in a?a.h:e(T))("div",{innerHTML:e(O)}),class:"text-primary auth-v1-top-shape d-none d-sm-block"},null,8,["nodes"]),s(e(v),{nodes:("h"in a?a.h:e(T))("div",{innerHTML:e(q)}),class:"text-primary auth-v1-bottom-shape d-none d-sm-block"},null,8,["nodes"]),s(I,{class:D(["auth-card","pa-6"]),"max-width":"460"},{default:t(()=>[s(m,{class:"justify-center"},{default:t(()=>[s(f,null,{default:t(()=>[n("div",X,[s(e(v),{nodes:e(V).app.logo},null,8,["nodes"]),n("h1",Y,h(e(V).app.title),1)])]),_:1})]),_:1}),s(p,null,{default:t(()=>[n("h4",Z,[n("span",ee,h(e(V).app.title)+" Clinic Application",1)]),se]),_:1}),s(p,null,{default:t(()=>[s(e(K),{ref_key:"refVForm",ref:C,onSubmit:U(S,["prevent"])},{default:t(()=>[n("p",oe,h(e(y).message),1),s(j,null,{default:t(()=>[s(w,{cols:"12"},{default:t(()=>[s(g,{modelValue:e(r).username,"onUpdate:modelValue":o[0]||(o[0]=i=>e(r).username=i),autofocus:"",label:"Username",type:"text",placeholder:""},null,8,["modelValue"])]),_:1}),s(w,{cols:"12"},{default:t(()=>[s(g,{modelValue:e(r).password,"onUpdate:modelValue":o[1]||(o[1]=i=>e(r).password=i),label:"Password",placeholder:"",type:e(u)?"text":"password","append-inner-icon":e(u)?"tabler-eye-off":"tabler-eye","onClick:appendInner":o[2]||(o[2]=i=>u.value=!e(u))},null,8,["modelValue","type","append-inner-icon"]),n("div",ae,[s(A,{modelValue:e(_),"onUpdate:modelValue":o[3]||(o[3]=i=>$(_)?_.value=i:null),label:"Remember me"},null,8,["modelValue"]),te]),s(M,{block:"",type:"submit",disabled:e(c)},{default:t(()=>[e(c)?(x(),k("span",ne,[s(F,{indeterminate:"",color:"success"})])):z("",!0),le]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})])])}}});export{he as default};
