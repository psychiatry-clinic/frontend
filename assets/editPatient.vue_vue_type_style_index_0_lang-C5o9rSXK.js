import{a as xe}from"./formatters-DocrwTSm.js";import{r as Ce,p as De}from"./validators-DR7cptrM.js";import{c as re,b as Ue,a as Se,d as ne}from"./suggestions-DtVrTijw.js";import{d as Be,r as s,w as $e,k as Ee,b8 as Te,o as u,g as n,f as o,b as a,n as e,b2 as Re,aX as c,c as $,x as E,e as f,z as i,i as G,F as K,aj as ie,v as U}from"./index-Cx9f_UB6.js";import{_ as Ne}from"./AppTextarea.vue_vue_type_script_setup_true_lang-BvdqcHsT.js";import{_ as Ae}from"./AppAutocomplete.vue_vue_type_script_setup_true_lang-Bh-DJkJ3.js";import{_ as Fe}from"./AppDateTimePicker.vue_vue_type_style_index_0_lang-wXhDyQ0B.js";import{_ as Pe}from"./AppTextField.vue_vue_type_script_setup_true_lang-BoczeY1n.js";import{_ as Ie}from"./CustomRadios-C9JifbwC.js";import{_ as Oe}from"./AppDrawerHeaderSection.vue_vue_type_script_setup_true_lang-GzYz7RIm.js";import{P as ze}from"./vue3-perfect-scrollbar.esm-DzkBKRyI.js";import{$ as Me}from"./api-CNuKIaBH.js";import{c as qe,a as He}from"./myFormat-D_0w4-pK.js";import{V as We}from"./VDivider-QhcZIdz_.js";import{V as Ye}from"./VCardText-CU6bWz5p.js";import{V as je}from"./VForm-DXhKInfB.js";import{V as Ze,a as r}from"./VRow-DaMRPCg6.js";import{V as Ge}from"./VAvatar-D-4MdlQJ.js";import{V as Ke}from"./VImg-Dyv57oRP.js";import{V as Q,a as v}from"./VRadioGroup-h9OwnwGs.js";import{V as Qe}from"./VCard-MbR0quvT.js";import{V as Le}from"./VNavigationDrawer-sv85Cd8W.js";import{V as L}from"./VChip-BZLsEhO5.js";import{B as Xe}from"./BlobServiceClient-CR2xPX03.js";import{d as se}from"./differenceInYears-BdTDs0wt.js";const Je=f("h6",{class:"text-h6 text-primary"},"Image",-1),el={key:1,class:"text-5xl font-weight-medium"},ll=f("label",{for:"picture"},"Take a picture using back facing camera:",-1),al=f("h6",{class:"text-h6 text-primary"},"Basic Information",-1),tl=f("span",{style:{"line-height":"15px",color:`rgba(
                          var(--v-theme-on-surface),
                          var(--v-high-emphasis-opacity)
                        )`},class:"v-label mb-1 text-body-2 text-black"},"Gender*",-1),ol=f("div",{class:"text-body-1 text-primary font-weight-medium text-high-emphasis"}," Demographic Information ",-1),ul={class:"mt-5"},dl={class:"mt-5"},rl=f("div",{class:"text-body-1 text-primary font-weight-medium text-high-emphasis"}," Parents Relationship ",-1),nl=f("div",{class:"text-body-1 text-primary font-weight-medium text-high-emphasis"}," Siblings ",-1),il=f("div",{class:"text-body-1 text-primary font-weight-medium text-high-emphasis"}," Order in Siblings ",-1),sl=f("div",{class:"text-body-1 text-primary font-weight-medium text-high-emphasis"}," Father Information ",-1),ml={class:"mt-5"},cl=f("div",{class:"text-body-1 text-primary font-weight-medium text-high-emphasis"}," Mother Information ",-1),pl={class:"mt-5"},vl=f("div",{class:"text-body-1 text-primary font-weight-medium text-high-emphasis"}," Notes ",-1),fl={class:"d-flex gap-4 justify-start pb-10"},hl="https://dakakean.blob.core.windows.net/psychiatry?sp=racwl&st=2024-05-02T06:46:34Z&se=2024-05-10T14:46:34Z&spr=https&sv=2022-11-02&sr=c&sig=oTStvDHsKPQiKZ4%2Bniqpd7Dt9w514Y52T6kIQlC5490%3D",bl="psychiatry",Wl=Be({__name:"editPatient",props:{isDrawerOpen:{type:Boolean},patientData:{}},emits:["update:isDrawerOpen"],setup(me,{emit:ce}){var le,ae,te,oe,ue,de;const pe=new Xe(hl).getContainerClient(bl),ve=async()=>{const m=document.getElementById("picture");try{const t=[];if(m&&m.files){for(const y of m.files){const X=pe.getBlockBlobClient(y.name);t.push(X.uploadBrowserData(y))}await Promise.all(t),k.value=(await t[0])._response.request.url}}catch(t){console.log(t)}},T=me,d=s(T.patientData);$e(T,()=>{d.value=T.patientData});const J=ce;Ee();const fe=m=>{J("update:isDrawerOpen",m)},he=s({message:void 0}),be=[{title:"Child",value:"child"},{title:"Adult",value:"adult"}],p=s("child"),ee=s(),k=s(),w=s(d.value.name),S=s(d.value.dob),R=s(),B=s(d.value.gender),N=s(d.value.phone),x=s(),A=s();d.value.father_dob&&(x.value=new Date(d.value.father_dob).getFullYear(),A.value=se(d.value.dob,d.value.father_dob));const _=s(d.value.father_edu),F=s(d.value.father_work),C=s(),P=s();d.value.mother_dob&&(C.value=new Date(d.value.mother_dob).getFullYear(),P.value=se(d.value.dob,d.value.mother_age));const g=s(d.value.mother_edu),I=s(d.value.mother_work),O=s(d.value.related),h=s(d.value.siblings||0),z=s(d.value.order),M=s(d.value.notes),Ve=s(d.value.family_hx),q=s((le=d.value.demographics)==null?void 0:le[d.value.demographics.length-1].marital_status),H=s((ae=d.value.demographics)==null?void 0:ae[d.value.demographics.length-1].children),D=s((te=d.value.demographics)==null?void 0:te[d.value.demographics.length-1].residence),W=s((oe=d.value.demographics)==null?void 0:oe[d.value.demographics.length-1].neighborhood),Y=s((ue=d.value.demographics)==null?void 0:ue[d.value.demographics.length-1].occupation),V=s((de=d.value.demographics)==null?void 0:de[d.value.demographics.length-1].education),_e=()=>{var m;(m=ee.value)==null||m.reset(),J("update:isDrawerOpen",!1)},j=Te("userData").value,ge=`/patients-edit/${j==null?void 0:j.id}/${d.value.id}`,ye=async()=>{var m;if(j)try{const t=await Me(ge,{method:"POST",body:{name:w.value,dob:He(S.value),gender:B.value,phone:N.value,avatar:k.value,father_dob:x.value?x.value:null,father_work:F.value,father_edu:_.value,mother_dob:C.value?C.value:null,mother_work:I.value,mother_edu:g.value,related:O.value,siblings:+h.value,order:z.value,familyHx:Ve.value,notes:M.value,marital_status:q.value,children:H.value,residence:D.value,neighborhood:W.value,occupation:Y.value,education:V.value,demographics_id:(m=d.value.demographics)==null?void 0:m[0].id},onResponseError({response:y}){he.value=y._data,console.log(y._data)}})}catch(t){console.error(t)}};return R.value=qe(d.value.dob),(m,t)=>{const y=Oe,X=Ie,b=Pe,ke=Fe,Z=Ae,we=Ne;return u(),n(Le,{"model-value":T.isDrawerOpen,temporary:"",location:"end",width:"370",border:"none","onUpdate:modelValue":fe},{default:o(()=>[a(y,{title:"Edit "+e(d).name,onCancel:t[0]||(t[0]=l=>m.$emit("update:isDrawerOpen",!1))},null,8,["title"]),a(We),a(Qe,{flat:""},{default:o(()=>[a(e(ze),{options:{wheelPropagation:!1},class:"h-100"},{default:o(()=>[a(Ye,{style:{"block-size":"calc(100vh - 5rem)"}},{default:o(()=>[a(e(je),{ref_key:"refVForm",ref:ee,onSubmit:t[26]||(t[26]=Re(()=>{},["prevent"]))},{default:o(()=>[a(Ze,{class:"mb-2"},{default:o(()=>[a(r,null,{default:o(()=>[a(X,{"selected-radio":e(p),"onUpdate:selectedRadio":t[1]||(t[1]=l=>c(p)?p.value=l:null),"radio-content":be,"grid-column":{sm:"6",cols:"12"}},null,8,["selected-radio"])]),_:1}),a(r,{cols:"12"},{default:o(()=>[Je]),_:1}),a(r,{cols:"12"},{default:o(()=>[a(Ge,{circle:"",size:100,color:e(k)?"undefined":"secondary",variant:e(k)?void 0:"tonal"},{default:o(()=>[e(k)?(u(),n(Ke,{key:0,src:e(k),style:{"object-fit":"cover"}},null,8,["src"])):(u(),$("span",el,E(("avatarText"in m?m.avatarText:e(xe))(e(w))),1))]),_:1},8,["color","variant"])]),_:1}),a(r,{cols:"12"},{default:o(()=>[ll,f("input",{type:"file",id:"picture",name:"picture",accept:"image/*",capture:"environment",onChange:ve},null,32)]),_:1}),a(r,{cols:"12"},{default:o(()=>[al]),_:1}),a(r,{cols:"12"},{default:o(()=>[a(b,{modelValue:e(w),"onUpdate:modelValue":t[2]||(t[2]=l=>c(w)?w.value=l:null),label:"Name*",rules:["requiredValidator"in m?m.requiredValidator:e(Ce)],placeholder:""},null,8,["modelValue","rules"])]),_:1}),a(r,{cols:"12"},{default:o(()=>[a(ke,{modelValue:e(S),"onUpdate:modelValue":t[3]||(t[3]=l=>c(S)?S.value=l:null),label:"Birth Date*",placeholder:"Select date"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12"},{default:o(()=>[a(b,{disabled:"",modelValue:e(R),"onUpdate:modelValue":t[4]||(t[4]=l=>c(R)?R.value=l:null),label:"Age (Automatic)",placeholder:"",maxlength:"4"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12"},{default:o(()=>[a(Q,{modelValue:e(B),"onUpdate:modelValue":t[5]||(t[5]=l=>c(B)?B.value=l:null),inline:""},{label:o(()=>[tl]),default:o(()=>[a(v,{label:"Male",value:"Male"}),a(v,{label:"Female",value:"Female"})]),_:1},8,["modelValue"])]),_:1}),a(r,{cols:"12"},{default:o(()=>[a(b,{modelValue:e(N),"onUpdate:modelValue":t[6]||(t[6]=l=>c(N)?N.value=l:null),label:"Phone",placeholder:"",rules:["phoneNumberValidator"in m?m.phoneNumberValidator:e(De)],maxlength:"11"},null,8,["modelValue","rules"])]),_:1}),a(r,null,{default:o(()=>[ol]),_:1}),e(p)==="adult"?(u(),n(r,{key:0,cols:"12"},{default:o(()=>[a(Z,{modelValue:e(q),"onUpdate:modelValue":t[7]||(t[7]=l=>c(q)?q.value=l:null),label:"Marital Status",placeholder:"Select Status",items:e(B)==="Male"?["متزوج","اعزب","ارمل","منفصل"]:["متزوجة","عزباء","ارملة","منفصلة"]},null,8,["modelValue","items"])]),_:1})):i("",!0),e(p)==="adult"?(u(),n(r,{key:1,cols:"12"},{default:o(()=>[a(b,{modelValue:e(H),"onUpdate:modelValue":t[8]||(t[8]=l=>c(H)?H.value=l:null),placeholder:"Write a Number",label:"Children"},null,8,["modelValue"])]),_:1})):i("",!0),a(r,{cols:"12"},{default:o(()=>[a(Z,{modelValue:e(D),"onUpdate:modelValue":t[9]||(t[9]=l=>c(D)?D.value=l:null),label:"Residence",placeholder:"Select Residence",items:e(re)},null,8,["modelValue","items"]),f("div",ul,[(u(!0),$(K,null,G(e(re),l=>(u(),n(L,{class:"me-2 mb-2",size:"x-small",onClick:()=>{D.value=l}},{default:o(()=>[U(E(l),1)]),_:2},1032,["onClick"]))),256))])]),_:1}),e(D)==="بغداد"?(u(),n(r,{key:2,cols:"12"},{default:o(()=>[a(Z,{modelValue:e(W),"onUpdate:modelValue":t[10]||(t[10]=l=>c(W)?W.value=l:null),label:"Neighborhood",placeholder:"Select",items:e(Ue)},null,8,["modelValue","items"])]),_:1})):i("",!0),e(p)==="adult"?(u(),n(r,{key:3,cols:"12"},{default:o(()=>[a(b,{modelValue:e(Y),"onUpdate:modelValue":t[11]||(t[11]=l=>c(Y)?Y.value=l:null),placeholder:"Write an Occupation",label:"Occupation"},null,8,["modelValue"])]),_:1})):i("",!0),e(p)==="child"?(u(),n(r,{key:4,cols:"12"},{default:o(()=>[a(b,{modelValue:e(V),"onUpdate:modelValue":t[12]||(t[12]=l=>c(V)?V.value=l:null),label:"Education"},null,8,["modelValue"]),f("div",dl,[(u(!0),$(K,null,G("childEducation"in m?m.childEducation:e(Se),l=>(u(),n(L,{class:"me-2 mb-2",size:"x-small",onClick:()=>{V.value=e(V)===""||e(V)===void 0?l:`${e(V)}, ${l}`}},{default:o(()=>[U(E(l),1)]),_:2},1032,["onClick"]))),256))])]),_:1})):i("",!0),e(p)==="adult"?(u(),n(r,{key:5,cols:"12"},{default:o(()=>[a(Z,{modelValue:e(V),"onUpdate:modelValue":t[13]||(t[13]=l=>c(V)?V.value=l:null),label:"Education",placeholder:"Select Education",items:["أمي","ابتدائية","متوسطة","اعدادية","كلية","دبلوم","بكالوريوس","ماجستير","دكتوراه"]},null,8,["modelValue"])]),_:1})):i("",!0),e(p)==="child"?(u(),n(r,{key:6},{default:o(()=>[rl]),_:1})):i("",!0),e(p)==="child"?(u(),n(r,{key:7,cols:"12"},{default:o(()=>[a(Q,{modelValue:e(O),"onUpdate:modelValue":t[14]||(t[14]=l=>c(O)?O.value=l:null),inline:""},{default:o(()=>[a(v,{label:"Related",value:!0}),a(v,{label:"Not Related",value:!1})]),_:1},8,["modelValue"])]),_:1})):i("",!0),e(p)==="child"?(u(),n(r,{key:8},{default:o(()=>[nl]),_:1})):i("",!0),e(p)==="child"?(u(),n(r,{key:9,cols:"12"},{default:o(()=>[a(Q,{modelValue:e(h),"onUpdate:modelValue":t[15]||(t[15]=l=>c(h)?h.value=l:null),inline:""},{default:o(()=>[a(v,{label:"0",value:0}),a(v,{label:"1",value:1}),a(v,{label:"2",value:2}),a(v,{label:"3",value:3}),a(v,{label:"4",value:4}),a(v,{label:"5",value:5}),a(v,{label:"6",value:6}),a(v,{label:"7",value:7}),a(v,{label:"8",value:8})]),_:1},8,["modelValue"])]),_:1})):i("",!0),e(h)>=1?(u(),n(r,{key:10},{default:o(()=>[il]),_:1})):i("",!0),a(r,{cols:"12"},{default:o(()=>[a(Q,{modelValue:e(z),"onUpdate:modelValue":t[16]||(t[16]=l=>c(z)?z.value=l:null),inline:""},{default:o(()=>[e(h)>=1?(u(),n(v,{key:0,label:"1st",value:1})):i("",!0),e(h)>=1?(u(),n(v,{key:1,label:"2nd",value:2})):i("",!0),e(h)>1?(u(),n(v,{key:2,label:"3rd",value:3})):i("",!0),e(h)>2?(u(),n(v,{key:3,label:"4th",value:4})):i("",!0),e(h)>3?(u(),n(v,{key:4,label:"5th",value:5})):i("",!0),e(h)>4?(u(),n(v,{key:5,label:"6th",value:6})):i("",!0),e(h)>5?(u(),n(v,{key:6,label:"7th",value:7})):i("",!0),e(h)>6?(u(),n(v,{key:7,label:"8th",value:8})):i("",!0),e(h)>7?(u(),n(v,{key:8,label:"9th",value:8})):i("",!0)]),_:1},8,["modelValue"])]),_:1}),e(p)==="child"?(u(),n(r,{key:11},{default:o(()=>[sl]),_:1})):i("",!0),e(p)==="child"?(u(),n(r,{key:12,cols:"12"},{default:o(()=>[a(b,{modelValue:e(x),"onUpdate:modelValue":t[17]||(t[17]=l=>c(x)?x.value=l:null),label:"Date of Birth",placeholder:"",maxlength:"4"},null,8,["modelValue"])]),_:1})):i("",!0),e(p)==="child"?(u(),n(r,{key:13,cols:"12"},{default:o(()=>[a(b,{modelValue:e(A),"onUpdate:modelValue":t[18]||(t[18]=l=>c(A)?A.value=l:null),label:"Age at Birth",placeholder:"",disabled:""},null,8,["modelValue"])]),_:1})):i("",!0),e(p)==="child"?(u(),n(r,{key:14,cols:"12"},{default:o(()=>[a(b,{modelValue:e(_),"onUpdate:modelValue":t[19]||(t[19]=l=>c(_)?_.value=l:null),label:"Education",placeholder:""},null,8,["modelValue"]),f("div",ml,[(u(!0),$(K,null,G("adultEducation"in m?m.adultEducation:e(ne),l=>(u(),n(L,{class:"me-2 mb-2",size:"x-small",onClick:()=>{_.value=e(_)===""||e(_)===void 0?l:`${e(_)}, ${l}`}},{default:o(()=>[U(E(l),1)]),_:2},1032,["onClick"]))),256))])]),_:1})):i("",!0),e(p)==="child"?(u(),n(r,{key:15,cols:"12"},{default:o(()=>[a(b,{modelValue:e(F),"onUpdate:modelValue":t[20]||(t[20]=l=>c(F)?F.value=l:null),label:"Work",placeholder:""},null,8,["modelValue"])]),_:1})):i("",!0),e(p)==="child"?(u(),n(r,{key:16},{default:o(()=>[cl]),_:1})):i("",!0),e(p)==="child"?(u(),n(r,{key:17,cols:"12"},{default:o(()=>[a(b,{modelValue:e(C),"onUpdate:modelValue":t[21]||(t[21]=l=>c(C)?C.value=l:null),label:"Date of Birth",placeholder:"",maxlength:"4"},null,8,["modelValue"])]),_:1})):i("",!0),e(p)==="child"?(u(),n(r,{key:18,cols:"12"},{default:o(()=>[a(b,{modelValue:e(P),"onUpdate:modelValue":t[22]||(t[22]=l=>c(P)?P.value=l:null),label:"Age at Birth",placeholder:"",disabled:""},null,8,["modelValue"])]),_:1})):i("",!0),e(p)==="child"?(u(),n(r,{key:19,cols:"12"},{default:o(()=>[a(b,{modelValue:e(g),"onUpdate:modelValue":t[23]||(t[23]=l=>c(g)?g.value=l:null),label:"Education",placeholder:""},null,8,["modelValue"]),f("div",pl,[(u(!0),$(K,null,G("adultEducation"in m?m.adultEducation:e(ne),l=>(u(),n(L,{class:"me-2 mb-2",size:"x-small",onClick:()=>{g.value=e(g)===""||e(g)===void 0?l:`${e(g)}, ${l}`}},{default:o(()=>[U(E(l),1)]),_:2},1032,["onClick"]))),256))])]),_:1})):i("",!0),e(p)==="child"?(u(),n(r,{key:20,cols:"12"},{default:o(()=>[a(b,{modelValue:e(I),"onUpdate:modelValue":t[24]||(t[24]=l=>c(I)?I.value=l:null),label:"Work",placeholder:""},null,8,["modelValue"])]),_:1})):i("",!0),a(r,null,{default:o(()=>[vl]),_:1}),a(r,{cols:"12"},{default:o(()=>[a(we,{modelValue:e(M),"onUpdate:modelValue":t[25]||(t[25]=l=>c(M)?M.value=l:null)},null,8,["modelValue"])]),_:1}),a(r,{cols:"12"},{default:o(()=>[f("div",fl,[a(ie,{type:"submit",color:"primary",disabled:!e(w)||!e(S),onClick:ye},{default:o(()=>[U(" Save ")]),_:1},8,["disabled"]),a(ie,{color:"error",variant:"tonal",onClick:_e},{default:o(()=>[U(" Discard ")]),_:1})])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}});export{Wl as _};
