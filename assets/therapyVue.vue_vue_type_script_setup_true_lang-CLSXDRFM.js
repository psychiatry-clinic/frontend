import{_ as T}from"./AppTextarea.vue_vue_type_script_setup_true_lang-BvdqcHsT.js";import{d as w,b8 as S,k as q,j as N,r as p,o as d,g as f,f as o,b as s,n as m,aX as h,aj as V,v as c,z as x}from"./index-Cx9f_UB6.js";import{$ as C}from"./api-CNuKIaBH.js";import{a as B,V as O}from"./VRow-DaMRPCg6.js";import{V as j}from"./VCard-MbR0quvT.js";import{V as $}from"./VCardText-CU6bWz5p.js";import{V as E}from"./VDivider-QhcZIdz_.js";import{V as K}from"./VSnackbar-Czor2vZ9.js";import{a as P}from"./VWindowItem-BIoewB4V.js";const L=w({__name:"therapyVue",props:{visit:{},psychologist:{type:Boolean}},setup(b){var k;const t=S("userData").value;q(),N();const{visit:n}=b,i=p(!1),y=p(!1),u=p((k=n.therapy)==null?void 0:k.notes);function g(a){u.value=a.target.value}const v=n.active,_=async a=>{if(!v)return;const e=`/visits-edit/${t==null?void 0:t.id}/${n.id}/${n.patient.id}`;try{await C(e,{method:"POST",body:{therapyRequest:a},onResponseError({response:l}){console.log(l._data)}})==="OK"&&(y.value=a)}catch(r){console.error(r)}},R=async()=>{if(i.value=!0,!v)return;const a=`/therapy/${t==null?void 0:t.id}/${n.id}`;try{const e=await C(a,{method:"POST",body:{notes:u.value,clinic:t==null?void 0:t.clinic},onResponseError({response:r}){console.log(r._data)}})}catch(e){console.error(e)}};return(a,e)=>{const r=T;return d(),f(P,null,{default:o(()=>[s(O,null,{default:o(()=>[s(B,{cols:"12"},{default:o(()=>[s(j,{class:"mb-6",title:"Therapy Notes"},{default:o(()=>[s($,null,{default:o(()=>[s(r,{modelValue:m(u),"onUpdate:modelValue":e[0]||(e[0]=l=>h(u)?u.value=l:null),label:"","auto-grow":"",rows:"3",onKeyup:g},null,8,["modelValue"])]),_:1}),s(E),s($,{class:"d-flex gap-4"},{default:o(()=>[!m(y)&&!a.psychologist?(d(),f(V,{key:0,onClick:e[1]||(e[1]=l=>_(!0))},{default:o(()=>[c("Request Therapy")]),_:1})):a.psychologist?x("",!0):(d(),f(V,{key:1,onClick:e[2]||(e[2]=l=>_(!1)),color:"success"},{default:o(()=>[c("Requested")]),_:1})),s(V,{onClick:R},{default:o(()=>[c("Save")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(K,{modelValue:m(i),"onUpdate:modelValue":e[3]||(e[3]=l=>h(i)?i.value=l:null),color:"success"},{default:o(()=>[c(" Therapy Notes Was Saved Successfully ")]),_:1},8,["modelValue"])]),_:1})}}});export{L as _};
