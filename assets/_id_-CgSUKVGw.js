import{a as st,b as nt}from"./formatters-DocrwTSm.js";import{r as X,c as B,b as it,f as J,g as ot}from"./myFormat-CqxdRJ7U.js";import{_ as lt}from"./UserInfoEditDialog.vue_vue_type_script_setup_true_lang-BqN7l45C.js";import{_ as rt}from"./editPatient.vue_vue_type_style_index_0_lang-BLRPpaCg.js";import{a as O,V as j}from"./VRow-DxI8dr6F.js";import{V as F}from"./VCardText-BO2qb0JV.js";import{V as dt}from"./VAvatar-Bd8V8HZP.js";import{V as pt}from"./VImg-CuTDEwgi.js";import{V as ct,a as c}from"./VList-Dp9-YxEU.js";import{V as ut,a as mt,b as _t,c as ht}from"./VExpansionPanel-CTouUoR4.js";import{d as H,aV as z,r as P,a6 as ft,o as r,c as f,b as o,f as i,g as h,x as e,n as t,e as a,v as l,z as y,y as bt,F as A,i as E,aj as T,aX as R,Q as Dt,R as xt,b8 as Z,k as tt,j as et,b9 as yt,a0 as gt}from"./index-bdnnFtRa.js";import{V as at}from"./VCard-CPKfod-B.js";import{a as vt,d as K}from"./differenceInYears-BdTDs0wt.js";import{_ as kt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as Vt,a as wt}from"./VTimelineItem-CtkWhdBb.js";import{f as $t}from"./formatDistanceToNow-C12ea1Zs.js";import{u as Ct}from"./useApi-DrffxKcj.js";import{$ as At}from"./api-CUfCfyPv.js";import{V as Tt,a as It}from"./VTabs-C0D4lYes.js";import{V as Nt,a as St}from"./VWindowItem-DI5xC_pX.js";import{V as Pt}from"./VAlert-DAf55ZMW.js";import"./helpers-BGv4x_9E.js";import"./validators-DR7cptrM.js";import"./suggestions--fqLo7nl.js";import"./AppTextarea.vue_vue_type_script_setup_true_lang-BS5dMgvr.js";import"./form-Cy8lCdhY.js";/* empty css                   */import"./VCounter-2oUbd89o.js";import"./index-mg8V6qBD.js";import"./index-Dz2mP2jc.js";import"./VField-Dtq7XnMt.js";import"./easing-CjukEv2V.js";import"./VInput-xnT7ObUg.js";import"./forwardRefs-C-GTDzx5.js";import"./AppAutocomplete.vue_vue_type_script_setup_true_lang-Cx77qcQI.js";import"./VSelect-BvJi4i8P.js";import"./VTextField-BPchtQmo.js";import"./dialog-transition-CbondD73.js";import"./VMenu-DNrg0WOr.js";import"./VOverlay-Dfn7crNF.js";import"./lazy-Bpj9mOzs.js";import"./scopeId-CCFY5ZIa.js";import"./VCheckboxBtn-BWYWtpRj.js";import"./VSelectionControl-t4YPH0cf.js";import"./VChip-DsBqjR3W.js";import"./VSlideGroup-DO1TheLY.js";import"./filter-htSALL4N.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-DvU7EFBv.js";import"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-DTi96K25.js";import"./VForm-DLDchqIA.js";import"./VRadioGroup-oVwwE3MR.js";import"./VDialog-DY0ClRIW.js";import"./AppDateTimePicker.vue_vue_type_style_index_0_lang-D8Kj6Sgy.js";import"./CustomRadios-BnrrgcqC.js";import"./VSpacer-Dab8RkjK.js";/* empty css              */import"./createSimpleFunctional-BY3-Ks_i.js";import"./AppDrawerHeaderSection.vue_vue_type_script_setup_true_lang-5oXnSYXA.js";import"./vue3-perfect-scrollbar.esm-DdithCgq.js";import"./VDivider-C_AvVbR1.js";import"./VNavigationDrawer-Yk4p2Tad.js";import"./ssrBoot-GjPusc8N.js";import"./BlobServiceClient-CR2xPX03.js";import"./__vite-browser-external-DFygW7-s.js";import"./index-B3bPRkoL.js";const L=$=>(Dt("data-v-f3ee616a"),$=$(),xt(),$),Et={key:1,class:"text-5xl font-weight-medium"},Bt={class:"text-h5 mt-4"},Ft={class:"text-h6"},Ot={class:"text-body-1 d-inline-block"},Rt={class:"text-h6"},Ht={class:"text-body-1 d-inline-block"},Lt={class:"text-h6"},jt={class:"text-body-1 d-inline-block"},zt={class:"text-h6"},Ut={class:"text-body-1 d-inline-block"},Wt={key:0},Yt={class:"text-h6"},Mt={class:"text-body-1 d-inline-block"},qt={class:"text-h6"},Gt={class:"text-body-1 d-inline-block"},Qt={class:"text-h6"},Xt={class:"text-body-1 d-inline-block"},Jt={class:"text-h6"},Kt={class:"text-body-1 d-inline-block"},Zt={class:"text-h6"},te={class:"text-body-1 d-inline-block"},ee=L(()=>a("br",null,null,-1)),ae={key:1},se={class:"text-h6"},ne={class:"d-block mt-4 mb-2 text-primary text-h6"},ie={class:"text-h6"},oe={class:"text-body-1 d-inline-block"},le={class:"text-h6"},re={class:"text-body-1 d-inline-block"},de={class:"text-h6"},pe={class:"text-body-1 d-inline-block"},ce={class:"text-h6"},ue={class:"text-body-1 d-inline-block"},me={class:"text-h6"},_e={class:"text-body-1 d-inline-block"},he={class:"d-block mt-4 mb-2 text-primary text-h6"},fe={class:"text-h6"},be={class:"text-body-1 d-inline-block"},De={class:"text-h6"},xe={class:"text-body-1 d-inline-block"},ye={class:"text-h6"},ge={class:"text-body-1 d-inline-block"},ve={class:"text-h6"},ke={class:"text-body-1 d-inline-block"},Ve={class:"text-h6"},we={class:"text-body-1 d-inline-block"},$e=L(()=>a("br",null,null,-1)),Ce={class:"text-h6 text-primary"},Ae={class:"text-body-1 d-inline-block"},Te={class:"text-h6 text-primary"},Ie={class:"text-body-1 d-inline-block"},Ne=L(()=>a("br",null,null,-1)),Se={class:"text-h6 text-primary"},Pe={class:"text-body-1 d-inline-block"},Ee=L(()=>a("br",null,null,-1)),Be=H({__name:"CustomerBioPanel",props:{patientData:{}},setup($){const{t:n}=z(),g=P(!1),v=P(!1),s=$,p=P(s.patientData),V=ft(()=>({...p.value,createdAt:X(p.value.createdAt),age:B(p.value.dob),dob:X(p.value.dob)})),_=vt(new Date,new Date(s.patientData.dob))<14;let b=[];return _?b=[{name:n("Family History"),data:p.value.family_hx},{name:n("Social History"),data:p.value.social_hx}]:b=[{name:n("Family History"),data:p.value.family_hx},{name:n("Social History"),data:p.value.social_hx},{name:n("Personal History"),data:p.value.personal_hx},{name:n("Occupation History"),data:p.value.occupation_hx},{name:n("Forensic History"),data:p.value.forensic_hx}],(m,D)=>{const u=lt;return r(),f(A,null,[o(j,null,{default:i(()=>[o(O,{cols:"12"},{default:i(()=>[s.patientData?(r(),h(at,{key:0},{default:i(()=>[o(F,{class:"text-center pt-12"},{default:i(()=>[o(dt,{rounded:"",size:120,color:s.patientData.name?void 0:"primary",variant:s.patientData.avatar?void 0:"tonal"},{default:i(()=>[s.patientData.avatar?(r(),h(pt,{key:0,src:s.patientData.avatar},null,8,["src"])):(r(),f("span",Et,e(("avatarText"in m?m.avatarText:t(st))(s.patientData.name)),1))]),_:1},8,["color","variant"]),a("h5",Bt,e(s.patientData.name),1)]),_:1}),o(F,null,{default:i(()=>[o(ct,{class:"card-list mt-2"},{default:i(()=>[o(c,null,{default:i(()=>[a("h6",Ft,[l(e(t(n)("Gender"))+": ",1),a("span",Ot,e(t(n)(s.patientData.gender)),1)])]),_:1}),o(c,null,{default:i(()=>[a("h6",Rt,[l(e(t(n)("Birth Date"))+" : ",1),a("span",Ht,e(("removeTimeAndDate"in m?m.removeTimeAndDate:t(it))(s.patientData.dob)),1)])]),_:1}),o(c,null,{default:i(()=>[a("h6",Lt,[l(e(t(n)("Age"))+" : ",1),a("span",jt,e(("calculateAge"in m?m.calculateAge:t(B))(s.patientData.dob)),1)])]),_:1}),o(c,null,{default:i(()=>[a("h6",zt,[l(e(t(n)("Phone"))+" : ",1),a("span",Ut,e(s.patientData.phone),1)])]),_:1}),s.patientData.demographics?(r(),f("div",Wt,[_?(r(),h(c,{key:0},{default:i(()=>{var d;return[a("h6",Yt,[l(e(t(n)("Marital Status"))+" : ",1),a("span",Mt,e((d=s.patientData.demographics[0])==null?void 0:d.marital_status),1)])]}),_:1})):y("",!0),_?(r(),h(c,{key:1},{default:i(()=>{var d;return[a("h6",qt,[l(e(t(n)("Children"))+" : ",1),a("span",Gt,e((d=s.patientData.demographics[0])==null?void 0:d.children),1)])]}),_:1})):y("",!0),o(c,null,{default:i(()=>{var d;return[a("h6",Qt,[l(e(t(n)("Residence"))+" : ",1),a("span",Xt,e((d=s.patientData.demographics[0])==null?void 0:d.residence),1)])]}),_:1}),o(c,null,{default:i(()=>{var d;return[a("h6",Jt,[l(e(t(n)("Education"))+" : ",1),a("span",Kt,e((d=s.patientData.demographics[0])==null?void 0:d.education),1)])]}),_:1}),_?(r(),h(c,{key:2},{default:i(()=>{var d;return[a("h6",Zt,[l(e(t(n)("Work"))+" : ",1),a("span",te,e((d=s.patientData.demographics[0])==null?void 0:d.occupation),1)])]}),_:1})):y("",!0)])):y("",!0),ee,_?(r(),f("div",ae,[o(c,null,{default:i(()=>[a("h6",se,[a("span",{class:bt(s.patientData.related?"text-error":"text-success")},e(s.patientData.related?t(n)("Parents")+" "+t(n)("Related"):t(n)("Parents")+" "+t(n)("Not Related")),3)])]),_:1}),a("h6",ne,e(t(n)("Father Information")),1),o(c,null,{default:i(()=>[a("h6",ie,[l(e(t(n)("Birth Date"))+" : ",1),a("span",oe,e(s.patientData.father_dob?new Date(s.patientData.father_dob).getFullYear():""),1)])]),_:1}),o(c,null,{default:i(()=>[a("h6",le,[l(e(t(n)("Age at Birth of Child"))+" : ",1),a("span",re,e(s.patientData.father_dob?t(K)(s.patientData.dob,s.patientData.father_dob):""),1)])]),_:1}),o(c,null,{default:i(()=>[a("h6",de,[l(e(t(n)("Age Now"))+" : ",1),a("span",pe,e(s.patientData.father_dob?("calculateAge"in m?m.calculateAge:t(B))(s.patientData.father_dob?s.patientData.father_dob.toString():"1"):""),1)])]),_:1}),o(c,null,{default:i(()=>[a("h6",ce,[l(e(t(n)("Education"))+" : ",1),a("span",ue,e(s.patientData.father_edu),1)])]),_:1}),o(c,null,{default:i(()=>[a("h6",me,[l(e(t(n)("Work"))+" : ",1),a("span",_e,e(s.patientData.father_work),1)])]),_:1}),a("h6",he,e(t(n)("Mother Information")),1),o(c,null,{default:i(()=>[a("h6",fe,[l(e(t(n)("Birth Date"))+" : ",1),a("span",be,e(s.patientData.mother_dob?new Date(s.patientData.mother_dob).getFullYear():""),1)])]),_:1}),o(c,null,{default:i(()=>[a("h6",De,[l(e(t(n)("Age at Birth of Child"))+" : ",1),a("span",xe,e(s.patientData.mother_dob?t(K)(s.patientData.dob,s.patientData.mother_dob):""),1)])]),_:1}),o(c,null,{default:i(()=>[a("h6",ye,[l(e(t(n)("Age Now"))+" : ",1),a("span",ge,e(s.patientData.mother_dob?("calculateAge"in m?m.calculateAge:t(B))(s.patientData.mother_dob?s.patientData.mother_dob.toString():"1"):""),1)])]),_:1}),o(c,null,{default:i(()=>[a("h6",ve,[l(e(t(n)("Education"))+" : ",1),a("span",ke,e(s.patientData.mother_edu),1)])]),_:1}),o(c,null,{default:i(()=>[a("h6",Ve,[l(e(t(n)("Work"))+" : ",1),a("span",we,e(s.patientData.mother_work),1)])]),_:1}),$e,o(c,null,{default:i(()=>[a("h6",Ce,[l(e(t(n)("Siblings"))+" : ",1),a("span",Ae,e(s.patientData.siblings),1)])]),_:1}),o(c,null,{default:i(()=>[a("h6",Te,[l(e(t(n)("Order in Siblings"))+" : ",1),a("span",Ie,e(t(J)(s.patientData.order)!=="nullth"?t(J)(s.patientData.order):""),1)])]),_:1}),Ne])):y("",!0),o(c,null,{default:i(()=>[a("h6",Se,[l(e(t(n)("Notes"))+" : ",1),a("span",Pe,e(s.patientData.notes),1)])]),_:1})]),_:1}),Ee,t(b)?(r(),h(ut,{key:0,multiple:""},{default:i(()=>[(r(!0),f(A,null,E(t(b),d=>(r(),h(mt,null,{default:i(()=>[o(_t,null,{default:i(()=>[l(e(d.name),1)]),_:2},1024),(r(!0),f(A,null,E(d.data,(C,x)=>(r(),h(ht,null,{default:i(()=>[l(e(x)+": "+e(C),1)]),_:2},1024))),256))]),_:2},1024))),256))]),_:1})):y("",!0)]),_:1}),o(F,{class:"text-center"},{default:i(()=>[o(T,{block:"",onClick:D[0]||(D[0]=d=>v.value=!t(v))},{default:i(()=>[l(e(t(n)("Edit Patient Details")),1)]),_:1})]),_:1})]),_:1})):y("",!0)]),_:1}),o(rt,{"patient-data":t(V),"is-drawer-open":t(v),"onUpdate:isDrawerOpen":D[1]||(D[1]=d=>R(v)?v.value=d:null)},null,8,["patient-data","is-drawer-open"])]),_:1}),o(u,{isDialogVisible:t(g),"onUpdate:isDialogVisible":D[2]||(D[2]=d=>R(g)?g.value=d:null),"user-data":t(p),onSubmit:D[3]||(D[3]=()=>{})},null,8,["isDialogVisible","user-data"])],64)}}}),Fe=kt(Be,[["__scopeId","data-v-f3ee616a"]]),Oe={class:"d-flex justify-space-between align-center gap-2 flex-wrap mb-2"},Re={class:"app-timeline-title"},He={class:"app-timeline-meta"},Le={key:0,class:"d-flex justify-space-between align-center gap-2 flex-wrap mb-2"},je={class:"app-timeline-text mt-1"},ze={class:"text-warning"},Ue={class:"app-timeline-meta"},We={key:1,class:"app-timeline-text mt-1"},Ye={class:"text-warning"},Me={key:2,class:"app-timeline-text mt-1"},qe={class:"text-warning"},Ge={class:"app-timeline-text mt-1"},Qe={class:"text-warning"},Xe={class:"app-timeline-text mt-1"},Je={class:"text-warning"},Ke=H({__name:"visitTimeLine",props:{patientData:{}},setup($){const{t:n}=z(),g=Z("userData").value,v=tt();return et(),(s,p)=>(r(),h(at,{title:t(n)("Visits Timeline")},{default:i(()=>[o(F,null,{default:i(()=>{var V,_,b,m;return[((V=t(g))==null?void 0:V.role)==="DOCTOR"&&((b=(_=s.patientData)==null?void 0:_.visits)!=null&&b[s.patientData.visits.length-1])&&!s.patientData.visits[s.patientData.visits.length-1].active||((m=s.patientData.visits)==null?void 0:m.length)===0?(r(),h(T,{key:0,variant:"outlined",class:"mb-5",onClick:p[0]||(p[0]=D=>t(v).push({name:"patients-visits-new-id",params:{id:s.patientData.id},query:{dob:s.patientData.dob,name:s.patientData.name}}))},{default:i(()=>[l(e(t(n)("New Visit")),1)]),_:1})):y("",!0),o(Vt,{side:"end",align:"start","line-inset":"8","truncate-line":"start",density:"compact"},{default:i(()=>{var D;return[(r(!0),f(A,null,E((D=s.patientData.visits)==null?void 0:D.slice().reverse(),(u,d)=>(r(),h(wt,{"dot-color":"primary",size:"x-small"},{default:i(()=>{var C,x,I,N,S,k,U,W,Y,M,q,G,Q;return[a("div",Oe,[a("span",Re,e(("getVisitNumber"in s?s.getVisitNumber:t(ot))(s.patientData.visits,d))+" visit ",1),a("span",He,e(t($t)(new Date(u.createdAt),{addSuffix:!0})),1)]),u.follow_up?y("",!0):(r(),f("div",Le,[a("div",je,[a("span",ze,e(t(n)("Chief Complaint"))+": ",1),a("li",null,e((C=u.chief_complaint)!=null&&C.Complaint?(x=u.chief_complaint)==null?void 0:x.Complaint:(I=u.present_illness)==null?void 0:I.Course)+" "+e((N=u.chief_complaint)!=null&&N.Duration?"for":"")+" "+e((S=u.chief_complaint)==null?void 0:S.Duration),1)]),a("span",Ue,e(("formatDate"in s?s.formatDate:t(nt))(u.createdAt)),1)])),u.follow_up?(r(),f("div",Me,[a("span",qe,e(t(n)("Follow up notes"))+": ",1),a("li",null,e((U=u.notes)==null?void 0:U.Notes),1)])):(r(),f("div",We,[a("span",Ye,e(t(n)("Diagnosis"))+": ",1),a("li",null,e((k=u.ddx)==null?void 0:k["Differential Diagnosis"]),1)])),a("div",Ge,[a("span",Qe,e(t(n)("Management"))+": ",1),(r(!0),f(A,null,E((W=u.management)==null?void 0:W.managements,w=>(r(),f("li",null,e(w.Name)+" "+e(w.Form)+" "+e(w.Dose)+" "+e(w.Use),1))),256))]),a("div",Xe,[a("span",Je,e(t(n)("Doctor"))+": ",1),a("li",null,e((Y=u.doctor)==null?void 0:Y.fullName)+" "+e(((M=u.clinic)==null?void 0:M.name)==="autism"?t(n)("in NCA"):""),1)]),u.active||((q=t(g))==null?void 0:q.id)===((G=u.doctor)==null?void 0:G.id)?(r(),h(T,{key:3,variant:"tonal",class:"d-inline-flex align-center mt-4 me-2",onClick:w=>t(v).push({name:"patients-visits-edit-id",params:{id:s.patientData.id},query:{visit:u.id}})},{default:i(()=>{var w;return[l(e(((w=t(g))==null?void 0:w.role)==="DOCTOR"?t(n)("Edit Visit"):t(n)("Therapy Notes")),1)]}),_:2},1032,["onClick"])):y("",!0),((Q=t(g))==null?void 0:Q.role)!=="PSYCHOLOGIST"?(r(),h(T,{key:4,variant:"tonal",class:"d-inline-flex align-center mt-4 me-2",onClick:w=>t(v).push({name:"patients-visits-open-id",params:{id:s.patientData.id},query:{visit:u.id,dob:s.patientData.dob,name:s.patientData.name}})},{default:i(()=>[l(e(t(n)("Summary")),1)]),_:2},1032,["onClick"])):y("",!0)]}),_:2},1024))),256))]}),_:1})]}),_:1})]),_:1},8,["title"]))}}),Ze=H({__name:"CustomerTabVisits",props:{patientData:{}},setup($){return(n,g)=>(r(),h(j,null,{default:i(()=>[o(O,null,{default:i(()=>[o(Ke,{patientData:n.patientData},null,8,["patientData"])]),_:1})]),_:1}))}}),ta={class:"d-flex justify-space-between"},ea={class:"d-flex justify-space-between align-center flex-wrap gap-y-4 mb-6"},aa={class:"text-h4 mb-1"},sa={class:"text-body-1"},na={key:0,class:"d-flex gap-4"},ia={key:1},bs=H({__name:"[id]",async setup($){let n,g;const v=et(),s=tt(),{t:p}=z(),V=v.params,_=Z("userData").value,b=P(),m=P(null),D=[{title:p("Visits"),icon:"tabler-file"}],{data:u}=([n,g]=yt(()=>Ct(`/patient/${_==null?void 0:_.id}/${V.id}`)),n=await n,g(),n),d=async()=>{if(_)try{const C=await At(`/patient-delete/${_==null?void 0:_.id}/${V.id}`,{method:"DELETE",onResponseError({response:x}){console.log(x)}});s.push("/patients")}catch(C){console.error(C)}};return b.value=u.value,(C,x)=>{var I,N,S;return r(),f(A,null,[a("div",ta,[o(T,{variant:"flat",color:"warning",class:"mb-5",onClick:x[0]||(x[0]=k=>t(s).push("/patients"))},{default:i(()=>[l(e(t(p)("Back")),1)]),_:1})]),a("div",null,[a("div",ea,[a("div",null,[a("h4",aa,e(t(p)("Patient ID"))+" #"+e(t(V).id),1),a("div",sa,e(t(p)("Added At"))+": "+e((I=t(b))!=null&&I.createdAt?new Date((N=t(b))==null?void 0:N.createdAt).toLocaleString():t(p)("Cannot Display Date")),1)]),((S=t(_))==null?void 0:S.role)==="ADMIN"?(r(),f("div",na,[o(T,{onClick:d,variant:"tonal",color:"error"},{default:i(()=>[l(e(t(p)("Delete Patient")),1)]),_:1})])):y("",!0)]),t(b)?(r(),h(j,{key:0},{default:i(()=>[t(b)?(r(),h(O,{key:0,cols:"12",md:"5",lg:"4"},{default:i(()=>[o(Fe,{"patient-data":t(b)},null,8,["patient-data"])]),_:1})):y("",!0),o(O,{cols:"12",md:"7",lg:"8"},{default:i(()=>[o(Tt,{modelValue:t(m),"onUpdate:modelValue":x[1]||(x[1]=k=>R(m)?m.value=k:null),class:"v-tabs-pill mb-3 disable-tab-transition"},{default:i(()=>[(r(),f(A,null,E(D,k=>o(It,{key:k.title},{default:i(()=>[o(gt,{size:"20",start:"",icon:k.icon},null,8,["icon"]),l(" "+e(k.title),1)]),_:2},1024)),64))]),_:1},8,["modelValue"]),o(Nt,{modelValue:t(m),"onUpdate:modelValue":x[2]||(x[2]=k=>R(m)?m.value=k:null),class:"disable-tab-transition",touch:!1},{default:i(()=>[o(St,null,{default:i(()=>[o(Ze,{patientData:t(b)},null,8,["patientData"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):(r(),f("div",ia,[o(Pt,{type:"error",variant:"tonal"},{default:i(()=>[l(e(`${t(p)("patient with ID")} ${t(V).id} ${t(p)("not found!")}`),1)]),_:1})]))])],64)}}});export{bs as default};
