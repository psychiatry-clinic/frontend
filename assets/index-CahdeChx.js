import{a as oe}from"./formatters-DocrwTSm.js";import{_ as ne}from"./TablePagination.vue_vue_type_script_setup_true_lang-12Id8OkK.js";import{_ as le}from"./MoreBtn.vue_vue_type_script_setup_true_lang-ffscInba.js";import{_ as se}from"./AppTextField.vue_vue_type_script_setup_true_lang-Cn5QAR7R.js";import{_ as ie}from"./AppSelect.vue_vue_type_script_setup_true_lang-CUM7xL_a.js";import{u as re}from"./useApi-CiYK4OrD.js";import{c as ce}from"./createUrl-CkR9s17f.js";import{$ as de}from"./api-faFk6m2o.js";import{d as pe,r as p,aq as ue,a4 as D,a as i,n as l,o as c,c as b,b as t,f as a,F,i as me,e as s,v as _,ad as h,x as r,s as ve,g as $,y as _e,z as fe}from"./index-B-uKkDM3.js";import"./helpers-BGv4x_9E.js";import"./index-B3bPRkoL.js";const be={key:0},he={class:"d-flex flex-column"},ye={class:"text-h4"},ge={class:"text-body-1 text-capitalize"},Ve={class:"d-flex gap-4 align-center flex-wrap"},xe={class:"d-flex align-center gap-2"},ke=s("span",null,"Show",-1),we={class:"d-flex align-center flex-wrap gap-4"},Ie={class:"invoice-list-filter"},Ce={class:"invoice-list-filter"},De={class:"mb-0"},$e={class:"mb-0"},Be={class:"mb-0"},Pe={class:"d-flex align-center"},Se={key:1},Te={class:"d-flex flex-column"},Ue={class:"text-sm text-medium-emphasis"},Ae={key:1,class:"text-base text-high-emphasis"},ze={key:1},Je=pe({__name:"index",async setup(Ne){let y,B;const g=p(""),V=p(null),k=p([]),u=p(10),m=p(1),P=p(),S=p(),q=o=>{var n,v;P.value=(n=o.sortBy[0])==null?void 0:n.key,S.value=(v=o.sortBy[0])==null?void 0:v.order},x=p([{title:"Clients",value:24,icon:"tabler-user"},{title:"Invoices",value:165,icon:"tabler-file-invoice"},{title:"Paid",value:"$2.46k",icon:"tabler-checks"},{title:"Unpaid",value:"$876",icon:"tabler-circle-off"}]),M=[{title:"#",key:"id"},{title:"Status",key:"status",sortable:!1},{title:"Client",key:"client"},{title:"Total",key:"total"},{title:"Issued Date",key:"date"},{title:"Balance",key:"balance"},{title:"Actions",key:"actions",sortable:!1}],{data:T,execute:j}=([y,B]=ue(()=>re(ce("/apps/invoice",{query:{q:g,status:V,itemsPerPage:u,page:m,sortBy:P,orderBy:S}}))),y=await y,B(),y),U=D(()=>T.value.invoices),A=D(()=>T.value.totalInvoices),f=(o,n)=>o===n?{status:"Unpaid",chip:{color:"error"}}:o===0?{status:"Paid",chip:{color:"success"}}:{status:o,chip:{variant:"text"}},w=o=>o==="Partial Payment"?{variant:"warning",icon:"tabler-chart-pie-2"}:o==="Paid"?{variant:"success",icon:"tabler-check"}:o==="Downloaded"?{variant:"info",icon:"tabler-arrow-down"}:o==="Draft"?{variant:"primary",icon:"tabler-folder"}:o==="Sent"?{variant:"secondary",icon:"tabler-mail"}:o==="Past Due"?{variant:"error",icon:"tabler-help"}:{variant:"secondary",icon:"tabler-x"},O=D(()=>o=>[{title:"Download",value:"download",prependIcon:"tabler-download"},{title:"Edit",value:"edit",prependIcon:"tabler-pencil",to:{name:"apps-invoice-edit-id",params:{id:o}}},{title:"Duplicate",value:"duplicate",prependIcon:"tabler-layers-intersect"}]),Q=async o=>{await de(`/apps/invoice/${o}`,{method:"DELETE"}),j()};return(o,n)=>{const v=i("VIcon"),I=i("VAvatar"),G=i("VCol"),z=i("VDivider"),H=i("VRow"),N=i("VCardText"),C=i("VCard"),E=ie,J=i("VBtn"),K=se,R=i("RouterLink"),W=i("VTooltip"),X=i("VImg"),Y=i("VChip"),L=i("IconBtn"),Z=le,ee=ne,te=i("VDataTableServer"),ae=i("VCardTitle");return l(U)?(c(),b("section",be,[t(C,{class:"mb-6"},{default:a(()=>[t(N,{class:"px-3"},{default:a(()=>[t(H,null,{default:a(()=>[(c(!0),b(F,null,me(l(x),(e,d)=>(c(),b(F,{key:d},[t(G,{cols:"12",sm:"6",md:"3",class:"px-6"},{default:a(()=>[s("div",{class:_e(["d-flex justify-space-between align-center",o.$vuetify.display.xs?d!==l(x).length-1?"border-b pb-4":"":o.$vuetify.display.sm&&d<l(x).length/2?"border-b pb-4":""])},[s("div",he,[s("h4",ye,r(e.value),1),s("span",ge,r(e.title),1)]),t(I,{variant:"tonal",rounded:"",size:"42"},{default:a(()=>[t(v,{icon:e.icon,size:"26",color:"high-emphasis"},null,8,["icon"])]),_:2},1024)],2)]),_:2},1024),(o.$vuetify.display.mdAndUp?d!==l(x).length-1:o.$vuetify.display.smAndUp&&d%2===0)?(c(),$(z,{key:0,vertical:"",inset:"",length:"60"})):fe("",!0)],64))),128))]),_:1})]),_:1})]),_:1}),t(C,{id:"invoice-list"},{default:a(()=>[t(N,{class:"d-flex justify-space-between align-center flex-wrap gap-4"},{default:a(()=>[s("div",Ve,[s("div",xe,[ke,t(E,{"model-value":l(u),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":n[0]||(n[0]=e=>u.value=parseInt(e,10))},null,8,["model-value"])]),t(J,{"prepend-icon":"tabler-plus",to:{name:"apps-invoice-add"}},{default:a(()=>[_(" Create invoice ")]),_:1})]),s("div",we,[s("div",Ie,[t(K,{modelValue:l(g),"onUpdate:modelValue":n[1]||(n[1]=e=>h(g)?g.value=e:null),placeholder:"Search Invoice"},null,8,["modelValue"])]),s("div",Ce,[t(E,{modelValue:l(V),"onUpdate:modelValue":n[2]||(n[2]=e=>h(V)?V.value=e:null),placeholder:"Invoice Status",clearable:"","clear-icon":"tabler-x","single-line":"",items:["Downloaded","Draft","Sent","Paid","Partial Payment","Past Due"]},null,8,["modelValue"])])])]),_:1}),t(z),t(te,{modelValue:l(k),"onUpdate:modelValue":n[4]||(n[4]=e=>h(k)?k.value=e:null),"items-per-page":l(u),"onUpdate:itemsPerPage":n[5]||(n[5]=e=>h(u)?u.value=e:null),page:l(m),"onUpdate:page":n[6]||(n[6]=e=>h(m)?m.value=e:null),"show-select":"","items-length":l(A),headers:M,items:l(U),"item-value":"id",class:"text-no-wrap","onUpdate:options":q},{"item.id":a(({item:e})=>[t(R,{to:{name:"apps-invoice-preview-id",params:{id:e.id}}},{default:a(()=>[_(" #"+r(e.id),1)]),_:2},1032,["to"])]),"item.status":a(({item:e})=>[t(W,null,{activator:a(({props:d})=>[t(I,ve({size:28},d,{color:w(e.invoiceStatus).variant,variant:"tonal"}),{default:a(()=>[t(v,{size:16,icon:w(e.invoiceStatus).icon},null,8,["icon"])]),_:2},1040,["color"])]),default:a(()=>[s("p",De,r(e.invoiceStatus),1),s("p",$e," Balance: "+r(e.balance),1),s("p",Be," Due date: "+r(e.dueDate),1)]),_:2},1024)]),"item.client":a(({item:e})=>[s("div",Pe,[t(I,{size:"34",color:e.avatar.length?void 0:w(e.invoiceStatus).variant,variant:e.avatar.length?void 0:"tonal",class:"me-3"},{default:a(()=>[e.avatar.length?(c(),$(X,{key:0,src:e.avatar},null,8,["src"])):(c(),b("span",Se,r(("avatarText"in o?o.avatarText:l(oe))(e.client.name)),1))]),_:2},1032,["color","variant"]),s("div",Te,[t(R,{to:{name:"pages-user-profile-tab",params:{tab:"profile"}},class:"text-link font-weight-medium"},{default:a(()=>[_(r(e.client.name),1)]),_:2},1024),s("span",Ue,r(e.client.companyEmail),1)])])]),"item.total":a(({item:e})=>[_(" $"+r(e.total),1)]),"item.date":a(({item:e})=>[_(r(e.issuedDate),1)]),"item.balance":a(({item:e})=>[typeof f(e.balance,e.total).status=="string"?(c(),$(Y,{key:0,color:f(e.balance,e.total).chip.color,label:"",size:"x-small"},{default:a(()=>[_(r(f(e.balance,e.total).status),1)]),_:2},1032,["color"])):(c(),b("span",Ae,r(Number(f(e.balance,e.total).status)>0?`$${f(e.balance,e.total).status}`:`-$${Math.abs(Number(f(e.balance,e.total).status))}`),1))]),"item.actions":a(({item:e})=>[t(L,{onClick:d=>Q(e.id)},{default:a(()=>[t(v,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),t(L,{to:{name:"apps-invoice-preview-id",params:{id:e.id}}},{default:a(()=>[t(v,{icon:"tabler-eye"})]),_:2},1032,["to"]),t(Z,{"menu-list":l(O)(e.id),"item-props":"",color:"undefined"},null,8,["menu-list"])]),bottom:a(()=>[t(ee,{page:l(m),"onUpdate:page":n[3]||(n[3]=e=>h(m)?m.value=e:null),"items-per-page":l(u),"total-items":l(A)},null,8,["page","items-per-page","total-items"])]),_:1},8,["modelValue","items-per-page","page","items-length","items"])]),_:1})])):(c(),b("section",ze,[t(C,null,{default:a(()=>[t(ae,null,{default:a(()=>[_("No Invoice Found")]),_:1})]),_:1})]))}}});export{Je as default};
