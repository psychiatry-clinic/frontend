import{a as tt,b as et}from"./formatters-DocrwTSm.js";import{r as j,c as B,f as G,g as at}from"./myFormat-D-a5Os49.js";import{_ as st}from"./UserInfoEditDialog.vue_vue_type_script_setup_true_lang-DqkB_Z23.js";import{_ as nt}from"./editPatient.vue_vue_type_style_index_0_lang-BKRaCYjk.js";import{a as O,V as z}from"./VRow-FZgb7mvP.js";import{V as F}from"./VCardText-CreakvCE.js";import{V as it}from"./VAvatar-DptBOzdc.js";import{V as ot}from"./VImg-D4-GRgwc.js";import{V as lt,a as p}from"./VList-D_Fp3m5L.js";import{V as rt,a as dt,b as ct,c as pt}from"./VExpansionPanel-B5p-MCoo.js";import{d as H,aV as U,r as P,a6 as ut,o as r,c as f,b as o,f as i,g as h,x as e,n as t,e as a,v as l,z as y,y as mt,F as A,i as E,aj as T,aX as R,Q as _t,R as ht,b8 as X,k as J,j as K,b9 as ft,a0 as bt}from"./index-C350hkGh.js";import{V as Z}from"./VCard-Dj2SsBf_.js";import{a as Dt,d as Q}from"./differenceInYears-BdTDs0wt.js";import{_ as xt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as yt,a as gt}from"./VTimelineItem-CiUfFI3f.js";import{f as vt}from"./formatDistanceToNow-C2KKf9FK.js";import{u as kt}from"./useApi-BJRjcCxv.js";import{$ as Vt}from"./api-BWZPye0h.js";import{V as wt,a as $t}from"./VTabs-Cmzmomaf.js";import{V as Ct,a as At}from"./VWindowItem-BAJ1ctx6.js";import{V as Tt}from"./VAlert-C10tZWhu.js";import"./helpers-BGv4x_9E.js";import"./validators-DR7cptrM.js";import"./suggestions-2VnU4gHn.js";import"./AppTextarea.vue_vue_type_script_setup_true_lang-DKZkMqya.js";import"./form-DNMesCYB.js";/* empty css                   */import"./VCounter-CcXwxuDl.js";import"./index-CU83IKaF.js";import"./index-z1GP_3A9.js";import"./VField-Bxr49XGP.js";import"./easing-CjukEv2V.js";import"./VInput-CXbmVFfS.js";import"./forwardRefs-C-GTDzx5.js";import"./AppAutocomplete.vue_vue_type_script_setup_true_lang-DpqjV0sT.js";import"./VSelect-BluEoBrA.js";import"./VTextField-CNlpjhqR.js";import"./dialog-transition-5h-0_PRG.js";import"./VMenu-SbZgAzII.js";import"./VOverlay-DjUecmuZ.js";import"./lazy-6jC-kWva.js";import"./scopeId-DgVIodwr.js";import"./VCheckboxBtn-Cmeueffv.js";import"./VSelectionControl-fEWrtQF1.js";import"./VChip-CXm9U6vz.js";import"./VSlideGroup-KyaSukIQ.js";import"./filter-BXPLTB_a.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-C7SKXiG8.js";import"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-a4EnyroM.js";import"./VForm-BZcvJWRs.js";import"./VRadioGroup-vducYN_h.js";import"./VDialog-lBDI35ZU.js";import"./AppDateTimePicker.vue_vue_type_style_index_0_lang-C2yiO9RP.js";import"./CustomRadios-06nX89ZK.js";import"./VSpacer-Cik5eva8.js";/* empty css              */import"./createSimpleFunctional-CTy4x2Ln.js";import"./AppDrawerHeaderSection.vue_vue_type_script_setup_true_lang-yafLMIL4.js";import"./vue3-perfect-scrollbar.esm-flMdzCGP.js";import"./VDivider-0PiuGK6_.js";import"./VNavigationDrawer-DE2Ohi_6.js";import"./ssrBoot-BJR8oRre.js";import"./BlobServiceClient-CR2xPX03.js";import"./__vite-browser-external-DFygW7-s.js";import"./index-B3bPRkoL.js";const L=$=>(_t("data-v-83728cc3"),$=$(),ht(),$),It={key:1,class:"text-5xl font-weight-medium"},Nt={class:"text-h5 mt-4"},St={class:"text-h6"},Pt={class:"text-body-1 d-inline-block"},Et={class:"text-h6"},Bt={class:"text-body-1 d-inline-block"},Ft={class:"text-h6"},Ot={class:"text-body-1 d-inline-block"},Rt={class:"text-h6"},Ht={class:"text-body-1 d-inline-block"},Lt={key:0},jt={class:"text-h6"},zt={class:"text-body-1 d-inline-block"},Ut={class:"text-h6"},Wt={class:"text-body-1 d-inline-block"},Yt={class:"text-h6"},Mt={class:"text-body-1 d-inline-block"},qt={class:"text-h6"},Gt={class:"text-body-1 d-inline-block"},Qt={class:"text-h6"},Xt={class:"text-body-1 d-inline-block"},Jt=L(()=>a("br",null,null,-1)),Kt={key:1},Zt={class:"text-h6"},te={class:"d-block mt-4 mb-2 text-primary text-h6"},ee={class:"text-h6"},ae={class:"text-body-1 d-inline-block"},se={class:"text-h6"},ne={class:"text-body-1 d-inline-block"},ie={class:"text-h6"},oe={class:"text-body-1 d-inline-block"},le={class:"text-h6"},re={class:"text-body-1 d-inline-block"},de={class:"text-h6"},ce={class:"text-body-1 d-inline-block"},pe={class:"d-block mt-4 mb-2 text-primary text-h6"},ue={class:"text-h6"},me={class:"text-body-1 d-inline-block"},_e={class:"text-h6"},he={class:"text-body-1 d-inline-block"},fe={class:"text-h6"},be={class:"text-body-1 d-inline-block"},De={class:"text-h6"},xe={class:"text-body-1 d-inline-block"},ye={class:"text-h6"},ge={class:"text-body-1 d-inline-block"},ve=L(()=>a("br",null,null,-1)),ke={class:"text-h6 text-primary"},Ve={class:"text-body-1 d-inline-block"},we={class:"text-h6 text-primary"},$e={class:"text-body-1 d-inline-block"},Ce=L(()=>a("br",null,null,-1)),Ae={class:"text-h6 text-primary"},Te={class:"text-body-1 d-inline-block"},Ie=L(()=>a("br",null,null,-1)),Ne=H({__name:"CustomerBioPanel",props:{patientData:{}},setup($){const{t:n}=U(),g=P(!1),v=P(!1),s=$,c=P(s.patientData),V=ut(()=>({...c.value,createdAt:j(c.value.createdAt),age:B(c.value.dob),dob:j(c.value.dob)})),_=Dt(new Date,new Date(s.patientData.dob))<14;let b=[];return _?b=[{name:n("Family History"),data:c.value.family_hx},{name:n("Social History"),data:c.value.social_hx}]:b=[{name:n("Family History"),data:c.value.family_hx},{name:n("Social History"),data:c.value.social_hx},{name:n("Personal History"),data:c.value.personal_hx},{name:n("Occupation History"),data:c.value.occupation_hx},{name:n("Forensic History"),data:c.value.forensic_hx}],(u,D)=>{const m=st;return r(),f(A,null,[o(z,null,{default:i(()=>[o(O,{cols:"12"},{default:i(()=>[s.patientData?(r(),h(Z,{key:0},{default:i(()=>[o(F,{class:"text-center pt-12"},{default:i(()=>[o(it,{rounded:"",size:120,color:s.patientData.name?void 0:"primary",variant:s.patientData.avatar?void 0:"tonal"},{default:i(()=>[s.patientData.avatar?(r(),h(ot,{key:0,src:s.patientData.avatar},null,8,["src"])):(r(),f("span",It,e(("avatarText"in u?u.avatarText:t(tt))(s.patientData.name)),1))]),_:1},8,["color","variant"]),a("h5",Nt,e(s.patientData.name),1)]),_:1}),o(F,null,{default:i(()=>[o(lt,{class:"card-list mt-2"},{default:i(()=>[o(p,null,{default:i(()=>[a("h6",St,[l(e(t(n)("Gender"))+": ",1),a("span",Pt,e(t(n)(s.patientData.gender)),1)])]),_:1}),o(p,null,{default:i(()=>[a("h6",Et,[l(e(t(n)("Birth Date"))+" : ",1),a("span",Bt,e(("removeTimeFromDate"in u?u.removeTimeFromDate:t(j))(s.patientData.dob)),1)])]),_:1}),o(p,null,{default:i(()=>[a("h6",Ft,[l(e(t(n)("Age"))+" : ",1),a("span",Ot,e(("calculateAge"in u?u.calculateAge:t(B))(s.patientData.dob)),1)])]),_:1}),o(p,null,{default:i(()=>[a("h6",Rt,[l(e(t(n)("Phone"))+" : ",1),a("span",Ht,e(s.patientData.phone),1)])]),_:1}),s.patientData.demographics?(r(),f("div",Lt,[_?(r(),h(p,{key:0},{default:i(()=>{var d;return[a("h6",jt,[l(e(t(n)("Marital Status"))+" : ",1),a("span",zt,e((d=s.patientData.demographics[0])==null?void 0:d.marital_status),1)])]}),_:1})):y("",!0),_?(r(),h(p,{key:1},{default:i(()=>{var d;return[a("h6",Ut,[l(e(t(n)("Children"))+" : ",1),a("span",Wt,e((d=s.patientData.demographics[0])==null?void 0:d.children),1)])]}),_:1})):y("",!0),o(p,null,{default:i(()=>{var d;return[a("h6",Yt,[l(e(t(n)("Residence"))+" : ",1),a("span",Mt,e((d=s.patientData.demographics[0])==null?void 0:d.residence),1)])]}),_:1}),o(p,null,{default:i(()=>{var d;return[a("h6",qt,[l(e(t(n)("Education"))+" : ",1),a("span",Gt,e((d=s.patientData.demographics[0])==null?void 0:d.education),1)])]}),_:1}),_?(r(),h(p,{key:2},{default:i(()=>{var d;return[a("h6",Qt,[l(e(t(n)("Work"))+" : ",1),a("span",Xt,e((d=s.patientData.demographics[0])==null?void 0:d.occupation),1)])]}),_:1})):y("",!0)])):y("",!0),Jt,_?(r(),f("div",Kt,[o(p,null,{default:i(()=>[a("h6",Zt,[a("span",{class:mt(s.patientData.related?"text-error":"text-success")},e(s.patientData.related?t(n)("Parents")+" "+t(n)("Related"):t(n)("Parents")+" "+t(n)("Not Related")),3)])]),_:1}),a("h6",te,e(t(n)("Father Information")),1),o(p,null,{default:i(()=>[a("h6",ee,[l(e(t(n)("Birth Date"))+" : ",1),a("span",ae,e(s.patientData.father_dob?new Date(s.patientData.father_dob).getFullYear():""),1)])]),_:1}),o(p,null,{default:i(()=>[a("h6",se,[l(e(t(n)("Age at Birth of Child"))+" : ",1),a("span",ne,e(s.patientData.father_dob?t(Q)(s.patientData.dob,s.patientData.father_dob):""),1)])]),_:1}),o(p,null,{default:i(()=>[a("h6",ie,[l(e(t(n)("Age Now"))+" : ",1),a("span",oe,e(s.patientData.father_dob?("calculateAge"in u?u.calculateAge:t(B))(s.patientData.father_dob?s.patientData.father_dob.toString():"1"):""),1)])]),_:1}),o(p,null,{default:i(()=>[a("h6",le,[l(e(t(n)("Education"))+" : ",1),a("span",re,e(s.patientData.father_edu),1)])]),_:1}),o(p,null,{default:i(()=>[a("h6",de,[l(e(t(n)("Work"))+" : ",1),a("span",ce,e(s.patientData.father_work),1)])]),_:1}),a("h6",pe,e(t(n)("Mother Information")),1),o(p,null,{default:i(()=>[a("h6",ue,[l(e(t(n)("Birth Date"))+" : ",1),a("span",me,e(s.patientData.mother_dob?new Date(s.patientData.mother_dob).getFullYear():""),1)])]),_:1}),o(p,null,{default:i(()=>[a("h6",_e,[l(e(t(n)("Age at Birth of Child"))+" : ",1),a("span",he,e(s.patientData.mother_dob?t(Q)(s.patientData.dob,s.patientData.mother_dob):""),1)])]),_:1}),o(p,null,{default:i(()=>[a("h6",fe,[l(e(t(n)("Age Now"))+" : ",1),a("span",be,e(s.patientData.mother_dob?("calculateAge"in u?u.calculateAge:t(B))(s.patientData.mother_dob?s.patientData.mother_dob.toString():"1"):""),1)])]),_:1}),o(p,null,{default:i(()=>[a("h6",De,[l(e(t(n)("Education"))+" : ",1),a("span",xe,e(s.patientData.mother_edu),1)])]),_:1}),o(p,null,{default:i(()=>[a("h6",ye,[l(e(t(n)("Work"))+" : ",1),a("span",ge,e(s.patientData.mother_work),1)])]),_:1}),ve,o(p,null,{default:i(()=>[a("h6",ke,[l(e(t(n)("Siblings"))+" : ",1),a("span",Ve,e(s.patientData.siblings),1)])]),_:1}),o(p,null,{default:i(()=>[a("h6",we,[l(e(t(n)("Order in Siblings"))+" : ",1),a("span",$e,e(t(G)(s.patientData.order)!=="nullth"?t(G)(s.patientData.order):""),1)])]),_:1}),Ce])):y("",!0),o(p,null,{default:i(()=>[a("h6",Ae,[l(e(t(n)("Notes"))+" : ",1),a("span",Te,e(s.patientData.notes),1)])]),_:1})]),_:1}),Ie,t(b)?(r(),h(rt,{key:0,multiple:""},{default:i(()=>[(r(!0),f(A,null,E(t(b),d=>(r(),h(dt,null,{default:i(()=>[o(ct,null,{default:i(()=>[l(e(d.name),1)]),_:2},1024),(r(!0),f(A,null,E(d.data,(C,x)=>(r(),h(pt,null,{default:i(()=>[l(e(x)+": "+e(C),1)]),_:2},1024))),256))]),_:2},1024))),256))]),_:1})):y("",!0)]),_:1}),o(F,{class:"text-center"},{default:i(()=>[o(T,{block:"",onClick:D[0]||(D[0]=d=>v.value=!t(v))},{default:i(()=>[l(e(t(n)("Edit Patient Details")),1)]),_:1})]),_:1})]),_:1})):y("",!0)]),_:1}),o(nt,{"patient-data":t(V),"is-drawer-open":t(v),"onUpdate:isDrawerOpen":D[1]||(D[1]=d=>R(v)?v.value=d:null)},null,8,["patient-data","is-drawer-open"])]),_:1}),o(m,{isDialogVisible:t(g),"onUpdate:isDialogVisible":D[2]||(D[2]=d=>R(g)?g.value=d:null),"user-data":t(c),onSubmit:D[3]||(D[3]=()=>{})},null,8,["isDialogVisible","user-data"])],64)}}}),Se=xt(Ne,[["__scopeId","data-v-83728cc3"]]),Pe={class:"d-flex justify-space-between align-center gap-2 flex-wrap mb-2"},Ee={class:"app-timeline-title"},Be={class:"app-timeline-meta"},Fe={key:0,class:"d-flex justify-space-between align-center gap-2 flex-wrap mb-2"},Oe={class:"app-timeline-text mt-1"},Re={class:"text-warning"},He={class:"app-timeline-meta"},Le={key:1,class:"app-timeline-text mt-1"},je={class:"text-warning"},ze={key:2,class:"app-timeline-text mt-1"},Ue={class:"text-warning"},We={class:"app-timeline-text mt-1"},Ye={class:"text-warning"},Me={class:"app-timeline-text mt-1"},qe={class:"text-warning"},Ge=H({__name:"visitTimeLine",props:{patientData:{}},setup($){const{t:n}=U(),g=X("userData").value,v=J();return K(),(s,c)=>(r(),h(Z,{title:t(n)("Visits Timeline")},{default:i(()=>[o(F,null,{default:i(()=>{var V,_,b,u;return[((V=t(g))==null?void 0:V.role)==="DOCTOR"&&((b=(_=s.patientData)==null?void 0:_.visits)!=null&&b[s.patientData.visits.length-1])&&!s.patientData.visits[s.patientData.visits.length-1].active||((u=s.patientData.visits)==null?void 0:u.length)===0?(r(),h(T,{key:0,variant:"outlined",class:"mb-5",onClick:c[0]||(c[0]=D=>t(v).push({name:"patients-visits-new-id",params:{id:s.patientData.id},query:{dob:s.patientData.dob,name:s.patientData.name}}))},{default:i(()=>[l(e(t(n)("New Visit")),1)]),_:1})):y("",!0),o(yt,{side:"end",align:"start","line-inset":"8","truncate-line":"start",density:"compact"},{default:i(()=>{var D;return[(r(!0),f(A,null,E((D=s.patientData.visits)==null?void 0:D.slice().reverse(),(m,d)=>(r(),h(gt,{"dot-color":"primary",size:"x-small"},{default:i(()=>{var C,x,I,N,S,k,W,Y,M,q;return[a("div",Pe,[a("span",Ee,e(("getVisitNumber"in s?s.getVisitNumber:t(at))(s.patientData.visits,d))+" visit ",1),a("span",Be,e(t(vt)(new Date(m.createdAt),{addSuffix:!0})),1)]),m.follow_up?y("",!0):(r(),f("div",Fe,[a("div",Oe,[a("span",Re,e(t(n)("Chief Complaint"))+": ",1),a("li",null,e((C=m.chief_complaint)==null?void 0:C.Complaint)+" for "+e((x=m.chief_complaint)==null?void 0:x.Duration),1)]),a("span",He,e(("formatDate"in s?s.formatDate:t(et))(m.createdAt)),1)])),m.follow_up?(r(),f("div",ze,[a("span",Ue,e(t(n)("Follow up notes"))+": ",1),a("li",null,e((N=m.notes)==null?void 0:N.Notes),1)])):(r(),f("div",Le,[a("span",je,e(t(n)("Diagnosis"))+": ",1),a("li",null,e((I=m.ddx)==null?void 0:I["Differential Diagnosis"]),1)])),a("div",We,[a("span",Ye,e(t(n)("Management"))+": ",1),(r(!0),f(A,null,E((S=m.management)==null?void 0:S.managements,w=>(r(),f("li",null,e(w.Name)+" "+e(w.Form)+" "+e(w.Dose)+" "+e(w.Use),1))),256))]),a("div",Me,[a("span",qe,e(t(n)("Doctor"))+": ",1),a("li",null,e((k=m.doctor)==null?void 0:k.fullName)+" "+e(((W=m.clinic)==null?void 0:W.name)==="autism"?t(n)("in NCA"):""),1)]),m.active||((Y=t(g))==null?void 0:Y.id)===((M=m.doctor)==null?void 0:M.id)?(r(),h(T,{key:3,variant:"tonal",class:"d-inline-flex align-center mt-4 me-2",onClick:w=>t(v).push({name:"patients-visits-edit-id",params:{id:s.patientData.id},query:{visit:m.id}})},{default:i(()=>{var w;return[l(e(((w=t(g))==null?void 0:w.role)==="DOCTOR"?t(n)("Edit Visit"):t(n)("Therapy Notes")),1)]}),_:2},1032,["onClick"])):y("",!0),((q=t(g))==null?void 0:q.role)!=="PSYCHOLOGIST"?(r(),h(T,{key:4,variant:"tonal",class:"d-inline-flex align-center mt-4 me-2",onClick:w=>t(v).push({name:"patients-visits-open-id",params:{id:s.patientData.id},query:{visit:m.id,dob:s.patientData.dob,name:s.patientData.name}})},{default:i(()=>[l(e(t(n)("Summary")),1)]),_:2},1032,["onClick"])):y("",!0)]}),_:2},1024))),256))]}),_:1})]}),_:1})]),_:1},8,["title"]))}}),Qe=H({__name:"CustomerTabVisits",props:{patientData:{}},setup($){return(n,g)=>(r(),h(z,null,{default:i(()=>[o(O,null,{default:i(()=>[o(Ge,{patientData:n.patientData},null,8,["patientData"])]),_:1})]),_:1}))}}),Xe={class:"d-flex justify-space-between"},Je={class:"d-flex justify-space-between align-center flex-wrap gap-y-4 mb-6"},Ke={class:"text-h4 mb-1"},Ze={class:"text-body-1"},ta={key:0,class:"d-flex gap-4"},ea={key:1},ms=H({__name:"[id]",async setup($){let n,g;const v=K(),s=J(),{t:c}=U(),V=v.params,_=X("userData").value,b=P(),u=P(null),D=[{title:c("Visits"),icon:"tabler-file"}],{data:m}=([n,g]=ft(()=>kt(`/patient/${_==null?void 0:_.id}/${V.id}`)),n=await n,g(),n),d=async()=>{if(_)try{const C=await Vt(`/patient-delete/${_==null?void 0:_.id}/${V.id}`,{method:"DELETE",onResponseError({response:x}){console.log(x)}});s.push("/patients")}catch(C){console.error(C)}};return b.value=m.value,(C,x)=>{var I,N,S;return r(),f(A,null,[a("div",Xe,[o(T,{variant:"flat",color:"warning",class:"mb-5",onClick:x[0]||(x[0]=k=>t(s).push("/patients"))},{default:i(()=>[l(e(t(c)("Back")),1)]),_:1})]),a("div",null,[a("div",Je,[a("div",null,[a("h4",Ke,e(t(c)("Patient ID"))+" #"+e(t(V).id),1),a("div",Ze,e(t(c)("Added At"))+": "+e((I=t(b))!=null&&I.createdAt?new Date((N=t(b))==null?void 0:N.createdAt).toLocaleString():t(c)("Cannot Display Date")),1)]),((S=t(_))==null?void 0:S.role)==="ADMIN"?(r(),f("div",ta,[o(T,{onClick:d,variant:"tonal",color:"error"},{default:i(()=>[l(e(t(c)("Delete Patient")),1)]),_:1})])):y("",!0)]),t(b)?(r(),h(z,{key:0},{default:i(()=>[t(b)?(r(),h(O,{key:0,cols:"12",md:"5",lg:"4"},{default:i(()=>[o(Se,{"patient-data":t(b)},null,8,["patient-data"])]),_:1})):y("",!0),o(O,{cols:"12",md:"7",lg:"8"},{default:i(()=>[o(wt,{modelValue:t(u),"onUpdate:modelValue":x[1]||(x[1]=k=>R(u)?u.value=k:null),class:"v-tabs-pill mb-3 disable-tab-transition"},{default:i(()=>[(r(),f(A,null,E(D,k=>o($t,{key:k.title},{default:i(()=>[o(bt,{size:"20",start:"",icon:k.icon},null,8,["icon"]),l(" "+e(k.title),1)]),_:2},1024)),64))]),_:1},8,["modelValue"]),o(Ct,{modelValue:t(u),"onUpdate:modelValue":x[2]||(x[2]=k=>R(u)?u.value=k:null),class:"disable-tab-transition",touch:!1},{default:i(()=>[o(At,null,{default:i(()=>[o(Qe,{patientData:t(b)},null,8,["patientData"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):(r(),f("div",ea,[o(Tt,{type:"error",variant:"tonal"},{default:i(()=>[l(e(`${t(c)("patient with ID")} ${t(V).id} ${t(c)("not found!")}`),1)]),_:1})]))])],64)}}});export{ms as default};
