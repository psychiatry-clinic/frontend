import{a as De}from"./formatters-DocrwTSm.js";import{r as xe,d as J,p as Be}from"./validators-DR7cptrM.js";import{c as oe,b as Ue,o as ee,a as $e,d as le}from"./suggestions-CRSFcqbD.js";import{d as Ae,b8 as Ee,k as Oe,r as s,w as Y,o as i,g as n,f as o,b as t,n as e,b2 as Re,aX as c,c as x,x as y,e as f,z as d,i as $,F as A,v as V,aj as ue}from"./index-CqJJabLp.js";import{_ as Te}from"./AppTextarea.vue_vue_type_script_setup_true_lang-B6nj09VG.js";import{_ as Ne}from"./AppAutocomplete.vue_vue_type_script_setup_true_lang-BoG5IcDj.js";import{_ as Fe}from"./AppDateTimePicker.vue_vue_type_style_index_0_lang-BJRshRpy.js";import{_ as Ie}from"./AppTextField.vue_vue_type_script_setup_true_lang-CFvqqHaX.js";import{_ as Pe}from"./CustomRadios-LMJ3gTyN.js";import{_ as ze}from"./AppDrawerHeaderSection.vue_vue_type_script_setup_true_lang-DdaBJFLj.js";import{P as Me}from"./vue3-perfect-scrollbar.esm-BIGpwqE4.js";import{$ as qe}from"./api-C7PgN4vP.js";import{a as ie,c as ne}from"./myFormat-D_0w4-pK.js";import{B as We}from"./BlobServiceClient-CR2xPX03.js";import{V as He}from"./VDivider-Bx7Mi4yb.js";import{V as je}from"./VCardText-BQH_thrU.js";import{V as Ke}from"./VForm-CCjN0UHi.js";import{V as Ze,a as r}from"./VRow-BYyta6-B.js";import{V as Ge}from"./VAvatar-CAX_EKAS.js";import{V as Qe}from"./VImg-qkwR4LI4.js";import{V as L,a as p}from"./VRadioGroup-DMOmboOd.js";import{V as re}from"./VAlert-CYuMgUy5.js";import{V as Ye}from"./VCard-JHeg0EIG.js";import{V as Le}from"./VNavigationDrawer-DYI9yWTc.js";import{d as de}from"./differenceInYears-BdTDs0wt.js";import{V as E}from"./VChip-CgY9iG6U.js";const Xe=f("h6",{class:"text-h6 text-primary"},"Image",-1),Je={key:1,class:"text-5xl font-weight-medium"},el=f("label",{for:"picture"},"Take a picture using back facing camera:",-1),ll=f("h6",{class:"text-h6 text-primary"},"Basic Information",-1),al=f("span",{style:{"line-height":"15px",color:`rgba(\r
                          var(--v-theme-on-surface),\r
                          var(--v-high-emphasis-opacity)\r
                        )`},class:"v-label mb-1 text-body-2 text-black"},"Gender*",-1),tl=f("div",{class:"text-body-1 text-primary font-weight-medium text-high-emphasis"}," Demographic Information ",-1),ol={class:"mt-5"},ul={class:"mt-5"},il={class:"mt-5"},nl=f("div",{class:"text-body-1 text-primary font-weight-medium text-high-emphasis"}," Parents Relationship ",-1),rl=f("div",{class:"text-body-1 text-primary font-weight-medium text-high-emphasis"}," Siblings ",-1),dl=f("div",{class:"text-body-1 text-primary font-weight-medium text-high-emphasis"}," Order in Siblings ",-1),sl=f("div",{class:"text-body-1 text-primary font-weight-medium text-high-emphasis"}," Father Information ",-1),ml=f("span",{style:{"line-height":"15px",color:`rgba(\r
                      var(--v-theme-on-surface),\r
                      var(--v-high-emphasis-opacity)\r
                    )`},class:"v-label mb-1 text-body-2 text-black"},"Father Age at Birth of Child",-1),cl={class:"mt-5"},pl={class:"mt-5"},fl=f("div",{class:"text-body-1 text-primary font-weight-medium text-high-emphasis"}," Mother Information ",-1),vl=f("span",{style:{"line-height":"15px",color:`rgba(\r
                      var(--v-theme-on-surface),\r
                      var(--v-high-emphasis-opacity)\r
                    )`},class:"v-label mb-1 text-body-2 text-black"},"Mother Age at Birth of Child",-1),hl={class:"mt-5"},bl={class:"mt-5"},Vl=f("div",{class:"text-body-1 text-primary font-weight-medium text-high-emphasis"}," Notes ",-1),yl={class:"d-flex gap-4 justify-start pb-10"},_l="https://dakakean.blob.core.windows.net/psychiatry?sp=racwl&st=2024-05-02T06:46:34Z&se=2024-05-10T14:46:34Z&spr=https&sv=2022-11-02&sr=c&sig=oTStvDHsKPQiKZ4%2Bniqpd7Dt9w514Y52T6kIQlC5490%3D",kl="psychiatry",Ql=Ae({__name:"ECommerceAddCustomerDrawer",props:{isDrawerOpen:{type:Boolean}},emits:["update:isDrawerOpen"],setup(se,{emit:me}){const ce=new We(_l).getContainerClient(kl),_=Ee("userData").value,pe=async()=>{const u=document.getElementById("picture");try{const a=[];if(u&&u.files){for(const G of u.files){const X=ce.getBlockBlobClient(G.name);a.push(X.uploadBrowserData(G))}await Promise.all(a),O.value=(await a[0])._response.request.url}}catch(a){console.log(a)}},fe=se,ae=me,ve=Oe(),he=u=>{ae("update:isDrawerOpen",u)},be=s({message:void 0}),Ve=[{title:"Child",value:"child"},{title:"Adult",value:"adult"}],m=s("");(_==null?void 0:_.clinic)==="Kadhimiya"?m.value="adult":m.value="child";const te=s(),O=s(),R=s(),k=s("2024-01-01"),T=s(),P=s(),z=s("Male"),M=s(),N=s(),g=s(),B=s(),C=s(),F=s(),U=s(),w=s(),S=s(),q=s(),v=s(),W=s(),ye=s(),H=s(),j=s(),K=s(),I=s(),Z=s(""),D=s(),b=s(),_e=()=>{var u;(u=te.value)==null||u.reset(),ae("update:isDrawerOpen",!1)},ke=`/patients-new/${_==null?void 0:_.id}`,ge=async()=>{if(_)try{const u=await qe(ke,{method:"POST",body:{doctor:_.id,name:R.value,dob:T.value?ie(Ce(T.value)):ie(k.value),gender:z.value,phone:M.value,avatar:O.value,father_dob:new Date(N.value,0,1),father_age:+B.value,father_work:C.value,father_edu:g.value,mother_dob:new Date(F.value,0,1),mother_age:+U.value,mother_work:S.value,mother_edu:w.value,related:q.value,siblings:+v.value,order:+W.value,familyHx:ye.value,notes:H.value,marital_status:j.value,children:K.value,residence:I.value,neighborhood:Z.value,occupation:D.value,education:b.value},onResponseError({response:a}){be.value=a._data}});console.log(u.id),ve.push(`/patients/${u.id}`)}catch(u){console.error(u)}};Y(k,u=>{u&&(P.value=ne(u))}),Y(T,u=>{u&&u.toString().length===4&&(P.value=ne(new Date(u).toString()))}),Y(N,u=>{if(u.length===4){const a=new Date(N.value,0,1);B.value=de(k.value,a)}else B.value=null}),Y(F,u=>{if(u.length===4){const a=new Date(F.value,0,1);U.value=de(k.value,a)}else U.value=null});const Ce=u=>{const a=new Date(u);return a.setMonth(0),a.setDate(1),a.toISOString().slice(0,10)};return(u,a)=>{const G=ze,X=Pe,h=Ie,we=Fe,Q=Ne,Se=Te;return i(),n(Le,{"model-value":fe.isDrawerOpen,temporary:"",location:"end",width:"370",border:"none","onUpdate:modelValue":he},{default:o(()=>[t(G,{title:"Add a Patient",onCancel:a[0]||(a[0]=l=>u.$emit("update:isDrawerOpen",!1))}),t(He),t(Ye,{flat:""},{default:o(()=>[t(e(Me),{options:{wheelPropagation:!1},class:"h-100"},{default:o(()=>[t(je,{style:{"block-size":"calc(100vh - 5rem)"}},{default:o(()=>[t(e(Ke),{ref_key:"refVForm",ref:te,onSubmit:a[25]||(a[25]=Re(()=>{},["prevent"]))},{default:o(()=>[t(Ze,{class:"mb-2"},{default:o(()=>[t(r,null,{default:o(()=>[t(X,{"selected-radio":e(m),"onUpdate:selectedRadio":a[1]||(a[1]=l=>c(m)?m.value=l:null),"radio-content":Ve,"grid-column":{sm:"6",cols:"12"}},null,8,["selected-radio"])]),_:1}),t(r,{cols:"12"},{default:o(()=>[Xe]),_:1}),t(r,{cols:"12"},{default:o(()=>[t(Ge,{circle:"",size:100,color:e(O)?"undefined":"secondary",variant:e(O)?void 0:"tonal"},{default:o(()=>[e(O)?(i(),n(Qe,{key:0,src:e(O),style:{"object-fit":"cover"}},null,8,["src"])):(i(),x("span",Je,y(("avatarText"in u?u.avatarText:e(De))(e(R))),1))]),_:1},8,["color","variant"])]),_:1}),t(r,{cols:"12"},{default:o(()=>[el,f("input",{type:"file",id:"picture",name:"picture",accept:"image/*",capture:"environment",onChange:pe},null,32)]),_:1}),t(r,{cols:"12"},{default:o(()=>[ll]),_:1}),t(r,{cols:"12"},{default:o(()=>[t(h,{modelValue:e(R),"onUpdate:modelValue":a[2]||(a[2]=l=>c(R)?R.value=l:null),label:"Name*",rules:["requiredValidator"in u?u.requiredValidator:e(xe)],placeholder:""},null,8,["modelValue","rules"])]),_:1}),e(m)==="child"?(i(),n(r,{key:0,cols:"12"},{default:o(()=>[t(we,{modelValue:e(k),"onUpdate:modelValue":a[3]||(a[3]=l=>c(k)?k.value=l:null),label:"Birth Date*",placeholder:"Select date"},null,8,["modelValue"])]),_:1})):d("",!0),e(m)==="Adult"?(i(),n(r,{key:1,cols:"12"},{default:o(()=>[t(h,{modelValue:e(T),"onUpdate:modelValue":a[4]||(a[4]=l=>c(T)?T.value=l:null),label:"Birth Date*",placeholder:"",maxlength:"4",rules:["dateOfBirthValidator"in u?u.dateOfBirthValidator:e(J)]},null,8,["modelValue","rules"])]),_:1})):d("",!0),t(r,{cols:"12"},{default:o(()=>[t(h,{disabled:"",modelValue:e(P),"onUpdate:modelValue":a[5]||(a[5]=l=>c(P)?P.value=l:null),label:"Age (Automatic)",placeholder:"",maxlength:"4"},null,8,["modelValue"])]),_:1}),t(r,{cols:"12"},{default:o(()=>[t(L,{modelValue:e(z),"onUpdate:modelValue":a[6]||(a[6]=l=>c(z)?z.value=l:null),inline:""},{label:o(()=>[al]),default:o(()=>[t(p,{label:"Male",value:"Male"}),t(p,{label:"Female",value:"Female"})]),_:1},8,["modelValue"])]),_:1}),t(r,{cols:"12"},{default:o(()=>[t(h,{modelValue:e(M),"onUpdate:modelValue":a[7]||(a[7]=l=>c(M)?M.value=l:null),label:"Phone",placeholder:"",rules:["phoneNumberValidator"in u?u.phoneNumberValidator:e(Be)],maxlength:"11"},null,8,["modelValue","rules"])]),_:1}),t(r,null,{default:o(()=>[tl]),_:1}),e(m)==="adult"?(i(),n(r,{key:2,cols:"12"},{default:o(()=>[t(Q,{modelValue:e(j),"onUpdate:modelValue":a[8]||(a[8]=l=>c(j)?j.value=l:null),label:"Marital Status",placeholder:"Select Status",items:["Married","Divorced","Single","Separated","Widow"]},null,8,["modelValue"])]),_:1})):d("",!0),e(m)==="adult"?(i(),n(r,{key:3,cols:"12"},{default:o(()=>[t(h,{modelValue:e(K),"onUpdate:modelValue":a[9]||(a[9]=l=>c(K)?K.value=l:null),placeholder:"Write a Number",label:"Children"},null,8,["modelValue"])]),_:1})):d("",!0),t(r,{cols:"12"},{default:o(()=>[t(Q,{modelValue:e(I),"onUpdate:modelValue":a[10]||(a[10]=l=>c(I)?I.value=l:null),label:"Residence",placeholder:"Select Residence",items:"cities"in u?u.cities:e(oe)},null,8,["modelValue","items"]),f("div",ol,[(i(!0),x(A,null,$("cities"in u?u.cities:e(oe),l=>(i(),n(E,{class:"me-2 mb-2",size:"x-small",onClick:()=>{I.value=l}},{default:o(()=>[V(y(l),1)]),_:2},1032,["onClick"]))),256))])]),_:1}),e(I)==="بغداد"?(i(),n(r,{key:4,cols:"12"},{default:o(()=>[t(Q,{modelValue:e(Z),"onUpdate:modelValue":a[11]||(a[11]=l=>c(Z)?Z.value=l:null),label:"Neighborhood",placeholder:"Select",items:"baghdadRegions"in u?u.baghdadRegions:e(Ue)},null,8,["modelValue","items"])]),_:1})):d("",!0),e(m)==="adult"?(i(),n(r,{key:5,cols:"12"},{default:o(()=>[t(h,{modelValue:e(D),"onUpdate:modelValue":a[12]||(a[12]=l=>c(D)?D.value=l:null),placeholder:"Write an Occupation",label:"Occupation"},null,8,["modelValue"]),f("div",ul,[(i(!0),x(A,null,$("occupationSuggestions"in u?u.occupationSuggestions:e(ee),l=>(i(),n(E,{class:"me-2 mb-2",size:"x-small",onClick:()=>{D.value=e(D)===""||e(D)===void 0?l:`${e(D)}, ${l}`}},{default:o(()=>[V(y(l),1)]),_:2},1032,["onClick"]))),256))])]),_:1})):d("",!0),e(m)==="child"?(i(),n(r,{key:6,cols:"12"},{default:o(()=>[t(h,{modelValue:e(b),"onUpdate:modelValue":a[13]||(a[13]=l=>c(b)?b.value=l:null),label:"Education"},null,8,["modelValue"]),f("div",il,[(i(!0),x(A,null,$("childEducation"in u?u.childEducation:e($e),l=>(i(),n(E,{class:"me-2 mb-2",size:"x-small",onClick:()=>{b.value=e(b)===""||e(b)===void 0?l:`${e(b)}, ${l}`}},{default:o(()=>[V(y(l),1)]),_:2},1032,["onClick"]))),256))])]),_:1})):d("",!0),e(m)==="adult"?(i(),n(r,{key:7,cols:"12"},{default:o(()=>[t(Q,{modelValue:e(b),"onUpdate:modelValue":a[14]||(a[14]=l=>c(b)?b.value=l:null),label:"Education",placeholder:"Select Education",items:"adultEducation"in u?u.adultEducation:e(le)},null,8,["modelValue","items"])]),_:1})):d("",!0),e(m)==="child"?(i(),n(r,{key:8},{default:o(()=>[nl]),_:1})):d("",!0),e(m)==="child"?(i(),n(r,{key:9,cols:"12"},{default:o(()=>[t(L,{modelValue:e(q),"onUpdate:modelValue":a[15]||(a[15]=l=>c(q)?q.value=l:null),inline:""},{default:o(()=>[t(p,{label:"Related",value:!0}),t(p,{label:"Not Related",value:!1})]),_:1},8,["modelValue"])]),_:1})):d("",!0),e(m)==="child"?(i(),n(r,{key:10},{default:o(()=>[rl]),_:1})):d("",!0),e(m)==="child"?(i(),n(r,{key:11,cols:"12"},{default:o(()=>[t(L,{modelValue:e(v),"onUpdate:modelValue":a[16]||(a[16]=l=>c(v)?v.value=l:null),inline:""},{default:o(()=>[t(p,{label:"0",value:0}),t(p,{label:"1",value:1}),t(p,{label:"2",value:2}),t(p,{label:"3",value:3}),t(p,{label:"4",value:4}),t(p,{label:"5",value:5}),t(p,{label:"6",value:6}),t(p,{label:"7",value:7}),t(p,{label:"8",value:8})]),_:1},8,["modelValue"])]),_:1})):d("",!0),e(v)>=1?(i(),n(r,{key:12},{default:o(()=>[dl]),_:1})):d("",!0),t(r,{cols:"12"},{default:o(()=>[t(L,{modelValue:e(W),"onUpdate:modelValue":a[17]||(a[17]=l=>c(W)?W.value=l:null),inline:""},{default:o(()=>[e(v)>=1?(i(),n(p,{key:0,label:"1st",value:1})):d("",!0),e(v)>=1?(i(),n(p,{key:1,label:"2nd",value:2})):d("",!0),e(v)>1?(i(),n(p,{key:2,label:"3rd",value:3})):d("",!0),e(v)>2?(i(),n(p,{key:3,label:"4th",value:4})):d("",!0),e(v)>3?(i(),n(p,{key:4,label:"5th",value:5})):d("",!0),e(v)>4?(i(),n(p,{key:5,label:"6th",value:6})):d("",!0),e(v)>5?(i(),n(p,{key:6,label:"7th",value:7})):d("",!0),e(v)>6?(i(),n(p,{key:7,label:"8th",value:8})):d("",!0),e(v)>7?(i(),n(p,{key:8,label:"9th",value:8})):d("",!0)]),_:1},8,["modelValue"])]),_:1}),e(m)==="child"?(i(),n(r,{key:13},{default:o(()=>[sl]),_:1})):d("",!0),e(m)==="child"?(i(),n(r,{key:14,cols:"12"},{default:o(()=>[t(h,{modelValue:e(N),"onUpdate:modelValue":a[18]||(a[18]=l=>c(N)?N.value=l:null),label:"Date of Birth",rules:["dateOfBirthValidator"in u?u.dateOfBirthValidator:e(J)],placeholder:"",maxlength:"4"},null,8,["modelValue","rules"])]),_:1})):d("",!0),e(m)==="child"&&e(B)?(i(),n(r,{key:15,cols:"12"},{default:o(()=>[ml,t(re,{density:"compact",color:e(B)>35?"error":"success",variant:"tonal"},{default:o(()=>[V(y(e(B)?e(B):"0"),1)]),_:1},8,["color"])]),_:1})):d("",!0),e(m)==="child"?(i(),n(r,{key:16,cols:"12"},{default:o(()=>[t(h,{modelValue:e(g),"onUpdate:modelValue":a[19]||(a[19]=l=>c(g)?g.value=l:null),label:"Education",placeholder:""},null,8,["modelValue"]),f("div",cl,[(i(!0),x(A,null,$("adultEducation"in u?u.adultEducation:e(le),l=>(i(),n(E,{class:"me-2 mb-2",size:"x-small",onClick:()=>{g.value=e(g)===""||e(g)===void 0?l:`${e(g)}, ${l}`}},{default:o(()=>[V(y(l),1)]),_:2},1032,["onClick"]))),256))])]),_:1})):d("",!0),e(m)==="child"?(i(),n(r,{key:17,cols:"12"},{default:o(()=>[t(h,{modelValue:e(C),"onUpdate:modelValue":a[20]||(a[20]=l=>c(C)?C.value=l:null),label:"Work",placeholder:""},null,8,["modelValue"]),f("div",pl,[(i(!0),x(A,null,$("occupationSuggestions"in u?u.occupationSuggestions:e(ee),l=>(i(),n(E,{class:"me-2 mb-2",size:"x-small",onClick:()=>{C.value=e(C)===""||e(C)===void 0?l:`${e(C)}, ${l}`}},{default:o(()=>[V(y(l),1)]),_:2},1032,["onClick"]))),256))])]),_:1})):d("",!0),e(m)==="child"?(i(),n(r,{key:18},{default:o(()=>[fl]),_:1})):d("",!0),e(m)==="child"?(i(),n(r,{key:19,cols:"12"},{default:o(()=>[t(h,{modelValue:e(F),"onUpdate:modelValue":a[21]||(a[21]=l=>c(F)?F.value=l:null),label:"Date of Birth",rules:["dateOfBirthValidator"in u?u.dateOfBirthValidator:e(J)],placeholder:"",maxlength:"4"},null,8,["modelValue","rules"])]),_:1})):d("",!0),e(m)==="child"&&e(U)?(i(),n(r,{key:20,cols:"12"},{default:o(()=>[vl,t(re,{density:"compact",color:e(U)>35?"error":"success",variant:"tonal"},{default:o(()=>[V(y(e(U)?e(U):"0"),1)]),_:1},8,["color"])]),_:1})):d("",!0),e(m)==="child"?(i(),n(r,{key:21,cols:"12"},{default:o(()=>[t(h,{modelValue:e(w),"onUpdate:modelValue":a[22]||(a[22]=l=>c(w)?w.value=l:null),label:"Education",placeholder:""},null,8,["modelValue"]),f("div",hl,[(i(!0),x(A,null,$("adultEducation"in u?u.adultEducation:e(le),l=>(i(),n(E,{class:"me-2 mb-2",size:"x-small",onClick:()=>{w.value=e(w)===""||e(w)===void 0?l:`${e(w)}, ${l}`}},{default:o(()=>[V(y(l),1)]),_:2},1032,["onClick"]))),256))])]),_:1})):d("",!0),e(m)==="child"?(i(),n(r,{key:22,cols:"12"},{default:o(()=>[t(h,{modelValue:e(S),"onUpdate:modelValue":a[23]||(a[23]=l=>c(S)?S.value=l:null),label:"Work",placeholder:""},null,8,["modelValue"]),f("div",bl,[(i(!0),x(A,null,$("occupationSuggestions"in u?u.occupationSuggestions:e(ee),l=>(i(),n(E,{class:"me-2 mb-2",size:"x-small",onClick:()=>{S.value=e(S)===""||e(S)===void 0?l:`${e(S)}, ${l}`}},{default:o(()=>[V(y(l),1)]),_:2},1032,["onClick"]))),256))])]),_:1})):d("",!0),t(r,null,{default:o(()=>[Vl]),_:1}),t(r,{cols:"12"},{default:o(()=>[t(Se,{modelValue:e(H),"onUpdate:modelValue":a[24]||(a[24]=l=>c(H)?H.value=l:null)},null,8,["modelValue"])]),_:1}),t(r,{cols:"12"},{default:o(()=>[f("div",yl,[t(ue,{type:"submit",color:"primary",disabled:!e(R)||!e(k),onClick:ge},{default:o(()=>[V(" Add ")]),_:1},8,["disabled"]),t(ue,{color:"error",variant:"tonal",onClick:_e},{default:o(()=>[V(" Discard ")]),_:1})])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}});export{Ql as _};
