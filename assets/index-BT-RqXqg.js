import{f as Me}from"./formatters-DocrwTSm.js";import{d as ne,r as C,a as o,o as f,g as B,f as t,b as e,e as l,n as a,ad as K,c as w,z as ae,v as x,i as U,F as D,x as $,w as Ve,a4 as G,s as he,j as be,K as X,L as Y,aj as Q,y as oe,aq as ze,J as Ee}from"./index-DrFL9zv-.js";import{P as ce}from"./vue3-perfect-scrollbar.esm-CxbQKJsC.js";import{_ as ge}from"./TiptapEditor.vue_vue_type_style_index_0_lang-BRbW_iJO.js";import{$ as xe}from"./api-Bb9MUQYX.js";import{u as Le}from"./useResponsiveSidebar-DjyPWmxA.js";import{u as Ie}from"./useApi-CF-Kf49g.js";import{c as Te}from"./createUrl-BtuJzAQ-.js";import"./helpers-BGv4x_9E.js";import"./index-4q8lXpCN.js";import"./index-8BNVS8UP.js";import"./index-B3bPRkoL.js";const De={class:"d-flex align-center"},Be=l("h5",{class:"text-h5"}," Compose Mail ",-1),Ae={class:"d-flex align-center gap-x-2"},Re={class:"px-1 pe-6 py-1"},Ue=l("div",{class:"text-base font-weight-medium text-disabled"}," To: ",-1),Ne={class:"cursor-pointer"},Fe=l("span",null," | ",-1),Pe={key:0},je={class:"px-1 pe-6 py-1"},Oe=l("div",{class:"text-disabled font-weight-medium"}," Cc: ",-1),qe={key:0},He={class:"px-1 pe-6 py-1"},Je=l("div",{class:"text-disabled font-weight-medium"}," Bcc: ",-1),Ke={class:"px-1 pe-6 py-1"},We=l("div",{class:"text-base font-weight-medium text-disabled"}," Subject: ",-1),Ge={class:"d-flex align-center px-6 py-4"},Qe=ne({__name:"ComposeDialog",emits:["close"],setup(E){const L=C(""),m=C(""),S=C(""),M=C(""),A=["Schedule Mail","Save Draft","Sent"],I=C(""),N=C(""),d=C(!1),z=C(!1),g=()=>{m.value=S.value=M.value=""};return(F,_)=>{const R=o("VSpacer"),h=o("IconBtn"),p=o("VCardItem"),u=o("VTextField"),r=o("VDivider"),y=o("VExpandTransition"),O=ge,T=o("VListItem"),j=o("VList"),q=o("VMenu"),Z=o("VBtn"),v=o("VIcon"),ee=o("VCard");return f(),B(ee,{class:"email-compose-dialog",elevation:"10","max-width":"30vw"},{default:t(()=>[e(p,{class:"py-3 px-6"},{default:t(()=>[l("div",De,[Be,e(R),l("div",Ae,[e(h,{size:"small",icon:"tabler-minus",onClick:_[0]||(_[0]=V=>F.$emit("close"))}),e(h,{size:"small",icon:"tabler-x",onClick:_[1]||(_[1]=V=>{F.$emit("close"),g()})})])])]),_:1}),l("div",Re,[e(u,{modelValue:a(m),"onUpdate:modelValue":_[4]||(_[4]=V=>K(m)?m.value=V:null),density:"compact"},{"prepend-inner":t(()=>[Ue]),append:t(()=>[l("span",Ne,[l("span",{onClick:_[2]||(_[2]=V=>d.value=!a(d))},"Cc"),Fe,l("span",{onClick:_[3]||(_[3]=V=>z.value=!a(z))},"Bcc")])]),_:1},8,["modelValue"])]),e(y,null,{default:t(()=>[a(d)?(f(),w("div",Pe,[e(r),l("div",je,[e(u,{modelValue:a(I),"onUpdate:modelValue":_[5]||(_[5]=V=>K(I)?I.value=V:null),density:"compact"},{"prepend-inner":t(()=>[Oe]),_:1},8,["modelValue"])])])):ae("",!0)]),_:1}),e(y,null,{default:t(()=>[a(z)?(f(),w("div",qe,[e(r),l("div",He,[e(u,{modelValue:a(N),"onUpdate:modelValue":_[6]||(_[6]=V=>K(N)?N.value=V:null),density:"compact"},{"prepend-inner":t(()=>[Je]),_:1},8,["modelValue"])])])):ae("",!0)]),_:1}),e(r),l("div",Ke,[e(u,{modelValue:a(S),"onUpdate:modelValue":_[7]||(_[7]=V=>K(S)?S.value=V:null),density:"compact"},{"prepend-inner":t(()=>[We]),_:1},8,["modelValue"])]),e(r),e(O,{modelValue:a(L),"onUpdate:modelValue":_[8]||(_[8]=V=>K(L)?L.value=V:null),placeholder:"Message"},null,8,["modelValue"]),e(r),l("div",Ge,[e(Z,{color:"primary",class:"me-4","append-icon":"tabler-send"},{default:t(()=>[x(" send "),e(q,{activator:"parent"},{default:t(()=>[e(j,null,{default:t(()=>[(f(),w(D,null,U(A,(V,k)=>e(T,{key:k,value:k},{default:t(()=>[x($(V),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1})]),_:1}),e(h,{size:"small"},{default:t(()=>[e(v,{icon:"tabler-paperclip"})]),_:1}),e(R),e(h,{size:"small",class:"me-2"},{default:t(()=>[e(v,{icon:"tabler-dots-vertical"})]),_:1}),e(h,{size:"small",onClick:_[9]||(_[9]=V=>{F.$emit("close"),g()})},{default:t(()=>[e(v,{icon:"tabler-trash"})]),_:1})])]),_:1})}}}),Xe={class:"d-flex flex-column h-100"},Ye={class:"px-6 pb-5 pt-6"},Ze={class:"email-filters py-4"},et=["href","onClick"],tt={class:"text-base"},at={class:"email-labels py-4"},lt=l("div",{class:"text-caption text-disabled mb-4 px-6"}," LABELS ",-1),ot=["href","onClick"],nt={class:"text-body-1 text-high-emphasis"},st=ne({inheritAttrs:!1,__name:"EmailLeftSidebarContent",props:{emailsMeta:{}},emits:["toggleComposeDialogVisibility"],setup(E){const L=E,m=C(0),S=C(0),M=C(0),A=C(0);Ve(()=>L.emailsMeta,d=>{d&&(m.value=d.inbox,S.value=d.draft,M.value=d.spam,A.value=d.star)},{immediate:!0,deep:!0});const I=G(()=>[{title:"Inbox",prependIcon:"tabler-mail",to:{name:"apps-email"},badge:{content:m.value,color:"primary"}},{title:"Sent",prependIcon:"tabler-send",to:{name:"apps-email-filter",params:{filter:"sent"}}},{title:"Draft",prependIcon:"tabler-edit",to:{name:"apps-email-filter",params:{filter:"draft"}},badge:{content:S.value,color:"warning"}},{title:"Starred",prependIcon:"tabler-star",to:{name:"apps-email-filter",params:{filter:"starred"}},badge:{content:A.value,color:"success"}},{title:"Spam",prependIcon:"tabler-alert-circle",to:{name:"apps-email-filter",params:{filter:"spam"}},badge:{content:M.value,color:"error"}},{title:"Trash",prependIcon:"tabler-trash",to:{name:"apps-email-filter",params:{filter:"trashed"}}}]),N=[{title:"Personal",color:"success",to:{name:"apps-email-label",params:{label:"personal"}}},{title:"Company",color:"primary",to:{name:"apps-email-label",params:{label:"company"}}},{title:"Important",color:"warning",to:{name:"apps-email-label",params:{label:"important"}}},{title:"Private",color:"error",to:{name:"apps-email-label",params:{label:"private"}}}];return(d,z)=>{const g=o("VBtn"),F=o("VIcon"),_=o("VSpacer"),R=o("VChip"),h=o("RouterLink");return f(),w("div",Xe,[l("div",Ye,[e(g,{block:"",onClick:z[0]||(z[0]=p=>d.$emit("toggleComposeDialogVisibility"))},{default:t(()=>[x(" Compose ")]),_:1})]),e(a(ce),{options:{wheelPropagation:!1},class:"h-100"},{default:t(()=>[l("ul",Ze,[(f(!0),w(D,null,U(a(I),p=>(f(),B(h,{key:p.title,class:"d-flex align-center cursor-pointer align-center",to:p.to,custom:""},{default:t(({isActive:u,href:r,navigate:y})=>{var O;return[l("li",he(d.$attrs,{href:r,class:[u&&"email-filter-active text-primary","d-flex align-center cursor-pointer"],onClick:y}),[e(F,{icon:p.prependIcon,class:"me-2",size:"20"},null,8,["icon"]),l("div",tt,$(p.title),1),e(_),(O=p.badge)!=null&&O.content?(f(),B(R,{key:0,color:p.badge.color,label:"",size:"small",class:"rounded-xl px-3"},{default:t(()=>{var T;return[x($((T=p.badge)==null?void 0:T.content),1)]}),_:2},1032,["color"])):ae("",!0)],16,et)]}),_:2},1032,["to"]))),128))]),l("ul",at,[lt,(f(),w(D,null,U(N,p=>e(h,{key:p.title,class:"d-flex align-center",to:p.to,custom:""},{default:t(({isActive:u,href:r,navigate:y})=>[l("li",he(d.$attrs,{href:r,class:[u&&"email-label-active text-primary","cursor-pointer d-flex align-center"],onClick:y}),[e(F,{icon:"tabler-circle-filled",color:p.color,class:"me-2",size:"12"},null,8,["color"]),l("div",nt,$(p.title),1)],16,ot)]),_:2},1032,["to"])),64))])]),_:1})])}}}),re=()=>{const E=be(),L=async(d,z)=>{await xe("apps/email",{method:"POST",body:JSON.stringify({ids:d,data:z})})};return{labels:[{title:"personal",color:"success"},{title:"company",color:"primary"},{title:"important",color:"warning"},{title:"private",color:"error"}],resolveLabelColor:d=>d==="personal"?"success":d==="company"?"primary":d==="important"?"warning":d==="private"?"error":"secondary",shallShowMoveToActionFor:d=>d==="trash"?E.params.filter!=="trashed":d==="inbox"?!(E.params.filter===void 0||E.params.filter==="sent"||E.params.filter==="draft"):d==="spam"?!(E.params.filter==="spam"||E.params.filter==="sent"||E.params.filter==="draft"):!1,emailMoveToFolderActions:[{action:"inbox",icon:"tabler-mail"},{action:"spam",icon:"tabler-alert-octagon"},{action:"trash",icon:"tabler-trash"}],moveSelectedEmailTo:async(d,z)=>{const g={};d==="inbox"?(E.params.filter==="trashed"&&(g.isDeleted=!1),g.folder="inbox"):d==="spam"?(E.params.filter==="trashed"&&(g.isDeleted=!1),g.folder="spam"):d==="trash"&&(g.isDeleted=!0),await L(z,g)},updateEmails:L,updateEmailLabels:async(d,z)=>{await xe("/apps/email",{method:"POST",body:{ids:d,label:z}})}}},it={class:"email-view-header d-flex align-center px-5 py-3"},rt={class:"d-flex align-center flex-wrap flex-grow-1 overflow-hidden gap-2"},ct={class:"text-body-1 text-high-emphasis text-truncate"},dt={class:"d-flex flex-wrap gap-2"},pt={class:"d-flex align-center"},mt={class:"email-view-action-bar d-flex align-center text-medium-emphasis px-6 gap-x-1"},ut={class:"d-flex align-center gap-x-1"},ft={class:"d-flex align-start align-sm-center pa-6 gap-x-4"},_t={class:"d-flex flex-wrap flex-grow-1 overflow-hidden"},vt={class:"text-truncate"},ht={class:"text-body-1 text-high-emphasis text-truncate"},xt={class:"text-sm"},Vt={class:"d-flex align-center gap-x-4"},bt={class:"text-disabled text-base"},gt=["innerHTML"],yt=l("span",null,"2 Attachments",-1),$t={class:"text-base"},Ct=l("span",{class:"text-primary cursor-pointer"}," Forward ",-1),kt={class:"text-h6 mb-6"},wt={class:"d-flex justify-end gap-4 pt-2 flex-wrap"},St=ne({__name:"EmailView",props:{email:{},emailMeta:{}},emits:["refresh","navigated","close","trash","unread","read","star","unstar"],setup(E,{emit:L}){const m=E,S=L,M=C(""),A=C(!1),I=C(!0),{updateEmailLabels:N}=re(),{labels:d,resolveLabelColor:z,emailMoveToFolderActions:g,shallShowMoveToActionFor:F,moveSelectedEmailTo:_}=re(),R=p=>{_(p,[m.email.id]),S("refresh"),S("close")},h=async p=>{await N([m.email.id],p),S("refresh")};return(p,u)=>{const r=o("VIcon"),y=o("IconBtn"),O=o("VChip"),T=o("VDivider"),j=o("VTooltip"),q=o("VListItemTitle"),Z=o("VListItem"),v=o("VList"),ee=o("VMenu"),V=o("VBadge"),k=o("VSpacer"),le=o("VImg"),se=o("VAvatar"),te=o("VCardText"),c=o("VCard"),n=ge,P=o("VBtn"),b=o("VNavigationDrawer");return f(),B(b,{temporary:"","model-value":!!m.email,location:"right",scrim:!1,floating:"",class:"email-view"},{default:t(()=>[m.email?(f(),w(D,{key:0},[l("div",it,[e(y,{class:"me-2",onClick:u[0]||(u[0]=i=>p.$emit("close"))},{default:t(()=>[e(r,{size:"22",icon:"tabler-chevron-left",class:"flip-in-rtl"})]),_:1}),l("div",rt,[l("div",ct,$(m.email.subject),1),l("div",dt,[(f(!0),w(D,null,U(m.email.labels,i=>(f(),B(O,{key:i,color:a(z)(i),class:"text-capitalize flex-shrink-0",size:"small",label:!1},{default:t(()=>[x($(i),1)]),_:2},1032,["color"]))),128))])]),l("div",null,[l("div",pt,[e(y,{disabled:!m.emailMeta.hasPreviousEmail,onClick:u[1]||(u[1]=i=>p.$emit("navigated","previous"))},{default:t(()=>[e(r,{icon:"tabler-chevron-left",class:"flip-in-rtl"})]),_:1},8,["disabled"]),e(y,{disabled:!m.emailMeta.hasNextEmail,onClick:u[2]||(u[2]=i=>p.$emit("navigated","next"))},{default:t(()=>[e(r,{icon:"tabler-chevron-right",class:"flip-in-rtl"})]),_:1},8,["disabled"])])])]),e(T),l("div",mt,[X(e(y,{onClick:u[3]||(u[3]=i=>{p.$emit("trash"),p.$emit("close")})},{default:t(()=>[e(r,{icon:"tabler-trash",size:"22"}),e(j,{activator:"parent",location:"top"},{default:t(()=>[x(" Delete Mail ")]),_:1})]),_:1},512),[[Y,!m.email.isDeleted]]),e(y,{onClick:u[4]||(u[4]=Q(i=>{p.$emit("unread"),p.$emit("close")},["stop"]))},{default:t(()=>[e(r,{icon:"tabler-mail",size:"22"}),e(j,{activator:"parent",location:"top"},{default:t(()=>[x(" Mark as Unread ")]),_:1})]),_:1}),e(y,null,{default:t(()=>[e(r,{icon:"tabler-folder",size:"22"}),e(j,{activator:"parent",location:"top"},{default:t(()=>[x(" Move to ")]),_:1}),e(ee,{activator:"parent"},{default:t(()=>[e(v,{density:"compact"},{default:t(()=>[(f(!0),w(D,null,U(a(g),i=>(f(),B(Z,{key:i.title,class:oe([a(F)(i.action)?"d-flex":"d-none","align-center"]),href:"#",onClick:H=>R(i.action)},{prepend:t(()=>[e(r,{icon:i.icon,class:"me-2",size:"20"},null,8,["icon"])]),default:t(()=>[e(q,{class:"text-capitalize"},{default:t(()=>[x($(i.action),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})]),_:1}),e(y,null,{default:t(()=>[e(r,{icon:"tabler-tag",size:"22"}),e(j,{activator:"parent",location:"top"},{default:t(()=>[x(" Label ")]),_:1}),e(ee,{activator:"parent"},{default:t(()=>[e(v,{density:"compact"},{default:t(()=>[(f(!0),w(D,null,U(a(d),i=>(f(),B(Z,{key:i.title,href:"#",onClick:Q(H=>h(i.title),["stop"])},{prepend:t(()=>[e(V,{inline:"",color:a(z)(i.title),dot:""},null,8,["color"])]),default:t(()=>[e(q,{class:"ms-2 text-capitalize"},{default:t(()=>[x($(i.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),e(k),l("div",ut,[e(y,null,{default:t(()=>[e(r,{icon:"tabler-dots-vertical",size:"22"})]),_:1})])]),e(T),e(a(ce),{tag:"div",class:"mail-content-container flex-grow-1 pa-sm-12 pa-6",options:{wheelPropagation:!1}},{default:t(()=>[e(c,{class:"mb-4"},{default:t(()=>[l("div",ft,[e(se,{size:"38"},{default:t(()=>[e(le,{src:m.email.from.avatar,alt:m.email.from.name},null,8,["src","alt"])]),_:1}),l("div",_t,[l("div",vt,[l("div",ht,$(m.email.from.name),1),l("div",xt,$(m.email.from.email),1)]),e(k),l("div",Vt,[l("div",bt,$(new Date(m.email.time).toDateString()),1),l("div",null,[X(e(y,null,{default:t(()=>[e(r,{icon:"tabler-paperclip",size:"22"})]),_:1},512),[[Y,m.email.attachments.length]]),e(y,{color:m.email.isStarred?"warning":"default",onClick:u[5]||(u[5]=i=>{var H;(H=m.email)!=null&&H.isStarred?p.$emit("unstar"):p.$emit("star"),p.$emit("refresh")})},{default:t(()=>[e(r,{icon:m.email.isStarred?"tabler-star-filled":"tabler-star",size:"22"},null,8,["icon"])]),_:1},8,["color"]),e(y,null,{default:t(()=>[e(r,{icon:"tabler-dots-vertical",size:"22"})]),_:1})])])])]),e(T),e(te,null,{default:t(()=>[l("div",{class:"text-base",innerHTML:m.email.message},null,8,gt)]),_:1}),m.email.attachments.length?(f(),w(D,{key:0},[e(T),e(te,{class:"d-flex flex-column gap-y-4 pt-4"},{default:t(()=>[yt,(f(!0),w(D,null,U(m.email.attachments,i=>(f(),w("div",{key:i.fileName,class:"d-flex align-center"},[e(le,{src:i.thumbnail,alt:i.fileName,"aspect-ratio":"1","max-height":"24","max-width":"24",class:"me-2"},null,8,["src","alt"]),l("span",null,$(i.fileName),1)]))),128))]),_:1})],64)):ae("",!0)]),_:1}),X(e(c,null,{default:t(()=>[e(te,{class:"font-weight-medium text-high-emphasis"},{default:t(()=>[l("div",$t,[x(" Click here to "),l("span",{class:"text-primary cursor-pointer",onClick:u[6]||(u[6]=i=>{A.value=!a(A),I.value=!a(I)})}," Reply "),x(" or "),Ct])]),_:1})]),_:1},512),[[Y,a(I)]]),a(A)?(f(),B(c,{key:0},{default:t(()=>[e(te,null,{default:t(()=>{var i;return[l("h6",kt," Reply to "+$((i=p.email)==null?void 0:i.from.name),1),e(n,{modelValue:a(M),"onUpdate:modelValue":u[7]||(u[7]=H=>K(M)?M.value=H:null),placeholder:"Write your message..."},null,8,["modelValue"]),l("div",wt,[e(P,{variant:"text",color:"secondary"},{prepend:t(()=>[e(r,{icon:"tabler-paperclip",class:"text-high-emphasis",size:"16"})]),default:t(()=>[x(" Attachments ")]),_:1}),e(P,{"append-icon":"tabler-send"},{default:t(()=>[x(" Send ")]),_:1})])]}),_:1})]),_:1})):ae("",!0)]),_:1})],64)):ae("",!0)]),_:1},8,["model-value"])}}}),Mt={class:"d-flex align-center"},zt={class:"py-2 px-4 d-flex align-center d-flex gap-x-1"},Et=["onClick"],Lt={class:"text-h6"},It={class:"text-body-2 truncate"},Tt={class:"text-sm text-disabled"},Dt={class:"email-actions d-none"},Bt={class:"py-4 px-5 text-center"},At=l("span",{class:"text-high-emphasis"},"No items found.",-1),Rt=[At],Qt=ne({__name:"index",async setup(E){let L,m;const{isLeftSidebarOpen:S}=Le(),M=be(),{labels:A,resolveLabelColor:I,emailMoveToFolderActions:N,shallShowMoveToActionFor:d,moveSelectedEmailTo:z,updateEmails:g,updateEmailLabels:F}=re(),_=C(!1),R=C(""),h=C([]),{data:p,execute:u}=([L,m]=ze(()=>Ie(Te("/apps/email",{query:{q:R,filter:()=>"filter"in M.params?M.params.filter:void 0,label:()=>"label"in M.params?M.params.label:void 0}}))),L=await L,m(),L),r=G(()=>p.value.emails),y=G(()=>p.value.emailsMeta),O=c=>{const n=h.value.indexOf(c);n===-1?h.value.push(c):h.value.splice(n,1)},T=G(()=>r.value.length&&r.value.length===h.value.length),j=G(()=>!!h.value.length&&r.value.length!==h.value.length),q=G(()=>h.value.every(c=>{var n;return(n=r.value.find(P=>P.id===c))==null?void 0:n.isRead})),Z=()=>{h.value=T.value?[]:r.value.map(c=>c.id)},v=C(null),ee=G(()=>{const c={hasNextEmail:!1,hasPreviousEmail:!1};if(v.value){const n=r.value.findIndex(P=>{var b;return P.id===((b=v.value)==null?void 0:b.id)});c.hasNextEmail=!!r.value[n+1],c.hasPreviousEmail=!!r.value[n-1]}return c}),V=async()=>{await u(),v.value&&(v.value=r.value.find(c=>{var n;return c.id===((n=v.value)==null?void 0:n.id)}))},k=async(c,n=h.value)=>{h.value=[],h.value=[],n.length&&(c==="trash"?await g(n,{isDeleted:!0}):c==="spam"?await g(n,{folder:"spam"}):c==="unread"?await g(n,{isRead:!1}):c==="read"?await g(n,{isRead:!0}):c==="star"?await g(n,{isStarred:!0}):c==="unstar"&&await g(n,{isStarred:!1}),await u(),v.value&&V())},le=async c=>{await z(c,h.value),await u()},se=c=>{if(!v.value)return;const n=r.value.findIndex(b=>{var i;return b.id===((i=v.value)==null?void 0:i.id)}),P=c==="previous"?n-1:n+1;v.value=r.value[P]},te=async c=>{v.value=c,await k("read",[c.id])};return Ve(()=>M.params,()=>{h.value=[]},{deep:!0}),(c,n)=>{const P=o("VNavigationDrawer"),b=o("VIcon"),i=o("IconBtn"),H=o("VTextField"),de=o("VDivider"),pe=o("VCheckbox"),W=o("VTooltip"),me=o("VListItemTitle"),ue=o("VListItem"),fe=o("VList"),_e=o("VMenu"),ye=o("VBadge"),ve=o("VSpacer"),$e=o("VImg"),Ce=o("VAvatar"),ke=o("VCard"),we=o("VMain"),Se=o("VLayout");return f(),B(Se,{style:{"min-block-size":"100%"},class:"email-app-layout"},{default:t(()=>[e(P,{modelValue:a(S),"onUpdate:modelValue":n[1]||(n[1]=s=>K(S)?S.value=s:null),absolute:"",touchless:"",location:"start",temporary:c.$vuetify.display.mdAndDown},{default:t(()=>[e(st,{"emails-meta":a(y),onToggleComposeDialogVisibility:n[0]||(n[0]=s=>_.value=!a(_))},null,8,["emails-meta"])]),_:1},8,["modelValue","temporary"]),e(St,{email:a(v),"email-meta":a(ee),onRefresh:V,onNavigated:se,onClose:n[2]||(n[2]=s=>v.value=null),onRemove:n[3]||(n[3]=s=>k("trash",a(v)?[a(v).id]:[])),onUnread:n[4]||(n[4]=s=>k("unread",a(v)?[a(v).id]:[])),onStar:n[5]||(n[5]=s=>k("star",a(v)?[a(v).id]:[])),onUnstar:n[6]||(n[6]=s=>k("unstar",a(v)?[a(v).id]:[]))},null,8,["email","email-meta"]),e(we,null,{default:t(()=>[e(ke,{flat:"",class:"email-content-list h-100 d-flex flex-column"},{default:t(()=>[l("div",Mt,[e(i,{class:"d-lg-none ms-3",onClick:n[7]||(n[7]=s=>S.value=!0)},{default:t(()=>[e(b,{icon:"tabler-menu-2"})]),_:1}),e(H,{modelValue:a(R),"onUpdate:modelValue":n[8]||(n[8]=s=>K(R)?R.value=s:null),density:"default",class:"email-search px-sm-2 flex-grow-1 py-1",placeholder:"Search mail"},{"prepend-inner":t(()=>[e(b,{icon:"tabler-search",size:"24",class:"me-1 text-medium-emphasis"})]),_:1},8,["modelValue"])]),e(de),l("div",zt,[e(pe,{"model-value":a(T),indeterminate:a(j),"onUpdate:modelValue":Z},null,8,["model-value","indeterminate"]),l("div",{class:"w-100 d-flex align-center action-bar-actions gap-x-1",style:Ee({visibility:a(j)||a(T)?void 0:"hidden"})},[X(e(i,{onClick:n[9]||(n[9]=s=>k("trash"))},{default:t(()=>[e(b,{icon:"tabler-trash",size:"22"}),e(W,{activator:"parent",location:"top"},{default:t(()=>[x(" Delete Mail ")]),_:1})]),_:1},512),[[Y,"filter"in a(M).params?a(M).params.filter!=="trashed":!0]]),e(i,{onClick:n[10]||(n[10]=s=>a(q)?k("unread"):k("read"))},{default:t(()=>[e(b,{icon:a(q)?"tabler-mail":"tabler-mail-opened",size:"22"},null,8,["icon"]),e(W,{activator:"parent",location:"top"},{default:t(()=>[x($(a(q)?"Mark as Unread":"Mark as Read"),1)]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(b,{icon:"tabler-folder",size:"22"}),e(W,{activator:"parent",location:"top"},{default:t(()=>[x(" Folder ")]),_:1}),e(_e,{activator:"parent"},{default:t(()=>[e(fe,{density:"compact"},{default:t(()=>[(f(!0),w(D,null,U(a(N),s=>(f(),B(ue,{key:s.title,class:oe([a(d)(s.action)?"d-flex":"d-none","items-center"]),href:"#",onClick:ie=>le(s.action)},{prepend:t(()=>[e(b,{icon:s.icon,class:"me-2",size:"20"},null,8,["icon"])]),default:t(()=>[e(me,{class:"text-capitalize"},{default:t(()=>[x($(s.action),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(b,{icon:"tabler-tag",size:"22"}),e(W,{activator:"parent",location:"top"},{default:t(()=>[x(" Label ")]),_:1}),e(_e,{activator:"parent"},{default:t(()=>[e(fe,{density:"compact"},{default:t(()=>[(f(!0),w(D,null,U(a(A),s=>(f(),B(ue,{key:s.title,href:"#",onClick:async()=>{await a(F)(a(h),s.title),await a(u)()}},{prepend:t(()=>[e(ye,{inline:"",color:a(I)(s.title),dot:""},null,8,["color"])]),default:t(()=>[e(me,{class:"ms-2 text-capitalize"},{default:t(()=>[x($(s.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})],4),e(ve),e(i,{onClick:a(u)},{default:t(()=>[e(b,{icon:"tabler-refresh",size:"22"})]),_:1},8,["onClick"]),e(i,null,{default:t(()=>[e(b,{icon:"tabler-dots-vertical",size:"22"})]),_:1})]),e(de),e(a(ce),{tag:"ul",options:{wheelPropagation:!1},class:"email-list"},{default:t(()=>[(f(!0),w(D,null,U(a(r),s=>{var ie;return X((f(),w("li",{key:s.id,class:oe(["email-item d-flex align-center pa-4 gap-2 cursor-pointer",[{"email-read":s.isRead}]]),onClick:J=>te(s)},[e(pe,{"model-value":a(h).includes(s.id),class:"flex-shrink-0","onUpdate:modelValue":J=>O(s.id),onClick:n[11]||(n[11]=Q(()=>{},["stop"]))},null,8,["model-value","onUpdate:modelValue"]),e(i,{color:s.isStarred?"warning":"default",onClick:Q(J=>k(s.isStarred?"unstar":"star",[s.id]),["stop"])},{default:t(()=>[e(b,{icon:"tabler-star",size:"22"})]),_:2},1032,["color","onClick"]),e(Ce,{size:"32"},{default:t(()=>[e($e,{src:s.from.avatar,alt:s.from.name},null,8,["src","alt"])]),_:2},1024),l("h6",Lt,$(s.from.name),1),l("span",It,$(s.subject),1),e(ve),l("div",{class:oe(["email-meta align-center gap-2",c.$vuetify.display.xs?"d-none":""])},[(f(!0),w(D,null,U(s.labels,J=>(f(),B(b,{key:J,icon:"tabler-circle-filled",size:"10",color:a(I)(J)},null,8,["color"]))),128)),l("span",Tt,$(("formatDateToMonthShort"in c?c.formatDateToMonthShort:a(Me))(s.time)),1)],2),l("div",Dt,[e(i,{onClick:Q(J=>k("trash",[s.id]),["stop"])},{default:t(()=>[e(b,{icon:"tabler-trash",size:"22"}),e(W,{activator:"parent",location:"top"},{default:t(()=>[x(" Delete Mail ")]),_:1})]),_:2},1032,["onClick"]),e(i,{class:"mx-2",onClick:Q(J=>k(s.isRead?"unread":"read",[s.id]),["stop"])},{default:t(()=>[e(b,{icon:s.isRead?"tabler-mail":"tabler-mail-opened",size:"22"},null,8,["icon"]),e(W,{activator:"parent",location:"top"},{default:t(()=>[x($(s.isRead?"Mark as Unread":"Mark as Read"),1)]),_:2},1024)]),_:2},1032,["onClick"]),e(i,{onClick:Q(J=>k("spam",[s.id]),["stop"])},{default:t(()=>[e(b,{icon:"tabler-info-circle",size:"22"}),e(W,{activator:"parent",location:"top"},{default:t(()=>[x(" Move to Spam ")]),_:1})]),_:2},1032,["onClick"])])],10,Et)),[[Y,(ie=a(r))==null?void 0:ie.length]])}),128)),X(l("li",Bt,Rt,512),[[Y,!a(r).length]])]),_:1})]),_:1}),X(e(Qe,{onClose:n[12]||(n[12]=s=>_.value=!1)},null,512),[[Y,a(_)]])]),_:1})]),_:1})}}});export{Qt as default};
