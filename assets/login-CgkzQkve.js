import{d as S,r as i,k as A,o as c,c as f,e as r,b as s,n as e,M as w,f as t,I as _,x as h,b2 as B,aX as F,aj as M,ba as j,y as L,b8 as b,b0 as U}from"./index-BgCxDybL.js";import{_ as $}from"./AppTextField.vue_vue_type_script_setup_true_lang-D2ym4mTB.js";import{a as D,b as I}from"./auth-v1-top-shape-Be0n9vOV.js";import{V}from"./VNodeRenderer-DHEemKm_.js";import{u as N}from"./useAbility-c3wl5cxQ.js";import{$ as z}from"./api-8AbSiVmD.js";import{a as E,b as H,V as O}from"./VCard-JMA7DU3d.js";import{V as x}from"./VCardText-DcC-tSsD.js";import{V as X}from"./VForm-D_AaGDRI.js";import{V as q,a as k}from"./VRow-CAgjSbAz.js";import{V as G}from"./VCheckbox-C-M28cuJ.js";import"./form-Cgm8e0On.js";import"./VTextField-BKoM0I-Z.js";/* empty css                   */import"./VCounter-gyJ5h4WJ.js";import"./index-Cy7xuZ2b.js";import"./index-gdm8rwAa.js";import"./VField-C0axO0PV.js";import"./easing-CjukEv2V.js";import"./VInput-iGCkx6cu.js";import"./forwardRefs-C-GTDzx5.js";import"./index-B3bPRkoL.js";import"./createSimpleFunctional-Bx05GkOD.js";import"./VAvatar-C8sniZoQ.js";import"./VImg-BFZj8wJb.js";/* empty css              */import"./VCheckboxBtn-DMECHPt5.js";import"./VSelectionControl-DjVc0MBS.js";const J={class:"auth-wrapper d-flex align-center justify-center pa-4"},K={class:"position-relative my-sm-16"},Q={class:"app-logo"},W={class:"app-logo-title"},Y={class:"text-h4 mb-1"},Z={class:"text-capitalize"},ee=r("p",{class:"mb-0"},"Please sign-in to your account",-1),se={class:"align-self-center text-warning"},ae={class:"d-flex align-center justify-space-between flex-wrap my-6"},oe=r("a",{class:"text-primary",href:"https://wa.me/+9647812135916"}," Forgot Password? ",-1),te={key:0},le={key:1},Le=S({__name:"login",setup(re){const d=i(!1),p=i(!1),C=A(),T=N(),y=i({message:void 0}),v=i(),n=i({username:"",password:""}),u=i(!1),R=async()=>{p.value=!0;try{const o=await z("/login",{method:"POST",body:{username:n.value.username,password:n.value.password},onResponseError({response:g}){y.value.message=g._data,console.log(g._data)}}),{accessToken:a,userData:m,userAbilityRules:l}=o;b("userAbilityRules").value=l,T.update(l),b("userData").value=m,b("accessToken").value=a,await U(()=>{C.push("/patients")}),p.value=!1}catch(o){console.error(o),p.value=!1}},P=()=>{var o;(o=v.value)==null||o.validate().then(({valid:a})=>{a&&R()})};return(o,a)=>{const m=$;return c(),f("div",J,[r("div",K,[s(e(V),{nodes:("h"in o?o.h:e(w))("div",{innerHTML:e(D)}),class:"text-primary auth-v1-top-shape d-none d-sm-block"},null,8,["nodes"]),s(e(V),{nodes:("h"in o?o.h:e(w))("div",{innerHTML:e(I)}),class:"text-primary auth-v1-bottom-shape d-none d-sm-block"},null,8,["nodes"]),s(O,{class:L(["auth-card","pa-6"]),"max-width":"460"},{default:t(()=>[s(E,{class:"justify-center"},{default:t(()=>[s(H,null,{default:t(()=>[r("div",Q,[s(e(V),{nodes:e(_).app.logo},null,8,["nodes"]),r("h1",W,h(e(_).app.title),1)])]),_:1})]),_:1}),s(x,null,{default:t(()=>[r("h4",Y,[r("span",Z,h(e(_).app.title)+" Clinic Application",1)]),ee]),_:1}),s(x,null,{default:t(()=>[s(e(X),{ref_key:"refVForm",ref:v,onSubmit:B(P,["prevent"])},{default:t(()=>[r("p",se,h(e(y).message),1),s(q,null,{default:t(()=>[s(k,{cols:"12"},{default:t(()=>[s(m,{modelValue:e(n).username,"onUpdate:modelValue":a[0]||(a[0]=l=>e(n).username=l),autofocus:"",label:"Username",type:"text",placeholder:""},null,8,["modelValue"])]),_:1}),s(k,{cols:"12"},{default:t(()=>[s(m,{modelValue:e(n).password,"onUpdate:modelValue":a[1]||(a[1]=l=>e(n).password=l),label:"Password",placeholder:"",type:e(d)?"text":"password","append-inner-icon":e(d)?"tabler-eye-off":"tabler-eye","onClick:appendInner":a[2]||(a[2]=l=>d.value=!e(d))},null,8,["modelValue","type","append-inner-icon"]),r("div",ae,[s(G,{modelValue:e(u),"onUpdate:modelValue":a[3]||(a[3]=l=>F(u)?u.value=l:null),label:"Remember me"},null,8,["modelValue"]),oe]),s(M,{block:"",type:"submit",disabled:e(p)},{default:t(()=>[e(p)?(c(),f("span",te,[s(j,{indeterminate:"",color:"info"})])):(c(),f("span",le," Login "))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})])])}}});export{Le as default};
